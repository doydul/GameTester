(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();var Qa={exports:{}},bi={},Ka={exports:{}},J={};var ef;function A_(){if(ef)return J;ef=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.iterator;function x(E){return E===null||typeof E!="object"?null:(E=C&&E[C]||E["@@iterator"],typeof E=="function"?E:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,V={};function K(E,T,X){this.props=E,this.context=T,this.refs=V,this.updater=X||L}K.prototype.isReactComponent={},K.prototype.setState=function(E,T){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,T,"setState")},K.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function Pe(){}Pe.prototype=K.prototype;function De(E,T,X){this.props=E,this.context=T,this.refs=V,this.updater=X||L}var Ae=De.prototype=new Pe;Ae.constructor=De,O(Ae,K.prototype),Ae.isPureReactComponent=!0;var Se=Array.isArray,it=Object.prototype.hasOwnProperty,ie={current:null},be={key:!0,ref:!0,__self:!0,__source:!0};function Je(E,T,X){var q,re={},ne=null,ce=null;if(T!=null)for(q in T.ref!==void 0&&(ce=T.ref),T.key!==void 0&&(ne=""+T.key),T)it.call(T,q)&&!be.hasOwnProperty(q)&&(re[q]=T[q]);var se=arguments.length-2;if(se===1)re.children=X;else if(1<se){for(var fe=Array(se),Ke=0;Ke<se;Ke++)fe[Ke]=arguments[Ke+2];re.children=fe}if(E&&E.defaultProps)for(q in se=E.defaultProps,se)re[q]===void 0&&(re[q]=se[q]);return{$$typeof:i,type:E,key:ne,ref:ce,props:re,_owner:ie.current}}function xt(E,T){return{$$typeof:i,type:E.type,key:T,ref:E.ref,props:E.props,_owner:E._owner}}function vt(E){return typeof E=="object"&&E!==null&&E.$$typeof===i}function Zt(E){var T={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(X){return T[X]})}var It=/\/+/g;function st(E,T){return typeof E=="object"&&E!==null&&E.key!=null?Zt(""+E.key):T.toString(36)}function yt(E,T,X,q,re){var ne=typeof E;(ne==="undefined"||ne==="boolean")&&(E=null);var ce=!1;if(E===null)ce=!0;else switch(ne){case"string":case"number":ce=!0;break;case"object":switch(E.$$typeof){case i:case t:ce=!0}}if(ce)return ce=E,re=re(ce),E=q===""?"."+st(ce,0):q,Se(re)?(X="",E!=null&&(X=E.replace(It,"$&/")+"/"),yt(re,T,X,"",function(Ke){return Ke})):re!=null&&(vt(re)&&(re=xt(re,X+(!re.key||ce&&ce.key===re.key?"":(""+re.key).replace(It,"$&/")+"/")+E)),T.push(re)),1;if(ce=0,q=q===""?".":q+":",Se(E))for(var se=0;se<E.length;se++){ne=E[se];var fe=q+st(ne,se);ce+=yt(ne,T,X,fe,re)}else if(fe=x(E),typeof fe=="function")for(E=fe.call(E),se=0;!(ne=E.next()).done;)ne=ne.value,fe=q+st(ne,se++),ce+=yt(ne,T,X,fe,re);else if(ne==="object")throw T=String(E),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.");return ce}function wt(E,T,X){if(E==null)return E;var q=[],re=0;return yt(E,q,"","",function(ne){return T.call(X,ne,re++)}),q}function Qe(E){if(E._status===-1){var T=E._result;T=T(),T.then(function(X){(E._status===0||E._status===-1)&&(E._status=1,E._result=X)},function(X){(E._status===0||E._status===-1)&&(E._status=2,E._result=X)}),E._status===-1&&(E._status=0,E._result=T)}if(E._status===1)return E._result.default;throw E._result}var ue={current:null},j={transition:null},W={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:j,ReactCurrentOwner:ie};function b(){throw Error("act(...) is not supported in production builds of React.")}return J.Children={map:wt,forEach:function(E,T,X){wt(E,function(){T.apply(this,arguments)},X)},count:function(E){var T=0;return wt(E,function(){T++}),T},toArray:function(E){return wt(E,function(T){return T})||[]},only:function(E){if(!vt(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},J.Component=K,J.Fragment=r,J.Profiler=a,J.PureComponent=De,J.StrictMode=o,J.Suspense=m,J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,J.act=b,J.cloneElement=function(E,T,X){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var q=O({},E.props),re=E.key,ne=E.ref,ce=E._owner;if(T!=null){if(T.ref!==void 0&&(ne=T.ref,ce=ie.current),T.key!==void 0&&(re=""+T.key),E.type&&E.type.defaultProps)var se=E.type.defaultProps;for(fe in T)it.call(T,fe)&&!be.hasOwnProperty(fe)&&(q[fe]=T[fe]===void 0&&se!==void 0?se[fe]:T[fe])}var fe=arguments.length-2;if(fe===1)q.children=X;else if(1<fe){se=Array(fe);for(var Ke=0;Ke<fe;Ke++)se[Ke]=arguments[Ke+2];q.children=se}return{$$typeof:i,type:E.type,key:re,ref:ne,props:q,_owner:ce}},J.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:c,_context:E},E.Consumer=E},J.createElement=Je,J.createFactory=function(E){var T=Je.bind(null,E);return T.type=E,T},J.createRef=function(){return{current:null}},J.forwardRef=function(E){return{$$typeof:p,render:E}},J.isValidElement=vt,J.lazy=function(E){return{$$typeof:S,_payload:{_status:-1,_result:E},_init:Qe}},J.memo=function(E,T){return{$$typeof:g,type:E,compare:T===void 0?null:T}},J.startTransition=function(E){var T=j.transition;j.transition={};try{E()}finally{j.transition=T}},J.unstable_act=b,J.useCallback=function(E,T){return ue.current.useCallback(E,T)},J.useContext=function(E){return ue.current.useContext(E)},J.useDebugValue=function(){},J.useDeferredValue=function(E){return ue.current.useDeferredValue(E)},J.useEffect=function(E,T){return ue.current.useEffect(E,T)},J.useId=function(){return ue.current.useId()},J.useImperativeHandle=function(E,T,X){return ue.current.useImperativeHandle(E,T,X)},J.useInsertionEffect=function(E,T){return ue.current.useInsertionEffect(E,T)},J.useLayoutEffect=function(E,T){return ue.current.useLayoutEffect(E,T)},J.useMemo=function(E,T){return ue.current.useMemo(E,T)},J.useReducer=function(E,T,X){return ue.current.useReducer(E,T,X)},J.useRef=function(E){return ue.current.useRef(E)},J.useState=function(E){return ue.current.useState(E)},J.useSyncExternalStore=function(E,T,X){return ue.current.useSyncExternalStore(E,T,X)},J.useTransition=function(){return ue.current.useTransition()},J.version="18.3.1",J}var tf;function Du(){return tf||(tf=1,Ka.exports=A_()),Ka.exports}var nf;function M_(){if(nf)return bi;nf=1;var i=Du(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,g){var S,C={},x=null,L=null;g!==void 0&&(x=""+g),m.key!==void 0&&(x=""+m.key),m.ref!==void 0&&(L=m.ref);for(S in m)o.call(m,S)&&!c.hasOwnProperty(S)&&(C[S]=m[S]);if(p&&p.defaultProps)for(S in m=p.defaultProps,m)C[S]===void 0&&(C[S]=m[S]);return{$$typeof:t,type:p,key:x,ref:L,props:C,_owner:a.current}}return bi.Fragment=r,bi.jsx=h,bi.jsxs=h,bi}var rf;function O_(){return rf||(rf=1,Qa.exports=M_()),Qa.exports}var _=O_(),Ot=Du(),So={},Ya={exports:{}},pt={},qa={exports:{}},Xa={};var sf;function L_(){return sf||(sf=1,(function(i){function t(j,W){var b=j.length;j.push(W);e:for(;0<b;){var E=b-1>>>1,T=j[E];if(0<a(T,W))j[E]=W,j[b]=T,b=E;else break e}}function r(j){return j.length===0?null:j[0]}function o(j){if(j.length===0)return null;var W=j[0],b=j.pop();if(b!==W){j[0]=b;e:for(var E=0,T=j.length,X=T>>>1;E<X;){var q=2*(E+1)-1,re=j[q],ne=q+1,ce=j[ne];if(0>a(re,b))ne<T&&0>a(ce,re)?(j[E]=ce,j[ne]=b,E=ne):(j[E]=re,j[q]=b,E=q);else if(ne<T&&0>a(ce,b))j[E]=ce,j[ne]=b,E=ne;else break e}}return W}function a(j,W){var b=j.sortIndex-W.sortIndex;return b!==0?b:j.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var m=[],g=[],S=1,C=null,x=3,L=!1,O=!1,V=!1,K=typeof setTimeout=="function"?setTimeout:null,Pe=typeof clearTimeout=="function"?clearTimeout:null,De=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ae(j){for(var W=r(g);W!==null;){if(W.callback===null)o(g);else if(W.startTime<=j)o(g),W.sortIndex=W.expirationTime,t(m,W);else break;W=r(g)}}function Se(j){if(V=!1,Ae(j),!O)if(r(m)!==null)O=!0,Qe(it);else{var W=r(g);W!==null&&ue(Se,W.startTime-j)}}function it(j,W){O=!1,V&&(V=!1,Pe(Je),Je=-1),L=!0;var b=x;try{for(Ae(W),C=r(m);C!==null&&(!(C.expirationTime>W)||j&&!Zt());){var E=C.callback;if(typeof E=="function"){C.callback=null,x=C.priorityLevel;var T=E(C.expirationTime<=W);W=i.unstable_now(),typeof T=="function"?C.callback=T:C===r(m)&&o(m),Ae(W)}else o(m);C=r(m)}if(C!==null)var X=!0;else{var q=r(g);q!==null&&ue(Se,q.startTime-W),X=!1}return X}finally{C=null,x=b,L=!1}}var ie=!1,be=null,Je=-1,xt=5,vt=-1;function Zt(){return!(i.unstable_now()-vt<xt)}function It(){if(be!==null){var j=i.unstable_now();vt=j;var W=!0;try{W=be(!0,j)}finally{W?st():(ie=!1,be=null)}}else ie=!1}var st;if(typeof De=="function")st=function(){De(It)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,wt=yt.port2;yt.port1.onmessage=It,st=function(){wt.postMessage(null)}}else st=function(){K(It,0)};function Qe(j){be=j,ie||(ie=!0,st())}function ue(j,W){Je=K(function(){j(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){O||L||(O=!0,Qe(it))},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xt=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return r(m)},i.unstable_next=function(j){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var b=x;x=W;try{return j()}finally{x=b}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,W){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var b=x;x=j;try{return W()}finally{x=b}},i.unstable_scheduleCallback=function(j,W,b){var E=i.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?E+b:E):b=E,j){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=b+T,j={id:S++,callback:W,priorityLevel:j,startTime:b,expirationTime:T,sortIndex:-1},b>E?(j.sortIndex=b,t(g,j),r(m)===null&&j===r(g)&&(V?(Pe(Je),Je=-1):V=!0,ue(Se,b-E))):(j.sortIndex=T,t(m,j),O||L||(O=!0,Qe(it))),j},i.unstable_shouldYield=Zt,i.unstable_wrapCallback=function(j){var W=x;return function(){var b=x;x=W;try{return j.apply(this,arguments)}finally{x=b}}}})(Xa)),Xa}var of;function j_(){return of||(of=1,qa.exports=L_()),qa.exports}var lf;function F_(){if(lf)return pt;lf=1;var i=Du(),t=j_();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,n){h(e,n),h(e+"Capture",n)}function h(e,n){for(a[e]=n,e=0;e<n.length;e++)o.add(n[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},C={};function x(e){return m.call(C,e)?!0:m.call(S,e)?!1:g.test(e)?C[e]=!0:(S[e]=!0,!1)}function L(e,n,s,l){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function O(e,n,s,l){if(n===null||typeof n>"u"||L(e,n,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function V(e,n,s,l,u,d,f){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=u,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=d,this.removeEmptyString=f}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){K[e]=new V(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];K[n]=new V(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){K[e]=new V(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){K[e]=new V(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){K[e]=new V(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){K[e]=new V(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){K[e]=new V(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){K[e]=new V(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){K[e]=new V(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pe=/[\-:]([a-z])/g;function De(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Pe,De);K[n]=new V(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Pe,De);K[n]=new V(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Pe,De);K[n]=new V(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){K[e]=new V(e,1,!1,e.toLowerCase(),null,!1,!1)}),K.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){K[e]=new V(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ae(e,n,s,l){var u=K.hasOwnProperty(n)?K[n]:null;(u!==null?u.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(O(n,s,u,l)&&(s=null),l||u===null?x(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):u.mustUseProperty?e[u.propertyName]=s===null?u.type===3?!1:"":s:(n=u.attributeName,l=u.attributeNamespace,s===null?e.removeAttribute(n):(u=u.type,s=u===3||u===4&&s===!0?"":""+s,l?e.setAttributeNS(l,n,s):e.setAttribute(n,s))))}var Se=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,it=Symbol.for("react.element"),ie=Symbol.for("react.portal"),be=Symbol.for("react.fragment"),Je=Symbol.for("react.strict_mode"),xt=Symbol.for("react.profiler"),vt=Symbol.for("react.provider"),Zt=Symbol.for("react.context"),It=Symbol.for("react.forward_ref"),st=Symbol.for("react.suspense"),yt=Symbol.for("react.suspense_list"),wt=Symbol.for("react.memo"),Qe=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),j=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=j&&e[j]||e["@@iterator"],typeof e=="function"?e:null)}var b=Object.assign,E;function T(e){if(E===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return`
`+E+e}var X=!1;function q(e,n){if(!e||X)return"";X=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(I){var l=I}Reflect.construct(e,[],n)}else{try{n.call()}catch(I){l=I}e.call(n.prototype)}else{try{throw Error()}catch(I){l=I}e()}}catch(I){if(I&&l&&typeof I.stack=="string"){for(var u=I.stack.split(`
`),d=l.stack.split(`
`),f=u.length-1,v=d.length-1;1<=f&&0<=v&&u[f]!==d[v];)v--;for(;1<=f&&0<=v;f--,v--)if(u[f]!==d[v]){if(f!==1||v!==1)do if(f--,v--,0>v||u[f]!==d[v]){var y=`
`+u[f].replace(" at new "," at ");return e.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",e.displayName)),y}while(1<=f&&0<=v);break}}}finally{X=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?T(e):""}function re(e){switch(e.tag){case 5:return T(e.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1),e;case 11:return e=q(e.type.render,!1),e;case 1:return e=q(e.type,!0),e;default:return""}}function ne(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case be:return"Fragment";case ie:return"Portal";case xt:return"Profiler";case Je:return"StrictMode";case st:return"Suspense";case yt:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Zt:return(e.displayName||"Context")+".Consumer";case vt:return(e._context.displayName||"Context")+".Provider";case It:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wt:return n=e.displayName||null,n!==null?n:ne(e.type)||"Memo";case Qe:n=e._payload,e=e._init;try{return ne(e(n))}catch{}}return null}function ce(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(n);case 8:return n===Je?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fe(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ke(e){var n=fe(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var u=s.get,d=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(f){l=""+f,d.call(this,f)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(f){l=""+f},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ze(e){e._valueTracker||(e._valueTracker=Ke(e))}function rl(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return e&&(l=fe(e)?e.checked?"true":"false":e.value),e=l,e!==s?(n.setValue(e),!0):!1}function Gt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xr(e,n){var s=n.checked;return b({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Jr(e,n){var s=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;s=se(n.value!=null?n.value:s),e._wrapperState={initialChecked:l,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function fs(e,n){n=n.checked,n!=null&&Ae(e,"checked",n,!1)}function Zr(e,n){fs(e,n);var s=se(n.value),l=n.type;if(s!=null)l==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Hn(e,n.type,s):n.hasOwnProperty("defaultValue")&&Hn(e,n.type,se(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function xe(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Hn(e,n,s){(n!=="number"||Gt(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Wn=Array.isArray;function mn(e,n,s,l){if(e=e.options,n){n={};for(var u=0;u<s.length;u++)n["$"+s[u]]=!0;for(s=0;s<e.length;s++)u=n.hasOwnProperty("$"+e[s].value),e[s].selected!==u&&(e[s].selected=u),u&&l&&(e[s].defaultSelected=!0)}else{for(s=""+se(s),n=null,u=0;u<e.length;u++){if(e[u].value===s){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function Vn(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return b({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hr(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(r(92));if(Wn(s)){if(1<s.length)throw Error(r(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:se(s)}}function dc(e,n){var s=se(n.value),l=se(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),l!=null&&(e.defaultValue=""+l)}function hc(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function fc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function il(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?fc(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ps,pc=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,l,u){MSApp.execUnsafeLocalFunction(function(){return e(n,s,l,u)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(ps=ps||document.createElement("div"),ps.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ps.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function ei(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var ti={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jm=["Webkit","ms","Moz","O"];Object.keys(ti).forEach(function(e){jm.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),ti[n]=ti[e]})});function mc(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||ti.hasOwnProperty(e)&&ti[e]?(""+n).trim():n+"px"}function gc(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var l=s.indexOf("--")===0,u=mc(s,n[s],l);s==="float"&&(s="cssFloat"),l?e.setProperty(s,u):e[s]=u}}var Fm=b({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sl(e,n){if(n){if(Fm[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function ol(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ll=null;function al(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ul=null,fr=null,pr=null;function _c(e){if(e=Si(e)){if(typeof ul!="function")throw Error(r(280));var n=e.stateNode;n&&(n=Fs(n),ul(e.stateNode,e.type,n))}}function vc(e){fr?pr?pr.push(e):pr=[e]:fr=e}function yc(){if(fr){var e=fr,n=pr;if(pr=fr=null,_c(e),n)for(e=0;e<n.length;e++)_c(n[e])}}function wc(e,n){return e(n)}function Cc(){}var cl=!1;function Ec(e,n,s){if(cl)return e(n,s);cl=!0;try{return wc(e,n,s)}finally{cl=!1,(fr!==null||pr!==null)&&(Cc(),yc())}}function ni(e,n){var s=e.stateNode;if(s===null)return null;var l=Fs(s);if(l===null)return null;s=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(r(231,n,typeof s));return s}var dl=!1;if(p)try{var ri={};Object.defineProperty(ri,"passive",{get:function(){dl=!0}}),window.addEventListener("test",ri,ri),window.removeEventListener("test",ri,ri)}catch{dl=!1}function bm(e,n,s,l,u,d,f,v,y){var I=Array.prototype.slice.call(arguments,3);try{n.apply(s,I)}catch(R){this.onError(R)}}var ii=!1,ms=null,gs=!1,hl=null,zm={onError:function(e){ii=!0,ms=e}};function Um(e,n,s,l,u,d,f,v,y){ii=!1,ms=null,bm.apply(zm,arguments)}function Bm(e,n,s,l,u,d,f,v,y){if(Um.apply(this,arguments),ii){if(ii){var I=ms;ii=!1,ms=null}else throw Error(r(198));gs||(gs=!0,hl=I)}}function $n(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Sc(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function kc(e){if($n(e)!==e)throw Error(r(188))}function Hm(e){var n=e.alternate;if(!n){if(n=$n(e),n===null)throw Error(r(188));return n!==e?null:e}for(var s=e,l=n;;){var u=s.return;if(u===null)break;var d=u.alternate;if(d===null){if(l=u.return,l!==null){s=l;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===s)return kc(u),e;if(d===l)return kc(u),n;d=d.sibling}throw Error(r(188))}if(s.return!==l.return)s=u,l=d;else{for(var f=!1,v=u.child;v;){if(v===s){f=!0,s=u,l=d;break}if(v===l){f=!0,l=u,s=d;break}v=v.sibling}if(!f){for(v=d.child;v;){if(v===s){f=!0,s=d,l=u;break}if(v===l){f=!0,l=d,s=u;break}v=v.sibling}if(!f)throw Error(r(189))}}if(s.alternate!==l)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?e:n}function Nc(e){return e=Hm(e),e!==null?xc(e):null}function xc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=xc(e);if(n!==null)return n;e=e.sibling}return null}var Ic=t.unstable_scheduleCallback,Tc=t.unstable_cancelCallback,Wm=t.unstable_shouldYield,Vm=t.unstable_requestPaint,Ie=t.unstable_now,$m=t.unstable_getCurrentPriorityLevel,fl=t.unstable_ImmediatePriority,Pc=t.unstable_UserBlockingPriority,_s=t.unstable_NormalPriority,Gm=t.unstable_LowPriority,Rc=t.unstable_IdlePriority,vs=null,Qt=null;function Qm(e){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(vs,e,void 0,(e.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:qm,Km=Math.log,Ym=Math.LN2;function qm(e){return e>>>=0,e===0?32:31-(Km(e)/Ym|0)|0}var ys=64,ws=4194304;function si(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cs(e,n){var s=e.pendingLanes;if(s===0)return 0;var l=0,u=e.suspendedLanes,d=e.pingedLanes,f=s&268435455;if(f!==0){var v=f&~u;v!==0?l=si(v):(d&=f,d!==0&&(l=si(d)))}else f=s&~u,f!==0?l=si(f):d!==0&&(l=si(d));if(l===0)return 0;if(n!==0&&n!==l&&(n&u)===0&&(u=l&-l,d=n&-n,u>=d||u===16&&(d&4194240)!==0))return n;if((l&4)!==0&&(l|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=l;0<n;)s=31-Lt(n),u=1<<s,l|=e[s],n&=~u;return l}function Xm(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jm(e,n){for(var s=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes;0<d;){var f=31-Lt(d),v=1<<f,y=u[f];y===-1?((v&s)===0||(v&l)!==0)&&(u[f]=Xm(v,n)):y<=n&&(e.expiredLanes|=v),d&=~v}}function pl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Dc(){var e=ys;return ys<<=1,(ys&4194240)===0&&(ys=64),e}function ml(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function oi(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Lt(n),e[n]=s}function Zm(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<s;){var u=31-Lt(s),d=1<<u;n[u]=0,l[u]=-1,e[u]=-1,s&=~d}}function gl(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var l=31-Lt(s),u=1<<l;u&n|e[l]&n&&(e[l]|=n),s&=~u}}var de=0;function Ac(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Mc,_l,Oc,Lc,jc,vl=!1,Es=[],gn=null,_n=null,vn=null,li=new Map,ai=new Map,yn=[],eg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fc(e,n){switch(e){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":vn=null;break;case"pointerover":case"pointerout":li.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ai.delete(n.pointerId)}}function ui(e,n,s,l,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[u]},n!==null&&(n=Si(n),n!==null&&_l(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function tg(e,n,s,l,u){switch(n){case"focusin":return gn=ui(gn,e,n,s,l,u),!0;case"dragenter":return _n=ui(_n,e,n,s,l,u),!0;case"mouseover":return vn=ui(vn,e,n,s,l,u),!0;case"pointerover":var d=u.pointerId;return li.set(d,ui(li.get(d)||null,e,n,s,l,u)),!0;case"gotpointercapture":return d=u.pointerId,ai.set(d,ui(ai.get(d)||null,e,n,s,l,u)),!0}return!1}function bc(e){var n=Gn(e.target);if(n!==null){var s=$n(n);if(s!==null){if(n=s.tag,n===13){if(n=Sc(s),n!==null){e.blockedOn=n,jc(e.priority,function(){Oc(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ss(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=wl(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);ll=l,s.target.dispatchEvent(l),ll=null}else return n=Si(s),n!==null&&_l(n),e.blockedOn=s,!1;n.shift()}return!0}function zc(e,n,s){Ss(e)&&s.delete(n)}function ng(){vl=!1,gn!==null&&Ss(gn)&&(gn=null),_n!==null&&Ss(_n)&&(_n=null),vn!==null&&Ss(vn)&&(vn=null),li.forEach(zc),ai.forEach(zc)}function ci(e,n){e.blockedOn===n&&(e.blockedOn=null,vl||(vl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ng)))}function di(e){function n(u){return ci(u,e)}if(0<Es.length){ci(Es[0],e);for(var s=1;s<Es.length;s++){var l=Es[s];l.blockedOn===e&&(l.blockedOn=null)}}for(gn!==null&&ci(gn,e),_n!==null&&ci(_n,e),vn!==null&&ci(vn,e),li.forEach(n),ai.forEach(n),s=0;s<yn.length;s++)l=yn[s],l.blockedOn===e&&(l.blockedOn=null);for(;0<yn.length&&(s=yn[0],s.blockedOn===null);)bc(s),s.blockedOn===null&&yn.shift()}var mr=Se.ReactCurrentBatchConfig,ks=!0;function rg(e,n,s,l){var u=de,d=mr.transition;mr.transition=null;try{de=1,yl(e,n,s,l)}finally{de=u,mr.transition=d}}function ig(e,n,s,l){var u=de,d=mr.transition;mr.transition=null;try{de=4,yl(e,n,s,l)}finally{de=u,mr.transition=d}}function yl(e,n,s,l){if(ks){var u=wl(e,n,s,l);if(u===null)Fl(e,n,l,Ns,s),Fc(e,l);else if(tg(u,e,n,s,l))l.stopPropagation();else if(Fc(e,l),n&4&&-1<eg.indexOf(e)){for(;u!==null;){var d=Si(u);if(d!==null&&Mc(d),d=wl(e,n,s,l),d===null&&Fl(e,n,l,Ns,s),d===u)break;u=d}u!==null&&l.stopPropagation()}else Fl(e,n,l,null,s)}}var Ns=null;function wl(e,n,s,l){if(Ns=null,e=al(l),e=Gn(e),e!==null)if(n=$n(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Sc(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Ns=e,null}function Uc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($m()){case fl:return 1;case Pc:return 4;case _s:case Gm:return 16;case Rc:return 536870912;default:return 16}default:return 16}}var wn=null,Cl=null,xs=null;function Bc(){if(xs)return xs;var e,n=Cl,s=n.length,l,u="value"in wn?wn.value:wn.textContent,d=u.length;for(e=0;e<s&&n[e]===u[e];e++);var f=s-e;for(l=1;l<=f&&n[s-l]===u[d-l];l++);return xs=u.slice(e,1<l?1-l:void 0)}function Is(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ts(){return!0}function Hc(){return!1}function Ct(e){function n(s,l,u,d,f){this._reactName=s,this._targetInst=u,this.type=l,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(s=e[v],this[v]=s?s(d):d[v]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ts:Hc,this.isPropagationStopped=Hc,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),n}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},El=Ct(gr),hi=b({},gr,{view:0,detail:0}),sg=Ct(hi),Sl,kl,fi,Ps=b({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fi&&(fi&&e.type==="mousemove"?(Sl=e.screenX-fi.screenX,kl=e.screenY-fi.screenY):kl=Sl=0,fi=e),Sl)},movementY:function(e){return"movementY"in e?e.movementY:kl}}),Wc=Ct(Ps),og=b({},Ps,{dataTransfer:0}),lg=Ct(og),ag=b({},hi,{relatedTarget:0}),Nl=Ct(ag),ug=b({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),cg=Ct(ug),dg=b({},gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hg=Ct(dg),fg=b({},gr,{data:0}),Vc=Ct(fg),pg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _g(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=gg[e])?!!n[e]:!1}function xl(){return _g}var vg=b({},hi,{key:function(e){if(e.key){var n=pg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Is(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xl,charCode:function(e){return e.type==="keypress"?Is(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Is(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yg=Ct(vg),wg=b({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$c=Ct(wg),Cg=b({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xl}),Eg=Ct(Cg),Sg=b({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),kg=Ct(Sg),Ng=b({},Ps,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xg=Ct(Ng),Ig=[9,13,27,32],Il=p&&"CompositionEvent"in window,pi=null;p&&"documentMode"in document&&(pi=document.documentMode);var Tg=p&&"TextEvent"in window&&!pi,Gc=p&&(!Il||pi&&8<pi&&11>=pi),Qc=" ",Kc=!1;function Yc(e,n){switch(e){case"keyup":return Ig.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _r=!1;function Pg(e,n){switch(e){case"compositionend":return qc(n);case"keypress":return n.which!==32?null:(Kc=!0,Qc);case"textInput":return e=n.data,e===Qc&&Kc?null:e;default:return null}}function Rg(e,n){if(_r)return e==="compositionend"||!Il&&Yc(e,n)?(e=Bc(),xs=Cl=wn=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Gc&&n.locale!=="ko"?null:n.data;default:return null}}var Dg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Dg[e.type]:n==="textarea"}function Jc(e,n,s,l){vc(l),n=Os(n,"onChange"),0<n.length&&(s=new El("onChange","change",null,s,l),e.push({event:s,listeners:n}))}var mi=null,gi=null;function Ag(e){gd(e,0)}function Rs(e){var n=Er(e);if(rl(n))return e}function Mg(e,n){if(e==="change")return n}var Zc=!1;if(p){var Tl;if(p){var Pl="oninput"in document;if(!Pl){var ed=document.createElement("div");ed.setAttribute("oninput","return;"),Pl=typeof ed.oninput=="function"}Tl=Pl}else Tl=!1;Zc=Tl&&(!document.documentMode||9<document.documentMode)}function td(){mi&&(mi.detachEvent("onpropertychange",nd),gi=mi=null)}function nd(e){if(e.propertyName==="value"&&Rs(gi)){var n=[];Jc(n,gi,e,al(e)),Ec(Ag,n)}}function Og(e,n,s){e==="focusin"?(td(),mi=n,gi=s,mi.attachEvent("onpropertychange",nd)):e==="focusout"&&td()}function Lg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rs(gi)}function jg(e,n){if(e==="click")return Rs(n)}function Fg(e,n){if(e==="input"||e==="change")return Rs(n)}function bg(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var jt=typeof Object.is=="function"?Object.is:bg;function _i(e,n){if(jt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var u=s[l];if(!m.call(n,u)||!jt(e[u],n[u]))return!1}return!0}function rd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function id(e,n){var s=rd(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=n&&l>=n)return{node:s,offset:n-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=rd(s)}}function sd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?sd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function od(){for(var e=window,n=Gt();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=Gt(e.document)}return n}function Rl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function zg(e){var n=od(),s=e.focusedElem,l=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&sd(s.ownerDocument.documentElement,s)){if(l!==null&&Rl(s)){if(n=l.start,e=l.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var u=s.textContent.length,d=Math.min(l.start,u);l=l.end===void 0?d:Math.min(l.end,u),!e.extend&&d>l&&(u=l,l=d,d=u),u=id(s,d);var f=id(s,l);u&&f&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(n=n.createRange(),n.setStart(u.node,u.offset),e.removeAllRanges(),d>l?(e.addRange(n),e.extend(f.node,f.offset)):(n.setEnd(f.node,f.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ug=p&&"documentMode"in document&&11>=document.documentMode,vr=null,Dl=null,vi=null,Al=!1;function ld(e,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Al||vr==null||vr!==Gt(l)||(l=vr,"selectionStart"in l&&Rl(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),vi&&_i(vi,l)||(vi=l,l=Os(Dl,"onSelect"),0<l.length&&(n=new El("onSelect","select",null,n,s),e.push({event:n,listeners:l}),n.target=vr)))}function Ds(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var yr={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionend:Ds("Transition","TransitionEnd")},Ml={},ad={};p&&(ad=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function As(e){if(Ml[e])return Ml[e];if(!yr[e])return e;var n=yr[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in ad)return Ml[e]=n[s];return e}var ud=As("animationend"),cd=As("animationiteration"),dd=As("animationstart"),hd=As("transitionend"),fd=new Map,pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(e,n){fd.set(e,n),c(n,[e])}for(var Ol=0;Ol<pd.length;Ol++){var Ll=pd[Ol],Bg=Ll.toLowerCase(),Hg=Ll[0].toUpperCase()+Ll.slice(1);Cn(Bg,"on"+Hg)}Cn(ud,"onAnimationEnd"),Cn(cd,"onAnimationIteration"),Cn(dd,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(hd,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wg=new Set("cancel close invalid load scroll toggle".split(" ").concat(yi));function md(e,n,s){var l=e.type||"unknown-event";e.currentTarget=s,Bm(l,n,void 0,e),e.currentTarget=null}function gd(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],u=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var f=l.length-1;0<=f;f--){var v=l[f],y=v.instance,I=v.currentTarget;if(v=v.listener,y!==d&&u.isPropagationStopped())break e;md(u,v,I),d=y}else for(f=0;f<l.length;f++){if(v=l[f],y=v.instance,I=v.currentTarget,v=v.listener,y!==d&&u.isPropagationStopped())break e;md(u,v,I),d=y}}}if(gs)throw e=hl,gs=!1,hl=null,e}function _e(e,n){var s=n[Wl];s===void 0&&(s=n[Wl]=new Set);var l=e+"__bubble";s.has(l)||(_d(n,e,2,!1),s.add(l))}function jl(e,n,s){var l=0;n&&(l|=4),_d(s,e,l,n)}var Ms="_reactListening"+Math.random().toString(36).slice(2);function wi(e){if(!e[Ms]){e[Ms]=!0,o.forEach(function(s){s!=="selectionchange"&&(Wg.has(s)||jl(s,!1,e),jl(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ms]||(n[Ms]=!0,jl("selectionchange",!1,n))}}function _d(e,n,s,l){switch(Uc(n)){case 1:var u=rg;break;case 4:u=ig;break;default:u=yl}s=u.bind(null,n,s,e),u=void 0,!dl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(n,s,{capture:!0,passive:u}):e.addEventListener(n,s,!0):u!==void 0?e.addEventListener(n,s,{passive:u}):e.addEventListener(n,s,!1)}function Fl(e,n,s,l,u){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var f=l.tag;if(f===3||f===4){var v=l.stateNode.containerInfo;if(v===u||v.nodeType===8&&v.parentNode===u)break;if(f===4)for(f=l.return;f!==null;){var y=f.tag;if((y===3||y===4)&&(y=f.stateNode.containerInfo,y===u||y.nodeType===8&&y.parentNode===u))return;f=f.return}for(;v!==null;){if(f=Gn(v),f===null)return;if(y=f.tag,y===5||y===6){l=d=f;continue e}v=v.parentNode}}l=l.return}Ec(function(){var I=d,R=al(s),D=[];e:{var P=fd.get(e);if(P!==void 0){var F=El,U=e;switch(e){case"keypress":if(Is(s)===0)break e;case"keydown":case"keyup":F=yg;break;case"focusin":U="focus",F=Nl;break;case"focusout":U="blur",F=Nl;break;case"beforeblur":case"afterblur":F=Nl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=lg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=Eg;break;case ud:case cd:case dd:F=cg;break;case hd:F=kg;break;case"scroll":F=sg;break;case"wheel":F=xg;break;case"copy":case"cut":case"paste":F=hg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=$c}var B=(n&4)!==0,Te=!B&&e==="scroll",k=B?P!==null?P+"Capture":null:P;B=[];for(var w=I,N;w!==null;){N=w;var A=N.stateNode;if(N.tag===5&&A!==null&&(N=A,k!==null&&(A=ni(w,k),A!=null&&B.push(Ci(w,A,N)))),Te)break;w=w.return}0<B.length&&(P=new F(P,U,null,s,R),D.push({event:P,listeners:B}))}}if((n&7)===0){e:{if(P=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",P&&s!==ll&&(U=s.relatedTarget||s.fromElement)&&(Gn(U)||U[en]))break e;if((F||P)&&(P=R.window===R?R:(P=R.ownerDocument)?P.defaultView||P.parentWindow:window,F?(U=s.relatedTarget||s.toElement,F=I,U=U?Gn(U):null,U!==null&&(Te=$n(U),U!==Te||U.tag!==5&&U.tag!==6)&&(U=null)):(F=null,U=I),F!==U)){if(B=Wc,A="onMouseLeave",k="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(B=$c,A="onPointerLeave",k="onPointerEnter",w="pointer"),Te=F==null?P:Er(F),N=U==null?P:Er(U),P=new B(A,w+"leave",F,s,R),P.target=Te,P.relatedTarget=N,A=null,Gn(R)===I&&(B=new B(k,w+"enter",U,s,R),B.target=N,B.relatedTarget=Te,A=B),Te=A,F&&U)t:{for(B=F,k=U,w=0,N=B;N;N=wr(N))w++;for(N=0,A=k;A;A=wr(A))N++;for(;0<w-N;)B=wr(B),w--;for(;0<N-w;)k=wr(k),N--;for(;w--;){if(B===k||k!==null&&B===k.alternate)break t;B=wr(B),k=wr(k)}B=null}else B=null;F!==null&&vd(D,P,F,B,!1),U!==null&&Te!==null&&vd(D,Te,U,B,!0)}}e:{if(P=I?Er(I):window,F=P.nodeName&&P.nodeName.toLowerCase(),F==="select"||F==="input"&&P.type==="file")var H=Mg;else if(Xc(P))if(Zc)H=Fg;else{H=Lg;var $=Og}else(F=P.nodeName)&&F.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(H=jg);if(H&&(H=H(e,I))){Jc(D,H,s,R);break e}$&&$(e,P,I),e==="focusout"&&($=P._wrapperState)&&$.controlled&&P.type==="number"&&Hn(P,"number",P.value)}switch($=I?Er(I):window,e){case"focusin":(Xc($)||$.contentEditable==="true")&&(vr=$,Dl=I,vi=null);break;case"focusout":vi=Dl=vr=null;break;case"mousedown":Al=!0;break;case"contextmenu":case"mouseup":case"dragend":Al=!1,ld(D,s,R);break;case"selectionchange":if(Ug)break;case"keydown":case"keyup":ld(D,s,R)}var G;if(Il)e:{switch(e){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else _r?Yc(e,s)&&(Y="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Y="onCompositionStart");Y&&(Gc&&s.locale!=="ko"&&(_r||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&_r&&(G=Bc()):(wn=R,Cl="value"in wn?wn.value:wn.textContent,_r=!0)),$=Os(I,Y),0<$.length&&(Y=new Vc(Y,e,null,s,R),D.push({event:Y,listeners:$}),G?Y.data=G:(G=qc(s),G!==null&&(Y.data=G)))),(G=Tg?Pg(e,s):Rg(e,s))&&(I=Os(I,"onBeforeInput"),0<I.length&&(R=new Vc("onBeforeInput","beforeinput",null,s,R),D.push({event:R,listeners:I}),R.data=G))}gd(D,n)})}function Ci(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Os(e,n){for(var s=n+"Capture",l=[];e!==null;){var u=e,d=u.stateNode;u.tag===5&&d!==null&&(u=d,d=ni(e,s),d!=null&&l.unshift(Ci(e,d,u)),d=ni(e,n),d!=null&&l.push(Ci(e,d,u))),e=e.return}return l}function wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vd(e,n,s,l,u){for(var d=n._reactName,f=[];s!==null&&s!==l;){var v=s,y=v.alternate,I=v.stateNode;if(y!==null&&y===l)break;v.tag===5&&I!==null&&(v=I,u?(y=ni(s,d),y!=null&&f.unshift(Ci(s,y,v))):u||(y=ni(s,d),y!=null&&f.push(Ci(s,y,v)))),s=s.return}f.length!==0&&e.push({event:n,listeners:f})}var Vg=/\r\n?/g,$g=/\u0000|\uFFFD/g;function yd(e){return(typeof e=="string"?e:""+e).replace(Vg,`
`).replace($g,"")}function Ls(e,n,s){if(n=yd(n),yd(e)!==n&&s)throw Error(r(425))}function js(){}var bl=null,zl=null;function Ul(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Bl=typeof setTimeout=="function"?setTimeout:void 0,Gg=typeof clearTimeout=="function"?clearTimeout:void 0,wd=typeof Promise=="function"?Promise:void 0,Qg=typeof queueMicrotask=="function"?queueMicrotask:typeof wd<"u"?function(e){return wd.resolve(null).then(e).catch(Kg)}:Bl;function Kg(e){setTimeout(function(){throw e})}function Hl(e,n){var s=n,l=0;do{var u=s.nextSibling;if(e.removeChild(s),u&&u.nodeType===8)if(s=u.data,s==="/$"){if(l===0){e.removeChild(u),di(n);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=u}while(s);di(n)}function En(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Cd(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Cr=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Cr,Ei="__reactProps$"+Cr,en="__reactContainer$"+Cr,Wl="__reactEvents$"+Cr,Yg="__reactListeners$"+Cr,qg="__reactHandles$"+Cr;function Gn(e){var n=e[Kt];if(n)return n;for(var s=e.parentNode;s;){if(n=s[en]||s[Kt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Cd(e);e!==null;){if(s=e[Kt])return s;e=Cd(e)}return n}e=s,s=e.parentNode}return null}function Si(e){return e=e[Kt]||e[en],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Er(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Fs(e){return e[Ei]||null}var Vl=[],Sr=-1;function Sn(e){return{current:e}}function ve(e){0>Sr||(e.current=Vl[Sr],Vl[Sr]=null,Sr--)}function pe(e,n){Sr++,Vl[Sr]=e.current,e.current=n}var kn={},Ze=Sn(kn),ut=Sn(!1),Qn=kn;function kr(e,n){var s=e.type.contextTypes;if(!s)return kn;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var u={},d;for(d in s)u[d]=n[d];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=u),u}function ct(e){return e=e.childContextTypes,e!=null}function bs(){ve(ut),ve(Ze)}function Ed(e,n,s){if(Ze.current!==kn)throw Error(r(168));pe(Ze,n),pe(ut,s)}function Sd(e,n,s){var l=e.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var u in l)if(!(u in n))throw Error(r(108,ce(e)||"Unknown",u));return b({},s,l)}function zs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kn,Qn=Ze.current,pe(Ze,e),pe(ut,ut.current),!0}function kd(e,n,s){var l=e.stateNode;if(!l)throw Error(r(169));s?(e=Sd(e,n,Qn),l.__reactInternalMemoizedMergedChildContext=e,ve(ut),ve(Ze),pe(Ze,e)):ve(ut),pe(ut,s)}var tn=null,Us=!1,$l=!1;function Nd(e){tn===null?tn=[e]:tn.push(e)}function Xg(e){Us=!0,Nd(e)}function Nn(){if(!$l&&tn!==null){$l=!0;var e=0,n=de;try{var s=tn;for(de=1;e<s.length;e++){var l=s[e];do l=l(!0);while(l!==null)}tn=null,Us=!1}catch(u){throw tn!==null&&(tn=tn.slice(e+1)),Ic(fl,Nn),u}finally{de=n,$l=!1}}return null}var Nr=[],xr=0,Bs=null,Hs=0,Tt=[],Pt=0,Kn=null,nn=1,rn="";function Yn(e,n){Nr[xr++]=Hs,Nr[xr++]=Bs,Bs=e,Hs=n}function xd(e,n,s){Tt[Pt++]=nn,Tt[Pt++]=rn,Tt[Pt++]=Kn,Kn=e;var l=nn;e=rn;var u=32-Lt(l)-1;l&=~(1<<u),s+=1;var d=32-Lt(n)+u;if(30<d){var f=u-u%5;d=(l&(1<<f)-1).toString(32),l>>=f,u-=f,nn=1<<32-Lt(n)+u|s<<u|l,rn=d+e}else nn=1<<d|s<<u|l,rn=e}function Gl(e){e.return!==null&&(Yn(e,1),xd(e,1,0))}function Ql(e){for(;e===Bs;)Bs=Nr[--xr],Nr[xr]=null,Hs=Nr[--xr],Nr[xr]=null;for(;e===Kn;)Kn=Tt[--Pt],Tt[Pt]=null,rn=Tt[--Pt],Tt[Pt]=null,nn=Tt[--Pt],Tt[Pt]=null}var Et=null,St=null,we=!1,Ft=null;function Id(e,n){var s=Mt(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Td(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Et=e,St=En(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Et=e,St=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=Kn!==null?{id:nn,overflow:rn}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Mt(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,Et=e,St=null,!0):!1;default:return!1}}function Kl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Yl(e){if(we){var n=St;if(n){var s=n;if(!Td(e,n)){if(Kl(e))throw Error(r(418));n=En(s.nextSibling);var l=Et;n&&Td(e,n)?Id(l,s):(e.flags=e.flags&-4097|2,we=!1,Et=e)}}else{if(Kl(e))throw Error(r(418));e.flags=e.flags&-4097|2,we=!1,Et=e}}}function Pd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Et=e}function Ws(e){if(e!==Et)return!1;if(!we)return Pd(e),we=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Ul(e.type,e.memoizedProps)),n&&(n=St)){if(Kl(e))throw Rd(),Error(r(418));for(;n;)Id(e,n),n=En(n.nextSibling)}if(Pd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){St=En(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}St=null}}else St=Et?En(e.stateNode.nextSibling):null;return!0}function Rd(){for(var e=St;e;)e=En(e.nextSibling)}function Ir(){St=Et=null,we=!1}function ql(e){Ft===null?Ft=[e]:Ft.push(e)}var Jg=Se.ReactCurrentBatchConfig;function ki(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var l=s.stateNode}if(!l)throw Error(r(147,e));var u=l,d=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===d?n.ref:(n=function(f){var v=u.refs;f===null?delete v[d]:v[d]=f},n._stringRef=d,n)}if(typeof e!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function Vs(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Dd(e){var n=e._init;return n(e._payload)}function Ad(e){function n(k,w){if(e){var N=k.deletions;N===null?(k.deletions=[w],k.flags|=16):N.push(w)}}function s(k,w){if(!e)return null;for(;w!==null;)n(k,w),w=w.sibling;return null}function l(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function u(k,w){return k=Mn(k,w),k.index=0,k.sibling=null,k}function d(k,w,N){return k.index=N,e?(N=k.alternate,N!==null?(N=N.index,N<w?(k.flags|=2,w):N):(k.flags|=2,w)):(k.flags|=1048576,w)}function f(k){return e&&k.alternate===null&&(k.flags|=2),k}function v(k,w,N,A){return w===null||w.tag!==6?(w=Ba(N,k.mode,A),w.return=k,w):(w=u(w,N),w.return=k,w)}function y(k,w,N,A){var H=N.type;return H===be?R(k,w,N.props.children,A,N.key):w!==null&&(w.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Qe&&Dd(H)===w.type)?(A=u(w,N.props),A.ref=ki(k,w,N),A.return=k,A):(A=mo(N.type,N.key,N.props,null,k.mode,A),A.ref=ki(k,w,N),A.return=k,A)}function I(k,w,N,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=Ha(N,k.mode,A),w.return=k,w):(w=u(w,N.children||[]),w.return=k,w)}function R(k,w,N,A,H){return w===null||w.tag!==7?(w=rr(N,k.mode,A,H),w.return=k,w):(w=u(w,N),w.return=k,w)}function D(k,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ba(""+w,k.mode,N),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case it:return N=mo(w.type,w.key,w.props,null,k.mode,N),N.ref=ki(k,null,w),N.return=k,N;case ie:return w=Ha(w,k.mode,N),w.return=k,w;case Qe:var A=w._init;return D(k,A(w._payload),N)}if(Wn(w)||W(w))return w=rr(w,k.mode,N,null),w.return=k,w;Vs(k,w)}return null}function P(k,w,N,A){var H=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return H!==null?null:v(k,w,""+N,A);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case it:return N.key===H?y(k,w,N,A):null;case ie:return N.key===H?I(k,w,N,A):null;case Qe:return H=N._init,P(k,w,H(N._payload),A)}if(Wn(N)||W(N))return H!==null?null:R(k,w,N,A,null);Vs(k,N)}return null}function F(k,w,N,A,H){if(typeof A=="string"&&A!==""||typeof A=="number")return k=k.get(N)||null,v(w,k,""+A,H);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case it:return k=k.get(A.key===null?N:A.key)||null,y(w,k,A,H);case ie:return k=k.get(A.key===null?N:A.key)||null,I(w,k,A,H);case Qe:var $=A._init;return F(k,w,N,$(A._payload),H)}if(Wn(A)||W(A))return k=k.get(N)||null,R(w,k,A,H,null);Vs(w,A)}return null}function U(k,w,N,A){for(var H=null,$=null,G=w,Y=w=0,He=null;G!==null&&Y<N.length;Y++){G.index>Y?(He=G,G=null):He=G.sibling;var le=P(k,G,N[Y],A);if(le===null){G===null&&(G=He);break}e&&G&&le.alternate===null&&n(k,G),w=d(le,w,Y),$===null?H=le:$.sibling=le,$=le,G=He}if(Y===N.length)return s(k,G),we&&Yn(k,Y),H;if(G===null){for(;Y<N.length;Y++)G=D(k,N[Y],A),G!==null&&(w=d(G,w,Y),$===null?H=G:$.sibling=G,$=G);return we&&Yn(k,Y),H}for(G=l(k,G);Y<N.length;Y++)He=F(G,k,Y,N[Y],A),He!==null&&(e&&He.alternate!==null&&G.delete(He.key===null?Y:He.key),w=d(He,w,Y),$===null?H=He:$.sibling=He,$=He);return e&&G.forEach(function(On){return n(k,On)}),we&&Yn(k,Y),H}function B(k,w,N,A){var H=W(N);if(typeof H!="function")throw Error(r(150));if(N=H.call(N),N==null)throw Error(r(151));for(var $=H=null,G=w,Y=w=0,He=null,le=N.next();G!==null&&!le.done;Y++,le=N.next()){G.index>Y?(He=G,G=null):He=G.sibling;var On=P(k,G,le.value,A);if(On===null){G===null&&(G=He);break}e&&G&&On.alternate===null&&n(k,G),w=d(On,w,Y),$===null?H=On:$.sibling=On,$=On,G=He}if(le.done)return s(k,G),we&&Yn(k,Y),H;if(G===null){for(;!le.done;Y++,le=N.next())le=D(k,le.value,A),le!==null&&(w=d(le,w,Y),$===null?H=le:$.sibling=le,$=le);return we&&Yn(k,Y),H}for(G=l(k,G);!le.done;Y++,le=N.next())le=F(G,k,Y,le.value,A),le!==null&&(e&&le.alternate!==null&&G.delete(le.key===null?Y:le.key),w=d(le,w,Y),$===null?H=le:$.sibling=le,$=le);return e&&G.forEach(function(D_){return n(k,D_)}),we&&Yn(k,Y),H}function Te(k,w,N,A){if(typeof N=="object"&&N!==null&&N.type===be&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case it:e:{for(var H=N.key,$=w;$!==null;){if($.key===H){if(H=N.type,H===be){if($.tag===7){s(k,$.sibling),w=u($,N.props.children),w.return=k,k=w;break e}}else if($.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Qe&&Dd(H)===$.type){s(k,$.sibling),w=u($,N.props),w.ref=ki(k,$,N),w.return=k,k=w;break e}s(k,$);break}else n(k,$);$=$.sibling}N.type===be?(w=rr(N.props.children,k.mode,A,N.key),w.return=k,k=w):(A=mo(N.type,N.key,N.props,null,k.mode,A),A.ref=ki(k,w,N),A.return=k,k=A)}return f(k);case ie:e:{for($=N.key;w!==null;){if(w.key===$)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){s(k,w.sibling),w=u(w,N.children||[]),w.return=k,k=w;break e}else{s(k,w);break}else n(k,w);w=w.sibling}w=Ha(N,k.mode,A),w.return=k,k=w}return f(k);case Qe:return $=N._init,Te(k,w,$(N._payload),A)}if(Wn(N))return U(k,w,N,A);if(W(N))return B(k,w,N,A);Vs(k,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(s(k,w.sibling),w=u(w,N),w.return=k,k=w):(s(k,w),w=Ba(N,k.mode,A),w.return=k,k=w),f(k)):s(k,w)}return Te}var Tr=Ad(!0),Md=Ad(!1),$s=Sn(null),Gs=null,Pr=null,Xl=null;function Jl(){Xl=Pr=Gs=null}function Zl(e){var n=$s.current;ve($s),e._currentValue=n}function ea(e,n,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===s)break;e=e.return}}function Rr(e,n){Gs=e,Xl=Pr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(dt=!0),e.firstContext=null)}function Rt(e){var n=e._currentValue;if(Xl!==e)if(e={context:e,memoizedValue:n,next:null},Pr===null){if(Gs===null)throw Error(r(308));Pr=e,Gs.dependencies={lanes:0,firstContext:e}}else Pr=Pr.next=e;return n}var qn=null;function ta(e){qn===null?qn=[e]:qn.push(e)}function Od(e,n,s,l){var u=n.interleaved;return u===null?(s.next=s,ta(n)):(s.next=u.next,u.next=s),n.interleaved=s,sn(e,l)}function sn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var xn=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ld(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function on(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function In(e,n,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(oe&2)!==0){var u=l.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),l.pending=n,sn(e,s)}return u=l.interleaved,u===null?(n.next=n,ta(l)):(n.next=u.next,u.next=n),l.interleaved=n,sn(e,s)}function Qs(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,gl(e,s)}}function jd(e,n){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var u=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var f={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};d===null?u=d=f:d=d.next=f,s=s.next}while(s!==null);d===null?u=d=n:d=d.next=n}else u=d=n;s={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:l.shared,effects:l.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Ks(e,n,s,l){var u=e.updateQueue;xn=!1;var d=u.firstBaseUpdate,f=u.lastBaseUpdate,v=u.shared.pending;if(v!==null){u.shared.pending=null;var y=v,I=y.next;y.next=null,f===null?d=I:f.next=I,f=y;var R=e.alternate;R!==null&&(R=R.updateQueue,v=R.lastBaseUpdate,v!==f&&(v===null?R.firstBaseUpdate=I:v.next=I,R.lastBaseUpdate=y))}if(d!==null){var D=u.baseState;f=0,R=I=y=null,v=d;do{var P=v.lane,F=v.eventTime;if((l&P)===P){R!==null&&(R=R.next={eventTime:F,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var U=e,B=v;switch(P=n,F=s,B.tag){case 1:if(U=B.payload,typeof U=="function"){D=U.call(F,D,P);break e}D=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=B.payload,P=typeof U=="function"?U.call(F,D,P):U,P==null)break e;D=b({},D,P);break e;case 2:xn=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,P=u.effects,P===null?u.effects=[v]:P.push(v))}else F={eventTime:F,lane:P,tag:v.tag,payload:v.payload,callback:v.callback,next:null},R===null?(I=R=F,y=D):R=R.next=F,f|=P;if(v=v.next,v===null){if(v=u.shared.pending,v===null)break;P=v,v=P.next,P.next=null,u.lastBaseUpdate=P,u.shared.pending=null}}while(!0);if(R===null&&(y=D),u.baseState=y,u.firstBaseUpdate=I,u.lastBaseUpdate=R,n=u.shared.interleaved,n!==null){u=n;do f|=u.lane,u=u.next;while(u!==n)}else d===null&&(u.shared.lanes=0);Zn|=f,e.lanes=f,e.memoizedState=D}}function Fd(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var l=e[n],u=l.callback;if(u!==null){if(l.callback=null,l=s,typeof u!="function")throw Error(r(191,u));u.call(l)}}}var Ni={},Yt=Sn(Ni),xi=Sn(Ni),Ii=Sn(Ni);function Xn(e){if(e===Ni)throw Error(r(174));return e}function ra(e,n){switch(pe(Ii,n),pe(xi,e),pe(Yt,Ni),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:il(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=il(n,e)}ve(Yt),pe(Yt,n)}function Dr(){ve(Yt),ve(xi),ve(Ii)}function bd(e){Xn(Ii.current);var n=Xn(Yt.current),s=il(n,e.type);n!==s&&(pe(xi,e),pe(Yt,s))}function ia(e){xi.current===e&&(ve(Yt),ve(xi))}var Ce=Sn(0);function Ys(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var sa=[];function oa(){for(var e=0;e<sa.length;e++)sa[e]._workInProgressVersionPrimary=null;sa.length=0}var qs=Se.ReactCurrentDispatcher,la=Se.ReactCurrentBatchConfig,Jn=0,Ee=null,Me=null,Ue=null,Xs=!1,Ti=!1,Pi=0,Zg=0;function et(){throw Error(r(321))}function aa(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!jt(e[s],n[s]))return!1;return!0}function ua(e,n,s,l,u,d){if(Jn=d,Ee=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,qs.current=e===null||e.memoizedState===null?r_:i_,e=s(l,u),Ti){d=0;do{if(Ti=!1,Pi=0,25<=d)throw Error(r(301));d+=1,Ue=Me=null,n.updateQueue=null,qs.current=s_,e=s(l,u)}while(Ti)}if(qs.current=eo,n=Me!==null&&Me.next!==null,Jn=0,Ue=Me=Ee=null,Xs=!1,n)throw Error(r(300));return e}function ca(){var e=Pi!==0;return Pi=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Ee.memoizedState=Ue=e:Ue=Ue.next=e,Ue}function Dt(){if(Me===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var n=Ue===null?Ee.memoizedState:Ue.next;if(n!==null)Ue=n,Me=e;else{if(e===null)throw Error(r(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Ue===null?Ee.memoizedState=Ue=e:Ue=Ue.next=e}return Ue}function Ri(e,n){return typeof n=="function"?n(e):n}function da(e){var n=Dt(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var l=Me,u=l.baseQueue,d=s.pending;if(d!==null){if(u!==null){var f=u.next;u.next=d.next,d.next=f}l.baseQueue=u=d,s.pending=null}if(u!==null){d=u.next,l=l.baseState;var v=f=null,y=null,I=d;do{var R=I.lane;if((Jn&R)===R)y!==null&&(y=y.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),l=I.hasEagerState?I.eagerState:e(l,I.action);else{var D={lane:R,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};y===null?(v=y=D,f=l):y=y.next=D,Ee.lanes|=R,Zn|=R}I=I.next}while(I!==null&&I!==d);y===null?f=l:y.next=v,jt(l,n.memoizedState)||(dt=!0),n.memoizedState=l,n.baseState=f,n.baseQueue=y,s.lastRenderedState=l}if(e=s.interleaved,e!==null){u=e;do d=u.lane,Ee.lanes|=d,Zn|=d,u=u.next;while(u!==e)}else u===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function ha(e){var n=Dt(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var l=s.dispatch,u=s.pending,d=n.memoizedState;if(u!==null){s.pending=null;var f=u=u.next;do d=e(d,f.action),f=f.next;while(f!==u);jt(d,n.memoizedState)||(dt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),s.lastRenderedState=d}return[d,l]}function zd(){}function Ud(e,n){var s=Ee,l=Dt(),u=n(),d=!jt(l.memoizedState,u);if(d&&(l.memoizedState=u,dt=!0),l=l.queue,fa(Wd.bind(null,s,l,e),[e]),l.getSnapshot!==n||d||Ue!==null&&Ue.memoizedState.tag&1){if(s.flags|=2048,Di(9,Hd.bind(null,s,l,u,n),void 0,null),Be===null)throw Error(r(349));(Jn&30)!==0||Bd(s,n,u)}return u}function Bd(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Ee.updateQueue,n===null?(n={lastEffect:null,stores:null},Ee.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Hd(e,n,s,l){n.value=s,n.getSnapshot=l,Vd(n)&&$d(e)}function Wd(e,n,s){return s(function(){Vd(n)&&$d(e)})}function Vd(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!jt(e,s)}catch{return!0}}function $d(e){var n=sn(e,1);n!==null&&Bt(n,e,1,-1)}function Gd(e){var n=qt();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:e},n.queue=e,e=e.dispatch=n_.bind(null,Ee,e),[n.memoizedState,e]}function Di(e,n,s,l){return e={tag:e,create:n,destroy:s,deps:l,next:null},n=Ee.updateQueue,n===null?(n={lastEffect:null,stores:null},Ee.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,n.lastEffect=e)),e}function Qd(){return Dt().memoizedState}function Js(e,n,s,l){var u=qt();Ee.flags|=e,u.memoizedState=Di(1|n,s,void 0,l===void 0?null:l)}function Zs(e,n,s,l){var u=Dt();l=l===void 0?null:l;var d=void 0;if(Me!==null){var f=Me.memoizedState;if(d=f.destroy,l!==null&&aa(l,f.deps)){u.memoizedState=Di(n,s,d,l);return}}Ee.flags|=e,u.memoizedState=Di(1|n,s,d,l)}function Kd(e,n){return Js(8390656,8,e,n)}function fa(e,n){return Zs(2048,8,e,n)}function Yd(e,n){return Zs(4,2,e,n)}function qd(e,n){return Zs(4,4,e,n)}function Xd(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Jd(e,n,s){return s=s!=null?s.concat([e]):null,Zs(4,4,Xd.bind(null,n,e),s)}function pa(){}function Zd(e,n){var s=Dt();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&aa(n,l[1])?l[0]:(s.memoizedState=[e,n],e)}function eh(e,n){var s=Dt();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&aa(n,l[1])?l[0]:(e=e(),s.memoizedState=[e,n],e)}function th(e,n,s){return(Jn&21)===0?(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=s):(jt(s,n)||(s=Dc(),Ee.lanes|=s,Zn|=s,e.baseState=!0),n)}function e_(e,n){var s=de;de=s!==0&&4>s?s:4,e(!0);var l=la.transition;la.transition={};try{e(!1),n()}finally{de=s,la.transition=l}}function nh(){return Dt().memoizedState}function t_(e,n,s){var l=Dn(e);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},rh(e))ih(n,s);else if(s=Od(e,n,s,l),s!==null){var u=lt();Bt(s,e,l,u),sh(s,n,l)}}function n_(e,n,s){var l=Dn(e),u={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(rh(e))ih(n,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var f=n.lastRenderedState,v=d(f,s);if(u.hasEagerState=!0,u.eagerState=v,jt(v,f)){var y=n.interleaved;y===null?(u.next=u,ta(n)):(u.next=y.next,y.next=u),n.interleaved=u;return}}catch{}s=Od(e,n,u,l),s!==null&&(u=lt(),Bt(s,e,l,u),sh(s,n,l))}}function rh(e){var n=e.alternate;return e===Ee||n!==null&&n===Ee}function ih(e,n){Ti=Xs=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function sh(e,n,s){if((s&4194240)!==0){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,gl(e,s)}}var eo={readContext:Rt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},r_={readContext:Rt,useCallback:function(e,n){return qt().memoizedState=[e,n===void 0?null:n],e},useContext:Rt,useEffect:Kd,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,Js(4194308,4,Xd.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Js(4194308,4,e,n)},useInsertionEffect:function(e,n){return Js(4,2,e,n)},useMemo:function(e,n){var s=qt();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var l=qt();return n=s!==void 0?s(n):n,l.memoizedState=l.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=t_.bind(null,Ee,e),[l.memoizedState,e]},useRef:function(e){var n=qt();return e={current:e},n.memoizedState=e},useState:Gd,useDebugValue:pa,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=Gd(!1),n=e[0];return e=e_.bind(null,e[1]),qt().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var l=Ee,u=qt();if(we){if(s===void 0)throw Error(r(407));s=s()}else{if(s=n(),Be===null)throw Error(r(349));(Jn&30)!==0||Bd(l,n,s)}u.memoizedState=s;var d={value:s,getSnapshot:n};return u.queue=d,Kd(Wd.bind(null,l,d,e),[e]),l.flags|=2048,Di(9,Hd.bind(null,l,d,s,n),void 0,null),s},useId:function(){var e=qt(),n=Be.identifierPrefix;if(we){var s=rn,l=nn;s=(l&~(1<<32-Lt(l)-1)).toString(32)+s,n=":"+n+"R"+s,s=Pi++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=Zg++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},i_={readContext:Rt,useCallback:Zd,useContext:Rt,useEffect:fa,useImperativeHandle:Jd,useInsertionEffect:Yd,useLayoutEffect:qd,useMemo:eh,useReducer:da,useRef:Qd,useState:function(){return da(Ri)},useDebugValue:pa,useDeferredValue:function(e){var n=Dt();return th(n,Me.memoizedState,e)},useTransition:function(){var e=da(Ri)[0],n=Dt().memoizedState;return[e,n]},useMutableSource:zd,useSyncExternalStore:Ud,useId:nh,unstable_isNewReconciler:!1},s_={readContext:Rt,useCallback:Zd,useContext:Rt,useEffect:fa,useImperativeHandle:Jd,useInsertionEffect:Yd,useLayoutEffect:qd,useMemo:eh,useReducer:ha,useRef:Qd,useState:function(){return ha(Ri)},useDebugValue:pa,useDeferredValue:function(e){var n=Dt();return Me===null?n.memoizedState=e:th(n,Me.memoizedState,e)},useTransition:function(){var e=ha(Ri)[0],n=Dt().memoizedState;return[e,n]},useMutableSource:zd,useSyncExternalStore:Ud,useId:nh,unstable_isNewReconciler:!1};function bt(e,n){if(e&&e.defaultProps){n=b({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function ma(e,n,s,l){n=e.memoizedState,s=s(l,n),s=s==null?n:b({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var to={isMounted:function(e){return(e=e._reactInternals)?$n(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var l=lt(),u=Dn(e),d=on(l,u);d.payload=n,s!=null&&(d.callback=s),n=In(e,d,u),n!==null&&(Bt(n,e,u,l),Qs(n,e,u))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var l=lt(),u=Dn(e),d=on(l,u);d.tag=1,d.payload=n,s!=null&&(d.callback=s),n=In(e,d,u),n!==null&&(Bt(n,e,u,l),Qs(n,e,u))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=lt(),l=Dn(e),u=on(s,l);u.tag=2,n!=null&&(u.callback=n),n=In(e,u,l),n!==null&&(Bt(n,e,l,s),Qs(n,e,l))}};function oh(e,n,s,l,u,d,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,f):n.prototype&&n.prototype.isPureReactComponent?!_i(s,l)||!_i(u,d):!0}function lh(e,n,s){var l=!1,u=kn,d=n.contextType;return typeof d=="object"&&d!==null?d=Rt(d):(u=ct(n)?Qn:Ze.current,l=n.contextTypes,d=(l=l!=null)?kr(e,u):kn),n=new n(s,d),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=to,e.stateNode=n,n._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=d),n}function ah(e,n,s,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==e&&to.enqueueReplaceState(n,n.state,null)}function ga(e,n,s,l){var u=e.stateNode;u.props=s,u.state=e.memoizedState,u.refs={},na(e);var d=n.contextType;typeof d=="object"&&d!==null?u.context=Rt(d):(d=ct(n)?Qn:Ze.current,u.context=kr(e,d)),u.state=e.memoizedState,d=n.getDerivedStateFromProps,typeof d=="function"&&(ma(e,n,d,s),u.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(n=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),n!==u.state&&to.enqueueReplaceState(u,u.state,null),Ks(e,s,u,l),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Ar(e,n){try{var s="",l=n;do s+=re(l),l=l.return;while(l);var u=s}catch(d){u=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:n,stack:u,digest:null}}function _a(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function va(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var o_=typeof WeakMap=="function"?WeakMap:Map;function uh(e,n,s){s=on(-1,s),s.tag=3,s.payload={element:null};var l=n.value;return s.callback=function(){ao||(ao=!0,Ma=l),va(e,n)},s}function ch(e,n,s){s=on(-1,s),s.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var u=n.value;s.payload=function(){return l(u)},s.callback=function(){va(e,n)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(s.callback=function(){va(e,n),typeof l!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var f=n.stack;this.componentDidCatch(n.value,{componentStack:f!==null?f:""})}),s}function dh(e,n,s){var l=e.pingCache;if(l===null){l=e.pingCache=new o_;var u=new Set;l.set(n,u)}else u=l.get(n),u===void 0&&(u=new Set,l.set(n,u));u.has(s)||(u.add(s),e=w_.bind(null,e,n,s),n.then(e,e))}function hh(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function fh(e,n,s,l,u){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=on(-1,1),n.tag=2,In(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var l_=Se.ReactCurrentOwner,dt=!1;function ot(e,n,s,l){n.child=e===null?Md(n,null,s,l):Tr(n,e.child,s,l)}function ph(e,n,s,l,u){s=s.render;var d=n.ref;return Rr(n,u),l=ua(e,n,s,l,d,u),s=ca(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,ln(e,n,u)):(we&&s&&Gl(n),n.flags|=1,ot(e,n,l,u),n.child)}function mh(e,n,s,l,u){if(e===null){var d=s.type;return typeof d=="function"&&!Ua(d)&&d.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=d,gh(e,n,d,l,u)):(e=mo(s.type,null,l,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,(e.lanes&u)===0){var f=d.memoizedProps;if(s=s.compare,s=s!==null?s:_i,s(f,l)&&e.ref===n.ref)return ln(e,n,u)}return n.flags|=1,e=Mn(d,l),e.ref=n.ref,e.return=n,n.child=e}function gh(e,n,s,l,u){if(e!==null){var d=e.memoizedProps;if(_i(d,l)&&e.ref===n.ref)if(dt=!1,n.pendingProps=l=d,(e.lanes&u)!==0)(e.flags&131072)!==0&&(dt=!0);else return n.lanes=e.lanes,ln(e,n,u)}return ya(e,n,s,l,u)}function _h(e,n,s){var l=n.pendingProps,u=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(Or,kt),kt|=s;else{if((s&1073741824)===0)return e=d!==null?d.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,pe(Or,kt),kt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=d!==null?d.baseLanes:s,pe(Or,kt),kt|=l}else d!==null?(l=d.baseLanes|s,n.memoizedState=null):l=s,pe(Or,kt),kt|=l;return ot(e,n,u,s),n.child}function vh(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function ya(e,n,s,l,u){var d=ct(s)?Qn:Ze.current;return d=kr(n,d),Rr(n,u),s=ua(e,n,s,l,d,u),l=ca(),e!==null&&!dt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,ln(e,n,u)):(we&&l&&Gl(n),n.flags|=1,ot(e,n,s,u),n.child)}function yh(e,n,s,l,u){if(ct(s)){var d=!0;zs(n)}else d=!1;if(Rr(n,u),n.stateNode===null)ro(e,n),lh(n,s,l),ga(n,s,l,u),l=!0;else if(e===null){var f=n.stateNode,v=n.memoizedProps;f.props=v;var y=f.context,I=s.contextType;typeof I=="object"&&I!==null?I=Rt(I):(I=ct(s)?Qn:Ze.current,I=kr(n,I));var R=s.getDerivedStateFromProps,D=typeof R=="function"||typeof f.getSnapshotBeforeUpdate=="function";D||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==l||y!==I)&&ah(n,f,l,I),xn=!1;var P=n.memoizedState;f.state=P,Ks(n,l,f,u),y=n.memoizedState,v!==l||P!==y||ut.current||xn?(typeof R=="function"&&(ma(n,s,R,l),y=n.memoizedState),(v=xn||oh(n,s,v,l,P,y,I))?(D||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=y),f.props=l,f.state=y,f.context=I,l=v):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,Ld(e,n),v=n.memoizedProps,I=n.type===n.elementType?v:bt(n.type,v),f.props=I,D=n.pendingProps,P=f.context,y=s.contextType,typeof y=="object"&&y!==null?y=Rt(y):(y=ct(s)?Qn:Ze.current,y=kr(n,y));var F=s.getDerivedStateFromProps;(R=typeof F=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==D||P!==y)&&ah(n,f,l,y),xn=!1,P=n.memoizedState,f.state=P,Ks(n,l,f,u);var U=n.memoizedState;v!==D||P!==U||ut.current||xn?(typeof F=="function"&&(ma(n,s,F,l),U=n.memoizedState),(I=xn||oh(n,s,I,l,P,U,y)||!1)?(R||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,U,y),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,U,y)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&P===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&P===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=U),f.props=l,f.state=U,f.context=y,l=I):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&P===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&P===e.memoizedState||(n.flags|=1024),l=!1)}return wa(e,n,s,l,d,u)}function wa(e,n,s,l,u,d){vh(e,n);var f=(n.flags&128)!==0;if(!l&&!f)return u&&kd(n,s,!1),ln(e,n,d);l=n.stateNode,l_.current=n;var v=f&&typeof s.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,e!==null&&f?(n.child=Tr(n,e.child,null,d),n.child=Tr(n,null,v,d)):ot(e,n,v,d),n.memoizedState=l.state,u&&kd(n,s,!0),n.child}function wh(e){var n=e.stateNode;n.pendingContext?Ed(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Ed(e,n.context,!1),ra(e,n.containerInfo)}function Ch(e,n,s,l,u){return Ir(),ql(u),n.flags|=256,ot(e,n,s,l),n.child}var Ca={dehydrated:null,treeContext:null,retryLane:0};function Ea(e){return{baseLanes:e,cachePool:null,transitions:null}}function Eh(e,n,s){var l=n.pendingProps,u=Ce.current,d=!1,f=(n.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(u&2)!==0),v?(d=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),pe(Ce,u&1),e===null)return Yl(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(f=l.children,e=l.fallback,d?(l=n.mode,d=n.child,f={mode:"hidden",children:f},(l&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=f):d=go(f,l,0,null),e=rr(e,l,s,null),d.return=n,e.return=n,d.sibling=e,n.child=d,n.child.memoizedState=Ea(s),n.memoizedState=Ca,e):Sa(n,f));if(u=e.memoizedState,u!==null&&(v=u.dehydrated,v!==null))return a_(e,n,f,l,v,u,s);if(d){d=l.fallback,f=n.mode,u=e.child,v=u.sibling;var y={mode:"hidden",children:l.children};return(f&1)===0&&n.child!==u?(l=n.child,l.childLanes=0,l.pendingProps=y,n.deletions=null):(l=Mn(u,y),l.subtreeFlags=u.subtreeFlags&14680064),v!==null?d=Mn(v,d):(d=rr(d,f,s,null),d.flags|=2),d.return=n,l.return=n,l.sibling=d,n.child=l,l=d,d=n.child,f=e.child.memoizedState,f=f===null?Ea(s):{baseLanes:f.baseLanes|s,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=e.childLanes&~s,n.memoizedState=Ca,l}return d=e.child,e=d.sibling,l=Mn(d,{mode:"visible",children:l.children}),(n.mode&1)===0&&(l.lanes=s),l.return=n,l.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=l,n.memoizedState=null,l}function Sa(e,n){return n=go({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function no(e,n,s,l){return l!==null&&ql(l),Tr(n,e.child,null,s),e=Sa(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function a_(e,n,s,l,u,d,f){if(s)return n.flags&256?(n.flags&=-257,l=_a(Error(r(422))),no(e,n,f,l)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(d=l.fallback,u=n.mode,l=go({mode:"visible",children:l.children},u,0,null),d=rr(d,u,f,null),d.flags|=2,l.return=n,d.return=n,l.sibling=d,n.child=l,(n.mode&1)!==0&&Tr(n,e.child,null,f),n.child.memoizedState=Ea(f),n.memoizedState=Ca,d);if((n.mode&1)===0)return no(e,n,f,null);if(u.data==="$!"){if(l=u.nextSibling&&u.nextSibling.dataset,l)var v=l.dgst;return l=v,d=Error(r(419)),l=_a(d,l,void 0),no(e,n,f,l)}if(v=(f&e.childLanes)!==0,dt||v){if(l=Be,l!==null){switch(f&-f){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(l.suspendedLanes|f))!==0?0:u,u!==0&&u!==d.retryLane&&(d.retryLane=u,sn(e,u),Bt(l,e,u,-1))}return za(),l=_a(Error(r(421))),no(e,n,f,l)}return u.data==="$?"?(n.flags|=128,n.child=e.child,n=C_.bind(null,e),u._reactRetry=n,null):(e=d.treeContext,St=En(u.nextSibling),Et=n,we=!0,Ft=null,e!==null&&(Tt[Pt++]=nn,Tt[Pt++]=rn,Tt[Pt++]=Kn,nn=e.id,rn=e.overflow,Kn=n),n=Sa(n,l.children),n.flags|=4096,n)}function Sh(e,n,s){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),ea(e.return,n,s)}function ka(e,n,s,l,u){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:u}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=s,d.tailMode=u)}function kh(e,n,s){var l=n.pendingProps,u=l.revealOrder,d=l.tail;if(ot(e,n,l.children,s),l=Ce.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sh(e,s,n);else if(e.tag===19)Sh(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(pe(Ce,l),(n.mode&1)===0)n.memoizedState=null;else switch(u){case"forwards":for(s=n.child,u=null;s!==null;)e=s.alternate,e!==null&&Ys(e)===null&&(u=s),s=s.sibling;s=u,s===null?(u=n.child,n.child=null):(u=s.sibling,s.sibling=null),ka(n,!1,u,s,d);break;case"backwards":for(s=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&Ys(e)===null){n.child=u;break}e=u.sibling,u.sibling=s,s=u,u=e}ka(n,!0,s,null,d);break;case"together":ka(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ro(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function ln(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Zn|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,s=Mn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Mn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function u_(e,n,s){switch(n.tag){case 3:wh(n),Ir();break;case 5:bd(n);break;case 1:ct(n.type)&&zs(n);break;case 4:ra(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,u=n.memoizedProps.value;pe($s,l._currentValue),l._currentValue=u;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(pe(Ce,Ce.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?Eh(e,n,s):(pe(Ce,Ce.current&1),e=ln(e,n,s),e!==null?e.sibling:null);pe(Ce,Ce.current&1);break;case 19:if(l=(s&n.childLanes)!==0,(e.flags&128)!==0){if(l)return kh(e,n,s);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),pe(Ce,Ce.current),l)break;return null;case 22:case 23:return n.lanes=0,_h(e,n,s)}return ln(e,n,s)}var Nh,Na,xh,Ih;Nh=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Na=function(){},xh=function(e,n,s,l){var u=e.memoizedProps;if(u!==l){e=n.stateNode,Xn(Yt.current);var d=null;switch(s){case"input":u=Xr(e,u),l=Xr(e,l),d=[];break;case"select":u=b({},u,{value:void 0}),l=b({},l,{value:void 0}),d=[];break;case"textarea":u=Vn(e,u),l=Vn(e,l),d=[];break;default:typeof u.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=js)}sl(s,l);var f;s=null;for(I in u)if(!l.hasOwnProperty(I)&&u.hasOwnProperty(I)&&u[I]!=null)if(I==="style"){var v=u[I];for(f in v)v.hasOwnProperty(f)&&(s||(s={}),s[f]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(a.hasOwnProperty(I)?d||(d=[]):(d=d||[]).push(I,null));for(I in l){var y=l[I];if(v=u?.[I],l.hasOwnProperty(I)&&y!==v&&(y!=null||v!=null))if(I==="style")if(v){for(f in v)!v.hasOwnProperty(f)||y&&y.hasOwnProperty(f)||(s||(s={}),s[f]="");for(f in y)y.hasOwnProperty(f)&&v[f]!==y[f]&&(s||(s={}),s[f]=y[f])}else s||(d||(d=[]),d.push(I,s)),s=y;else I==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,v=v?v.__html:void 0,y!=null&&v!==y&&(d=d||[]).push(I,y)):I==="children"?typeof y!="string"&&typeof y!="number"||(d=d||[]).push(I,""+y):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(a.hasOwnProperty(I)?(y!=null&&I==="onScroll"&&_e("scroll",e),d||v===y||(d=[])):(d=d||[]).push(I,y))}s&&(d=d||[]).push("style",s);var I=d;(n.updateQueue=I)&&(n.flags|=4)}},Ih=function(e,n,s,l){s!==l&&(n.flags|=4)};function Ai(e,n){if(!we)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function tt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(n)for(var u=e.child;u!==null;)s|=u.lanes|u.childLanes,l|=u.subtreeFlags&14680064,l|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)s|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=s,n}function c_(e,n,s){var l=n.pendingProps;switch(Ql(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(n),null;case 1:return ct(n.type)&&bs(),tt(n),null;case 3:return l=n.stateNode,Dr(),ve(ut),ve(Ze),oa(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Ws(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ft!==null&&(ja(Ft),Ft=null))),Na(e,n),tt(n),null;case 5:ia(n);var u=Xn(Ii.current);if(s=n.type,e!==null&&n.stateNode!=null)xh(e,n,s,l,u),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(r(166));return tt(n),null}if(e=Xn(Yt.current),Ws(n)){l=n.stateNode,s=n.type;var d=n.memoizedProps;switch(l[Kt]=n,l[Ei]=d,e=(n.mode&1)!==0,s){case"dialog":_e("cancel",l),_e("close",l);break;case"iframe":case"object":case"embed":_e("load",l);break;case"video":case"audio":for(u=0;u<yi.length;u++)_e(yi[u],l);break;case"source":_e("error",l);break;case"img":case"image":case"link":_e("error",l),_e("load",l);break;case"details":_e("toggle",l);break;case"input":Jr(l,d),_e("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!d.multiple},_e("invalid",l);break;case"textarea":hr(l,d),_e("invalid",l)}sl(s,d),u=null;for(var f in d)if(d.hasOwnProperty(f)){var v=d[f];f==="children"?typeof v=="string"?l.textContent!==v&&(d.suppressHydrationWarning!==!0&&Ls(l.textContent,v,e),u=["children",v]):typeof v=="number"&&l.textContent!==""+v&&(d.suppressHydrationWarning!==!0&&Ls(l.textContent,v,e),u=["children",""+v]):a.hasOwnProperty(f)&&v!=null&&f==="onScroll"&&_e("scroll",l)}switch(s){case"input":ze(l),xe(l,d,!0);break;case"textarea":ze(l),hc(l);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(l.onclick=js)}l=u,n.updateQueue=l,l!==null&&(n.flags|=4)}else{f=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fc(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=f.createElement(s,{is:l.is}):(e=f.createElement(s),s==="select"&&(f=e,l.multiple?f.multiple=!0:l.size&&(f.size=l.size))):e=f.createElementNS(e,s),e[Kt]=n,e[Ei]=l,Nh(e,n,!1,!1),n.stateNode=e;e:{switch(f=ol(s,l),s){case"dialog":_e("cancel",e),_e("close",e),u=l;break;case"iframe":case"object":case"embed":_e("load",e),u=l;break;case"video":case"audio":for(u=0;u<yi.length;u++)_e(yi[u],e);u=l;break;case"source":_e("error",e),u=l;break;case"img":case"image":case"link":_e("error",e),_e("load",e),u=l;break;case"details":_e("toggle",e),u=l;break;case"input":Jr(e,l),u=Xr(e,l),_e("invalid",e);break;case"option":u=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},u=b({},l,{value:void 0}),_e("invalid",e);break;case"textarea":hr(e,l),u=Vn(e,l),_e("invalid",e);break;default:u=l}sl(s,u),v=u;for(d in v)if(v.hasOwnProperty(d)){var y=v[d];d==="style"?gc(e,y):d==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&pc(e,y)):d==="children"?typeof y=="string"?(s!=="textarea"||y!=="")&&ei(e,y):typeof y=="number"&&ei(e,""+y):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(a.hasOwnProperty(d)?y!=null&&d==="onScroll"&&_e("scroll",e):y!=null&&Ae(e,d,y,f))}switch(s){case"input":ze(e),xe(e,l,!1);break;case"textarea":ze(e),hc(e);break;case"option":l.value!=null&&e.setAttribute("value",""+se(l.value));break;case"select":e.multiple=!!l.multiple,d=l.value,d!=null?mn(e,!!l.multiple,d,!1):l.defaultValue!=null&&mn(e,!!l.multiple,l.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=js)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return tt(n),null;case 6:if(e&&n.stateNode!=null)Ih(e,n,e.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(s=Xn(Ii.current),Xn(Yt.current),Ws(n)){if(l=n.stateNode,s=n.memoizedProps,l[Kt]=n,(d=l.nodeValue!==s)&&(e=Et,e!==null))switch(e.tag){case 3:Ls(l.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ls(l.nodeValue,s,(e.mode&1)!==0)}d&&(n.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[Kt]=n,n.stateNode=l}return tt(n),null;case 13:if(ve(Ce),l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(we&&St!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Rd(),Ir(),n.flags|=98560,d=!1;else if(d=Ws(n),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Kt]=n}else Ir(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;tt(n),d=!1}else Ft!==null&&(ja(Ft),Ft=null),d=!0;if(!d)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Ce.current&1)!==0?Oe===0&&(Oe=3):za())),n.updateQueue!==null&&(n.flags|=4),tt(n),null);case 4:return Dr(),Na(e,n),e===null&&wi(n.stateNode.containerInfo),tt(n),null;case 10:return Zl(n.type._context),tt(n),null;case 17:return ct(n.type)&&bs(),tt(n),null;case 19:if(ve(Ce),d=n.memoizedState,d===null)return tt(n),null;if(l=(n.flags&128)!==0,f=d.rendering,f===null)if(l)Ai(d,!1);else{if(Oe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=Ys(e),f!==null){for(n.flags|=128,Ai(d,!1),l=f.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=s,s=n.child;s!==null;)d=s,e=l,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,e=f.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return pe(Ce,Ce.current&1|2),n.child}e=e.sibling}d.tail!==null&&Ie()>Lr&&(n.flags|=128,l=!0,Ai(d,!1),n.lanes=4194304)}else{if(!l)if(e=Ys(f),e!==null){if(n.flags|=128,l=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Ai(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!we)return tt(n),null}else 2*Ie()-d.renderingStartTime>Lr&&s!==1073741824&&(n.flags|=128,l=!0,Ai(d,!1),n.lanes=4194304);d.isBackwards?(f.sibling=n.child,n.child=f):(s=d.last,s!==null?s.sibling=f:n.child=f,d.last=f)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=Ie(),n.sibling=null,s=Ce.current,pe(Ce,l?s&1|2:s&1),n):(tt(n),null);case 22:case 23:return ba(),l=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(n.flags|=8192),l&&(n.mode&1)!==0?(kt&1073741824)!==0&&(tt(n),n.subtreeFlags&6&&(n.flags|=8192)):tt(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function d_(e,n){switch(Ql(n),n.tag){case 1:return ct(n.type)&&bs(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Dr(),ve(ut),ve(Ze),oa(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return ia(n),null;case 13:if(ve(Ce),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Ir()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ve(Ce),null;case 4:return Dr(),null;case 10:return Zl(n.type._context),null;case 22:case 23:return ba(),null;case 24:return null;default:return null}}var io=!1,nt=!1,h_=typeof WeakSet=="function"?WeakSet:Set,z=null;function Mr(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){ke(e,n,l)}else s.current=null}function xa(e,n,s){try{s()}catch(l){ke(e,n,l)}}var Th=!1;function f_(e,n){if(bl=ks,e=od(),Rl(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var u=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var f=0,v=-1,y=-1,I=0,R=0,D=e,P=null;t:for(;;){for(var F;D!==s||u!==0&&D.nodeType!==3||(v=f+u),D!==d||l!==0&&D.nodeType!==3||(y=f+l),D.nodeType===3&&(f+=D.nodeValue.length),(F=D.firstChild)!==null;)P=D,D=F;for(;;){if(D===e)break t;if(P===s&&++I===u&&(v=f),P===d&&++R===l&&(y=f),(F=D.nextSibling)!==null)break;D=P,P=D.parentNode}D=F}s=v===-1||y===-1?null:{start:v,end:y}}else s=null}s=s||{start:0,end:0}}else s=null;for(zl={focusedElem:e,selectionRange:s},ks=!1,z=n;z!==null;)if(n=z,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,z=e;else for(;z!==null;){n=z;try{var U=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var B=U.memoizedProps,Te=U.memoizedState,k=n.stateNode,w=k.getSnapshotBeforeUpdate(n.elementType===n.type?B:bt(n.type,B),Te);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=n.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(A){ke(n,n.return,A)}if(e=n.sibling,e!==null){e.return=n.return,z=e;break}z=n.return}return U=Th,Th=!1,U}function Mi(e,n,s){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&e)===e){var d=u.destroy;u.destroy=void 0,d!==void 0&&xa(n,s,d)}u=u.next}while(u!==l)}}function so(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var l=s.create;s.destroy=l()}s=s.next}while(s!==n)}}function Ia(e){var n=e.ref;if(n!==null){var s=e.stateNode;e.tag,e=s,typeof n=="function"?n(e):n.current=e}}function Ph(e){var n=e.alternate;n!==null&&(e.alternate=null,Ph(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Kt],delete n[Ei],delete n[Wl],delete n[Yg],delete n[qg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rh(e){return e.tag===5||e.tag===3||e.tag===4}function Dh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ta(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=js));else if(l!==4&&(e=e.child,e!==null))for(Ta(e,n,s),e=e.sibling;e!==null;)Ta(e,n,s),e=e.sibling}function Pa(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Pa(e,n,s),e=e.sibling;e!==null;)Pa(e,n,s),e=e.sibling}var Ye=null,zt=!1;function Tn(e,n,s){for(s=s.child;s!==null;)Ah(e,n,s),s=s.sibling}function Ah(e,n,s){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(vs,s)}catch{}switch(s.tag){case 5:nt||Mr(s,n);case 6:var l=Ye,u=zt;Ye=null,Tn(e,n,s),Ye=l,zt=u,Ye!==null&&(zt?(e=Ye,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Ye.removeChild(s.stateNode));break;case 18:Ye!==null&&(zt?(e=Ye,s=s.stateNode,e.nodeType===8?Hl(e.parentNode,s):e.nodeType===1&&Hl(e,s),di(e)):Hl(Ye,s.stateNode));break;case 4:l=Ye,u=zt,Ye=s.stateNode.containerInfo,zt=!0,Tn(e,n,s),Ye=l,zt=u;break;case 0:case 11:case 14:case 15:if(!nt&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){u=l=l.next;do{var d=u,f=d.destroy;d=d.tag,f!==void 0&&((d&2)!==0||(d&4)!==0)&&xa(s,n,f),u=u.next}while(u!==l)}Tn(e,n,s);break;case 1:if(!nt&&(Mr(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(v){ke(s,n,v)}Tn(e,n,s);break;case 21:Tn(e,n,s);break;case 22:s.mode&1?(nt=(l=nt)||s.memoizedState!==null,Tn(e,n,s),nt=l):Tn(e,n,s);break;default:Tn(e,n,s)}}function Mh(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new h_),n.forEach(function(l){var u=E_.bind(null,e,l);s.has(l)||(s.add(l),l.then(u,u))})}}function Ut(e,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];try{var d=e,f=n,v=f;e:for(;v!==null;){switch(v.tag){case 5:Ye=v.stateNode,zt=!1;break e;case 3:Ye=v.stateNode.containerInfo,zt=!0;break e;case 4:Ye=v.stateNode.containerInfo,zt=!0;break e}v=v.return}if(Ye===null)throw Error(r(160));Ah(d,f,u),Ye=null,zt=!1;var y=u.alternate;y!==null&&(y.return=null),u.return=null}catch(I){ke(u,n,I)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Oh(n,e),n=n.sibling}function Oh(e,n){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ut(n,e),Xt(e),l&4){try{Mi(3,e,e.return),so(3,e)}catch(B){ke(e,e.return,B)}try{Mi(5,e,e.return)}catch(B){ke(e,e.return,B)}}break;case 1:Ut(n,e),Xt(e),l&512&&s!==null&&Mr(s,s.return);break;case 5:if(Ut(n,e),Xt(e),l&512&&s!==null&&Mr(s,s.return),e.flags&32){var u=e.stateNode;try{ei(u,"")}catch(B){ke(e,e.return,B)}}if(l&4&&(u=e.stateNode,u!=null)){var d=e.memoizedProps,f=s!==null?s.memoizedProps:d,v=e.type,y=e.updateQueue;if(e.updateQueue=null,y!==null)try{v==="input"&&d.type==="radio"&&d.name!=null&&fs(u,d),ol(v,f);var I=ol(v,d);for(f=0;f<y.length;f+=2){var R=y[f],D=y[f+1];R==="style"?gc(u,D):R==="dangerouslySetInnerHTML"?pc(u,D):R==="children"?ei(u,D):Ae(u,R,D,I)}switch(v){case"input":Zr(u,d);break;case"textarea":dc(u,d);break;case"select":var P=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!d.multiple;var F=d.value;F!=null?mn(u,!!d.multiple,F,!1):P!==!!d.multiple&&(d.defaultValue!=null?mn(u,!!d.multiple,d.defaultValue,!0):mn(u,!!d.multiple,d.multiple?[]:"",!1))}u[Ei]=d}catch(B){ke(e,e.return,B)}}break;case 6:if(Ut(n,e),Xt(e),l&4){if(e.stateNode===null)throw Error(r(162));u=e.stateNode,d=e.memoizedProps;try{u.nodeValue=d}catch(B){ke(e,e.return,B)}}break;case 3:if(Ut(n,e),Xt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{di(n.containerInfo)}catch(B){ke(e,e.return,B)}break;case 4:Ut(n,e),Xt(e);break;case 13:Ut(n,e),Xt(e),u=e.child,u.flags&8192&&(d=u.memoizedState!==null,u.stateNode.isHidden=d,!d||u.alternate!==null&&u.alternate.memoizedState!==null||(Aa=Ie())),l&4&&Mh(e);break;case 22:if(R=s!==null&&s.memoizedState!==null,e.mode&1?(nt=(I=nt)||R,Ut(n,e),nt=I):Ut(n,e),Xt(e),l&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!R&&(e.mode&1)!==0)for(z=e,R=e.child;R!==null;){for(D=z=R;z!==null;){switch(P=z,F=P.child,P.tag){case 0:case 11:case 14:case 15:Mi(4,P,P.return);break;case 1:Mr(P,P.return);var U=P.stateNode;if(typeof U.componentWillUnmount=="function"){l=P,s=P.return;try{n=l,U.props=n.memoizedProps,U.state=n.memoizedState,U.componentWillUnmount()}catch(B){ke(l,s,B)}}break;case 5:Mr(P,P.return);break;case 22:if(P.memoizedState!==null){Fh(D);continue}}F!==null?(F.return=P,z=F):Fh(D)}R=R.sibling}e:for(R=null,D=e;;){if(D.tag===5){if(R===null){R=D;try{u=D.stateNode,I?(d=u.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(v=D.stateNode,y=D.memoizedProps.style,f=y!=null&&y.hasOwnProperty("display")?y.display:null,v.style.display=mc("display",f))}catch(B){ke(e,e.return,B)}}}else if(D.tag===6){if(R===null)try{D.stateNode.nodeValue=I?"":D.memoizedProps}catch(B){ke(e,e.return,B)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===e)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===e)break e;for(;D.sibling===null;){if(D.return===null||D.return===e)break e;R===D&&(R=null),D=D.return}R===D&&(R=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:Ut(n,e),Xt(e),l&4&&Mh(e);break;case 21:break;default:Ut(n,e),Xt(e)}}function Xt(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Rh(s)){var l=s;break e}s=s.return}throw Error(r(160))}switch(l.tag){case 5:var u=l.stateNode;l.flags&32&&(ei(u,""),l.flags&=-33);var d=Dh(e);Pa(e,d,u);break;case 3:case 4:var f=l.stateNode.containerInfo,v=Dh(e);Ta(e,v,f);break;default:throw Error(r(161))}}catch(y){ke(e,e.return,y)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function p_(e,n,s){z=e,Lh(e)}function Lh(e,n,s){for(var l=(e.mode&1)!==0;z!==null;){var u=z,d=u.child;if(u.tag===22&&l){var f=u.memoizedState!==null||io;if(!f){var v=u.alternate,y=v!==null&&v.memoizedState!==null||nt;v=io;var I=nt;if(io=f,(nt=y)&&!I)for(z=u;z!==null;)f=z,y=f.child,f.tag===22&&f.memoizedState!==null?bh(u):y!==null?(y.return=f,z=y):bh(u);for(;d!==null;)z=d,Lh(d),d=d.sibling;z=u,io=v,nt=I}jh(e)}else(u.subtreeFlags&8772)!==0&&d!==null?(d.return=u,z=d):jh(e)}}function jh(e){for(;z!==null;){var n=z;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:nt||so(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!nt)if(s===null)l.componentDidMount();else{var u=n.elementType===n.type?s.memoizedProps:bt(n.type,s.memoizedProps);l.componentDidUpdate(u,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var d=n.updateQueue;d!==null&&Fd(n,d,l);break;case 3:var f=n.updateQueue;if(f!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Fd(n,f,s)}break;case 5:var v=n.stateNode;if(s===null&&n.flags&4){s=v;var y=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&s.focus();break;case"img":y.src&&(s.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var I=n.alternate;if(I!==null){var R=I.memoizedState;if(R!==null){var D=R.dehydrated;D!==null&&di(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}nt||n.flags&512&&Ia(n)}catch(P){ke(n,n.return,P)}}if(n===e){z=null;break}if(s=n.sibling,s!==null){s.return=n.return,z=s;break}z=n.return}}function Fh(e){for(;z!==null;){var n=z;if(n===e){z=null;break}var s=n.sibling;if(s!==null){s.return=n.return,z=s;break}z=n.return}}function bh(e){for(;z!==null;){var n=z;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{so(4,n)}catch(y){ke(n,s,y)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var u=n.return;try{l.componentDidMount()}catch(y){ke(n,u,y)}}var d=n.return;try{Ia(n)}catch(y){ke(n,d,y)}break;case 5:var f=n.return;try{Ia(n)}catch(y){ke(n,f,y)}}}catch(y){ke(n,n.return,y)}if(n===e){z=null;break}var v=n.sibling;if(v!==null){v.return=n.return,z=v;break}z=n.return}}var m_=Math.ceil,oo=Se.ReactCurrentDispatcher,Ra=Se.ReactCurrentOwner,At=Se.ReactCurrentBatchConfig,oe=0,Be=null,Re=null,qe=0,kt=0,Or=Sn(0),Oe=0,Oi=null,Zn=0,lo=0,Da=0,Li=null,ht=null,Aa=0,Lr=1/0,an=null,ao=!1,Ma=null,Pn=null,uo=!1,Rn=null,co=0,ji=0,Oa=null,ho=-1,fo=0;function lt(){return(oe&6)!==0?Ie():ho!==-1?ho:ho=Ie()}function Dn(e){return(e.mode&1)===0?1:(oe&2)!==0&&qe!==0?qe&-qe:Jg.transition!==null?(fo===0&&(fo=Dc()),fo):(e=de,e!==0||(e=window.event,e=e===void 0?16:Uc(e.type)),e)}function Bt(e,n,s,l){if(50<ji)throw ji=0,Oa=null,Error(r(185));oi(e,s,l),((oe&2)===0||e!==Be)&&(e===Be&&((oe&2)===0&&(lo|=s),Oe===4&&An(e,qe)),ft(e,l),s===1&&oe===0&&(n.mode&1)===0&&(Lr=Ie()+500,Us&&Nn()))}function ft(e,n){var s=e.callbackNode;Jm(e,n);var l=Cs(e,e===Be?qe:0);if(l===0)s!==null&&Tc(s),e.callbackNode=null,e.callbackPriority=0;else if(n=l&-l,e.callbackPriority!==n){if(s!=null&&Tc(s),n===1)e.tag===0?Xg(Uh.bind(null,e)):Nd(Uh.bind(null,e)),Qg(function(){(oe&6)===0&&Nn()}),s=null;else{switch(Ac(l)){case 1:s=fl;break;case 4:s=Pc;break;case 16:s=_s;break;case 536870912:s=Rc;break;default:s=_s}s=Kh(s,zh.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function zh(e,n){if(ho=-1,fo=0,(oe&6)!==0)throw Error(r(327));var s=e.callbackNode;if(jr()&&e.callbackNode!==s)return null;var l=Cs(e,e===Be?qe:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||n)n=po(e,l);else{n=l;var u=oe;oe|=2;var d=Hh();(Be!==e||qe!==n)&&(an=null,Lr=Ie()+500,tr(e,n));do try{v_();break}catch(v){Bh(e,v)}while(!0);Jl(),oo.current=d,oe=u,Re!==null?n=0:(Be=null,qe=0,n=Oe)}if(n!==0){if(n===2&&(u=pl(e),u!==0&&(l=u,n=La(e,u))),n===1)throw s=Oi,tr(e,0),An(e,l),ft(e,Ie()),s;if(n===6)An(e,l);else{if(u=e.current.alternate,(l&30)===0&&!g_(u)&&(n=po(e,l),n===2&&(d=pl(e),d!==0&&(l=d,n=La(e,d))),n===1))throw s=Oi,tr(e,0),An(e,l),ft(e,Ie()),s;switch(e.finishedWork=u,e.finishedLanes=l,n){case 0:case 1:throw Error(r(345));case 2:nr(e,ht,an);break;case 3:if(An(e,l),(l&130023424)===l&&(n=Aa+500-Ie(),10<n)){if(Cs(e,0)!==0)break;if(u=e.suspendedLanes,(u&l)!==l){lt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=Bl(nr.bind(null,e,ht,an),n);break}nr(e,ht,an);break;case 4:if(An(e,l),(l&4194240)===l)break;for(n=e.eventTimes,u=-1;0<l;){var f=31-Lt(l);d=1<<f,f=n[f],f>u&&(u=f),l&=~d}if(l=u,l=Ie()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*m_(l/1960))-l,10<l){e.timeoutHandle=Bl(nr.bind(null,e,ht,an),l);break}nr(e,ht,an);break;case 5:nr(e,ht,an);break;default:throw Error(r(329))}}}return ft(e,Ie()),e.callbackNode===s?zh.bind(null,e):null}function La(e,n){var s=Li;return e.current.memoizedState.isDehydrated&&(tr(e,n).flags|=256),e=po(e,n),e!==2&&(n=ht,ht=s,n!==null&&ja(n)),e}function ja(e){ht===null?ht=e:ht.push.apply(ht,e)}function g_(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var u=s[l],d=u.getSnapshot;u=u.value;try{if(!jt(d(),u))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function An(e,n){for(n&=~Da,n&=~lo,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-Lt(n),l=1<<s;e[s]=-1,n&=~l}}function Uh(e){if((oe&6)!==0)throw Error(r(327));jr();var n=Cs(e,0);if((n&1)===0)return ft(e,Ie()),null;var s=po(e,n);if(e.tag!==0&&s===2){var l=pl(e);l!==0&&(n=l,s=La(e,l))}if(s===1)throw s=Oi,tr(e,0),An(e,n),ft(e,Ie()),s;if(s===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,nr(e,ht,an),ft(e,Ie()),null}function Fa(e,n){var s=oe;oe|=1;try{return e(n)}finally{oe=s,oe===0&&(Lr=Ie()+500,Us&&Nn())}}function er(e){Rn!==null&&Rn.tag===0&&(oe&6)===0&&jr();var n=oe;oe|=1;var s=At.transition,l=de;try{if(At.transition=null,de=1,e)return e()}finally{de=l,At.transition=s,oe=n,(oe&6)===0&&Nn()}}function ba(){kt=Or.current,ve(Or)}function tr(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Gg(s)),Re!==null)for(s=Re.return;s!==null;){var l=s;switch(Ql(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&bs();break;case 3:Dr(),ve(ut),ve(Ze),oa();break;case 5:ia(l);break;case 4:Dr();break;case 13:ve(Ce);break;case 19:ve(Ce);break;case 10:Zl(l.type._context);break;case 22:case 23:ba()}s=s.return}if(Be=e,Re=e=Mn(e.current,null),qe=kt=n,Oe=0,Oi=null,Da=lo=Zn=0,ht=Li=null,qn!==null){for(n=0;n<qn.length;n++)if(s=qn[n],l=s.interleaved,l!==null){s.interleaved=null;var u=l.next,d=s.pending;if(d!==null){var f=d.next;d.next=u,l.next=f}s.pending=l}qn=null}return e}function Bh(e,n){do{var s=Re;try{if(Jl(),qs.current=eo,Xs){for(var l=Ee.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Xs=!1}if(Jn=0,Ue=Me=Ee=null,Ti=!1,Pi=0,Ra.current=null,s===null||s.return===null){Oe=1,Oi=n,Re=null;break}e:{var d=e,f=s.return,v=s,y=n;if(n=qe,v.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var I=y,R=v,D=R.tag;if((R.mode&1)===0&&(D===0||D===11||D===15)){var P=R.alternate;P?(R.updateQueue=P.updateQueue,R.memoizedState=P.memoizedState,R.lanes=P.lanes):(R.updateQueue=null,R.memoizedState=null)}var F=hh(f);if(F!==null){F.flags&=-257,fh(F,f,v,d,n),F.mode&1&&dh(d,I,n),n=F,y=I;var U=n.updateQueue;if(U===null){var B=new Set;B.add(y),n.updateQueue=B}else U.add(y);break e}else{if((n&1)===0){dh(d,I,n),za();break e}y=Error(r(426))}}else if(we&&v.mode&1){var Te=hh(f);if(Te!==null){(Te.flags&65536)===0&&(Te.flags|=256),fh(Te,f,v,d,n),ql(Ar(y,v));break e}}d=y=Ar(y,v),Oe!==4&&(Oe=2),Li===null?Li=[d]:Li.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,n&=-n,d.lanes|=n;var k=uh(d,y,n);jd(d,k);break e;case 1:v=y;var w=d.type,N=d.stateNode;if((d.flags&128)===0&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Pn===null||!Pn.has(N)))){d.flags|=65536,n&=-n,d.lanes|=n;var A=ch(d,v,n);jd(d,A);break e}}d=d.return}while(d!==null)}Vh(s)}catch(H){n=H,Re===s&&s!==null&&(Re=s=s.return);continue}break}while(!0)}function Hh(){var e=oo.current;return oo.current=eo,e===null?eo:e}function za(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Be===null||(Zn&268435455)===0&&(lo&268435455)===0||An(Be,qe)}function po(e,n){var s=oe;oe|=2;var l=Hh();(Be!==e||qe!==n)&&(an=null,tr(e,n));do try{__();break}catch(u){Bh(e,u)}while(!0);if(Jl(),oe=s,oo.current=l,Re!==null)throw Error(r(261));return Be=null,qe=0,Oe}function __(){for(;Re!==null;)Wh(Re)}function v_(){for(;Re!==null&&!Wm();)Wh(Re)}function Wh(e){var n=Qh(e.alternate,e,kt);e.memoizedProps=e.pendingProps,n===null?Vh(e):Re=n,Ra.current=null}function Vh(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=c_(s,n,kt),s!==null){Re=s;return}}else{if(s=d_(s,n),s!==null){s.flags&=32767,Re=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Re=null;return}}if(n=n.sibling,n!==null){Re=n;return}Re=n=e}while(n!==null);Oe===0&&(Oe=5)}function nr(e,n,s){var l=de,u=At.transition;try{At.transition=null,de=1,y_(e,n,s,l)}finally{At.transition=u,de=l}return null}function y_(e,n,s,l){do jr();while(Rn!==null);if((oe&6)!==0)throw Error(r(327));s=e.finishedWork;var u=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var d=s.lanes|s.childLanes;if(Zm(e,d),e===Be&&(Re=Be=null,qe=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||uo||(uo=!0,Kh(_s,function(){return jr(),null})),d=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||d){d=At.transition,At.transition=null;var f=de;de=1;var v=oe;oe|=4,Ra.current=null,f_(e,s),Oh(s,e),zg(zl),ks=!!bl,zl=bl=null,e.current=s,p_(s),Vm(),oe=v,de=f,At.transition=d}else e.current=s;if(uo&&(uo=!1,Rn=e,co=u),d=e.pendingLanes,d===0&&(Pn=null),Qm(s.stateNode),ft(e,Ie()),n!==null)for(l=e.onRecoverableError,s=0;s<n.length;s++)u=n[s],l(u.value,{componentStack:u.stack,digest:u.digest});if(ao)throw ao=!1,e=Ma,Ma=null,e;return(co&1)!==0&&e.tag!==0&&jr(),d=e.pendingLanes,(d&1)!==0?e===Oa?ji++:(ji=0,Oa=e):ji=0,Nn(),null}function jr(){if(Rn!==null){var e=Ac(co),n=At.transition,s=de;try{if(At.transition=null,de=16>e?16:e,Rn===null)var l=!1;else{if(e=Rn,Rn=null,co=0,(oe&6)!==0)throw Error(r(331));var u=oe;for(oe|=4,z=e.current;z!==null;){var d=z,f=d.child;if((z.flags&16)!==0){var v=d.deletions;if(v!==null){for(var y=0;y<v.length;y++){var I=v[y];for(z=I;z!==null;){var R=z;switch(R.tag){case 0:case 11:case 15:Mi(8,R,d)}var D=R.child;if(D!==null)D.return=R,z=D;else for(;z!==null;){R=z;var P=R.sibling,F=R.return;if(Ph(R),R===I){z=null;break}if(P!==null){P.return=F,z=P;break}z=F}}}var U=d.alternate;if(U!==null){var B=U.child;if(B!==null){U.child=null;do{var Te=B.sibling;B.sibling=null,B=Te}while(B!==null)}}z=d}}if((d.subtreeFlags&2064)!==0&&f!==null)f.return=d,z=f;else e:for(;z!==null;){if(d=z,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:Mi(9,d,d.return)}var k=d.sibling;if(k!==null){k.return=d.return,z=k;break e}z=d.return}}var w=e.current;for(z=w;z!==null;){f=z;var N=f.child;if((f.subtreeFlags&2064)!==0&&N!==null)N.return=f,z=N;else e:for(f=w;z!==null;){if(v=z,(v.flags&2048)!==0)try{switch(v.tag){case 0:case 11:case 15:so(9,v)}}catch(H){ke(v,v.return,H)}if(v===f){z=null;break e}var A=v.sibling;if(A!==null){A.return=v.return,z=A;break e}z=v.return}}if(oe=u,Nn(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(vs,e)}catch{}l=!0}return l}finally{de=s,At.transition=n}}return!1}function $h(e,n,s){n=Ar(s,n),n=uh(e,n,1),e=In(e,n,1),n=lt(),e!==null&&(oi(e,1,n),ft(e,n))}function ke(e,n,s){if(e.tag===3)$h(e,e,s);else for(;n!==null;){if(n.tag===3){$h(n,e,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Pn===null||!Pn.has(l))){e=Ar(s,e),e=ch(n,e,1),n=In(n,e,1),e=lt(),n!==null&&(oi(n,1,e),ft(n,e));break}}n=n.return}}function w_(e,n,s){var l=e.pingCache;l!==null&&l.delete(n),n=lt(),e.pingedLanes|=e.suspendedLanes&s,Be===e&&(qe&s)===s&&(Oe===4||Oe===3&&(qe&130023424)===qe&&500>Ie()-Aa?tr(e,0):Da|=s),ft(e,n)}function Gh(e,n){n===0&&((e.mode&1)===0?n=1:(n=ws,ws<<=1,(ws&130023424)===0&&(ws=4194304)));var s=lt();e=sn(e,n),e!==null&&(oi(e,n,s),ft(e,s))}function C_(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Gh(e,s)}function E_(e,n){var s=0;switch(e.tag){case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(s=u.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(r(314))}l!==null&&l.delete(n),Gh(e,s)}var Qh;Qh=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||ut.current)dt=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return dt=!1,u_(e,n,s);dt=(e.flags&131072)!==0}else dt=!1,we&&(n.flags&1048576)!==0&&xd(n,Hs,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;ro(e,n),e=n.pendingProps;var u=kr(n,Ze.current);Rr(n,s),u=ua(null,n,l,e,u,s);var d=ca();return n.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ct(l)?(d=!0,zs(n)):d=!1,n.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,na(n),u.updater=to,n.stateNode=u,u._reactInternals=n,ga(n,l,e,s),n=wa(null,n,l,!0,d,s)):(n.tag=0,we&&d&&Gl(n),ot(null,n,u,s),n=n.child),n;case 16:l=n.elementType;e:{switch(ro(e,n),e=n.pendingProps,u=l._init,l=u(l._payload),n.type=l,u=n.tag=k_(l),e=bt(l,e),u){case 0:n=ya(null,n,l,e,s);break e;case 1:n=yh(null,n,l,e,s);break e;case 11:n=ph(null,n,l,e,s);break e;case 14:n=mh(null,n,l,bt(l.type,e),s);break e}throw Error(r(306,l,""))}return n;case 0:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:bt(l,u),ya(e,n,l,u,s);case 1:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:bt(l,u),yh(e,n,l,u,s);case 3:e:{if(wh(n),e===null)throw Error(r(387));l=n.pendingProps,d=n.memoizedState,u=d.element,Ld(e,n),Ks(n,l,null,s);var f=n.memoizedState;if(l=f.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){u=Ar(Error(r(423)),n),n=Ch(e,n,l,s,u);break e}else if(l!==u){u=Ar(Error(r(424)),n),n=Ch(e,n,l,s,u);break e}else for(St=En(n.stateNode.containerInfo.firstChild),Et=n,we=!0,Ft=null,s=Md(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ir(),l===u){n=ln(e,n,s);break e}ot(e,n,l,s)}n=n.child}return n;case 5:return bd(n),e===null&&Yl(n),l=n.type,u=n.pendingProps,d=e!==null?e.memoizedProps:null,f=u.children,Ul(l,u)?f=null:d!==null&&Ul(l,d)&&(n.flags|=32),vh(e,n),ot(e,n,f,s),n.child;case 6:return e===null&&Yl(n),null;case 13:return Eh(e,n,s);case 4:return ra(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Tr(n,null,l,s):ot(e,n,l,s),n.child;case 11:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:bt(l,u),ph(e,n,l,u,s);case 7:return ot(e,n,n.pendingProps,s),n.child;case 8:return ot(e,n,n.pendingProps.children,s),n.child;case 12:return ot(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(l=n.type._context,u=n.pendingProps,d=n.memoizedProps,f=u.value,pe($s,l._currentValue),l._currentValue=f,d!==null)if(jt(d.value,f)){if(d.children===u.children&&!ut.current){n=ln(e,n,s);break e}}else for(d=n.child,d!==null&&(d.return=n);d!==null;){var v=d.dependencies;if(v!==null){f=d.child;for(var y=v.firstContext;y!==null;){if(y.context===l){if(d.tag===1){y=on(-1,s&-s),y.tag=2;var I=d.updateQueue;if(I!==null){I=I.shared;var R=I.pending;R===null?y.next=y:(y.next=R.next,R.next=y),I.pending=y}}d.lanes|=s,y=d.alternate,y!==null&&(y.lanes|=s),ea(d.return,s,n),v.lanes|=s;break}y=y.next}}else if(d.tag===10)f=d.type===n.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(r(341));f.lanes|=s,v=f.alternate,v!==null&&(v.lanes|=s),ea(f,s,n),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===n){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}ot(e,n,u.children,s),n=n.child}return n;case 9:return u=n.type,l=n.pendingProps.children,Rr(n,s),u=Rt(u),l=l(u),n.flags|=1,ot(e,n,l,s),n.child;case 14:return l=n.type,u=bt(l,n.pendingProps),u=bt(l.type,u),mh(e,n,l,u,s);case 15:return gh(e,n,n.type,n.pendingProps,s);case 17:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:bt(l,u),ro(e,n),n.tag=1,ct(l)?(e=!0,zs(n)):e=!1,Rr(n,s),lh(n,l,u),ga(n,l,u,s),wa(null,n,l,!0,e,s);case 19:return kh(e,n,s);case 22:return _h(e,n,s)}throw Error(r(156,n.tag))};function Kh(e,n){return Ic(e,n)}function S_(e,n,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,n,s,l){return new S_(e,n,s,l)}function Ua(e){return e=e.prototype,!(!e||!e.isReactComponent)}function k_(e){if(typeof e=="function")return Ua(e)?1:0;if(e!=null){if(e=e.$$typeof,e===It)return 11;if(e===wt)return 14}return 2}function Mn(e,n){var s=e.alternate;return s===null?(s=Mt(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function mo(e,n,s,l,u,d){var f=2;if(l=e,typeof e=="function")Ua(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case be:return rr(s.children,u,d,n);case Je:f=8,u|=8;break;case xt:return e=Mt(12,s,n,u|2),e.elementType=xt,e.lanes=d,e;case st:return e=Mt(13,s,n,u),e.elementType=st,e.lanes=d,e;case yt:return e=Mt(19,s,n,u),e.elementType=yt,e.lanes=d,e;case ue:return go(s,u,d,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vt:f=10;break e;case Zt:f=9;break e;case It:f=11;break e;case wt:f=14;break e;case Qe:f=16,l=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=Mt(f,s,n,u),n.elementType=e,n.type=l,n.lanes=d,n}function rr(e,n,s,l){return e=Mt(7,e,l,n),e.lanes=s,e}function go(e,n,s,l){return e=Mt(22,e,l,n),e.elementType=ue,e.lanes=s,e.stateNode={isHidden:!1},e}function Ba(e,n,s){return e=Mt(6,e,null,n),e.lanes=s,e}function Ha(e,n,s){return n=Mt(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function N_(e,n,s,l,u){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ml(0),this.expirationTimes=ml(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ml(0),this.identifierPrefix=l,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Wa(e,n,s,l,u,d,f,v,y){return e=new N_(e,n,s,v,y),n===1?(n=1,d===!0&&(n|=8)):n=0,d=Mt(3,null,null,n),e.current=d,d.stateNode=e,d.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(d),e}function x_(e,n,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:l==null?null:""+l,children:e,containerInfo:n,implementation:s}}function Yh(e){if(!e)return kn;e=e._reactInternals;e:{if($n(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ct(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var s=e.type;if(ct(s))return Sd(e,s,n)}return n}function qh(e,n,s,l,u,d,f,v,y){return e=Wa(s,l,!0,e,u,d,f,v,y),e.context=Yh(null),s=e.current,l=lt(),u=Dn(s),d=on(l,u),d.callback=n??null,In(s,d,u),e.current.lanes=u,oi(e,u,l),ft(e,l),e}function _o(e,n,s,l){var u=n.current,d=lt(),f=Dn(u);return s=Yh(s),n.context===null?n.context=s:n.pendingContext=s,n=on(d,f),n.payload={element:e},l=l===void 0?null:l,l!==null&&(n.callback=l),e=In(u,n,f),e!==null&&(Bt(e,u,f,d),Qs(e,u,f)),f}function vo(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function Xh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Va(e,n){Xh(e,n),(e=e.alternate)&&Xh(e,n)}function I_(){return null}var Jh=typeof reportError=="function"?reportError:function(e){console.error(e)};function $a(e){this._internalRoot=e}yo.prototype.render=$a.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));_o(e,n,null,null)},yo.prototype.unmount=$a.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;er(function(){_o(null,e,null,null)}),n[en]=null}};function yo(e){this._internalRoot=e}yo.prototype.unstable_scheduleHydration=function(e){if(e){var n=Lc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<yn.length&&n!==0&&n<yn[s].priority;s++);yn.splice(s,0,e),s===0&&bc(e)}};function Ga(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zh(){}function T_(e,n,s,l,u){if(u){if(typeof l=="function"){var d=l;l=function(){var I=vo(f);d.call(I)}}var f=qh(n,l,e,0,null,!1,!1,"",Zh);return e._reactRootContainer=f,e[en]=f.current,wi(e.nodeType===8?e.parentNode:e),er(),f}for(;u=e.lastChild;)e.removeChild(u);if(typeof l=="function"){var v=l;l=function(){var I=vo(y);v.call(I)}}var y=Wa(e,0,!1,null,null,!1,!1,"",Zh);return e._reactRootContainer=y,e[en]=y.current,wi(e.nodeType===8?e.parentNode:e),er(function(){_o(n,y,s,l)}),y}function Co(e,n,s,l,u){var d=s._reactRootContainer;if(d){var f=d;if(typeof u=="function"){var v=u;u=function(){var y=vo(f);v.call(y)}}_o(n,f,e,u)}else f=T_(s,n,e,u,l);return vo(f)}Mc=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=si(n.pendingLanes);s!==0&&(gl(n,s|1),ft(n,Ie()),(oe&6)===0&&(Lr=Ie()+500,Nn()))}break;case 13:er(function(){var l=sn(e,1);if(l!==null){var u=lt();Bt(l,e,1,u)}}),Va(e,1)}},_l=function(e){if(e.tag===13){var n=sn(e,134217728);if(n!==null){var s=lt();Bt(n,e,134217728,s)}Va(e,134217728)}},Oc=function(e){if(e.tag===13){var n=Dn(e),s=sn(e,n);if(s!==null){var l=lt();Bt(s,e,n,l)}Va(e,n)}},Lc=function(){return de},jc=function(e,n){var s=de;try{return de=e,n()}finally{de=s}},ul=function(e,n,s){switch(n){case"input":if(Zr(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==e&&l.form===e.form){var u=Fs(l);if(!u)throw Error(r(90));rl(l),Zr(l,u)}}}break;case"textarea":dc(e,s);break;case"select":n=s.value,n!=null&&mn(e,!!s.multiple,n,!1)}},wc=Fa,Cc=er;var P_={usingClientEntryPoint:!1,Events:[Si,Er,Fs,vc,yc,Fa]},Fi={findFiberByHostInstance:Gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},R_={bundleType:Fi.bundleType,version:Fi.version,rendererPackageName:Fi.rendererPackageName,rendererConfig:Fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Se.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Nc(e),e===null?null:e.stateNode},findFiberByHostInstance:Fi.findFiberByHostInstance||I_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eo.isDisabled&&Eo.supportsFiber)try{vs=Eo.inject(R_),Qt=Eo}catch{}}return pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P_,pt.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ga(n))throw Error(r(200));return x_(e,n,null,s)},pt.createRoot=function(e,n){if(!Ga(e))throw Error(r(299));var s=!1,l="",u=Jh;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),n=Wa(e,1,!1,null,null,s,!1,l,u),e[en]=n.current,wi(e.nodeType===8?e.parentNode:e),new $a(n)},pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Nc(n),e=e===null?null:e.stateNode,e},pt.flushSync=function(e){return er(e)},pt.hydrate=function(e,n,s){if(!wo(n))throw Error(r(200));return Co(null,e,n,!0,s)},pt.hydrateRoot=function(e,n,s){if(!Ga(e))throw Error(r(405));var l=s!=null&&s.hydratedSources||null,u=!1,d="",f=Jh;if(s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),n=qh(n,null,e,1,s??null,u,!1,d,f),e[en]=n.current,wi(e),l)for(e=0;e<l.length;e++)s=l[e],u=s._getVersion,u=u(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,u]:n.mutableSourceEagerHydrationData.push(s,u);return new yo(n)},pt.render=function(e,n,s){if(!wo(n))throw Error(r(200));return Co(null,e,n,!1,s)},pt.unmountComponentAtNode=function(e){if(!wo(e))throw Error(r(40));return e._reactRootContainer?(er(function(){Co(null,null,e,!1,function(){e._reactRootContainer=null,e[en]=null})}),!0):!1},pt.unstable_batchedUpdates=Fa,pt.unstable_renderSubtreeIntoContainer=function(e,n,s,l){if(!wo(s))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Co(e,n,s,!1,l)},pt.version="18.3.1-next-f1338f8080-20240426",pt}var af;function b_(){if(af)return Ya.exports;af=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Ya.exports=F_(),Ya.exports}var uf;function z_(){if(uf)return So;uf=1;var i=b_();return So.createRoot=i.createRoot,So.hydrateRoot=i.hydrateRoot,So}var U_=z_(),cf={};const np={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const M=function(i,t){if(!i)throw Gr(t)},Gr=function(i){return new Error("Firebase Database ("+np.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};const rp=function(i){const t=[];let r=0;for(let o=0;o<i.length;o++){let a=i.charCodeAt(o);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&o+1<i.length&&(i.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++o)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},B_=function(i){const t=[];let r=0,o=0;for(;r<i.length;){const a=i[r++];if(a<128)t[o++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[r++];t[o++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[r++],h=i[r++],p=i[r++],m=((a&7)<<18|(c&63)<<12|(h&63)<<6|p&63)-65536;t[o++]=String.fromCharCode(55296+(m>>10)),t[o++]=String.fromCharCode(56320+(m&1023))}else{const c=i[r++],h=i[r++];t[o++]=String.fromCharCode((a&15)<<12|(c&63)<<6|h&63)}}return t.join("")},Au={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<i.length;a+=3){const c=i[a],h=a+1<i.length,p=h?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,S=c>>2,C=(c&3)<<4|p>>4;let x=(p&15)<<2|g>>6,L=g&63;m||(L=64,h||(x=64)),o.push(r[S],r[C],r[x],r[L])}return o.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(rp(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):B_(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<i.length;){const c=r[i.charAt(a++)],p=a<i.length?r[i.charAt(a)]:0;++a;const g=a<i.length?r[i.charAt(a)]:64;++a;const C=a<i.length?r[i.charAt(a)]:64;if(++a,c==null||p==null||g==null||C==null)throw new H_;const x=c<<2|p>>4;if(o.push(x),g!==64){const L=p<<4&240|g>>2;if(o.push(L),C!==64){const O=g<<6&192|C;o.push(O)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class H_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ip=function(i){const t=rp(i);return Au.encodeByteArray(t,!0)},Io=function(i){return ip(i).replace(/\./g,"")},du=function(i){try{return Au.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function W_(i){return sp(void 0,i)}function sp(i,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const r=t;return new Date(r.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return t}for(const r in t)!t.hasOwnProperty(r)||!V_(r)||(i[r]=sp(i[r],t[r]));return i}function V_(i){return i!=="__proto__"}function $_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const G_=()=>$_().__FIREBASE_DEFAULTS__,Q_=()=>{if(typeof process>"u"||typeof cf>"u")return;const i=cf.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},K_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&du(i[1]);return t&&JSON.parse(t)},op=()=>{try{return G_()||Q_()||K_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Y_=i=>{var t,r;return(r=(t=op())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[i]},q_=i=>{const t=Y_(i);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const o=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),o]:[t.substring(0,r),o]},lp=()=>{var i;return(i=op())===null||i===void 0?void 0:i.config};class Vo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,o)=>{r?this.reject(r):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,o))}}}function X_(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},o=t||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Io(JSON.stringify(r)),Io(JSON.stringify(h)),""].join(".")}function J_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ap(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(J_())}function Z_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ev(){return np.NODE_ADMIN===!0}function tv(){try{return typeof indexedDB=="object"}catch{return!1}}function nv(){return new Promise((i,t)=>{try{let r=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(o),i(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var c;t(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(r){t(r)}})}const rv="FirebaseError";class os extends Error{constructor(t,r,o){super(r),this.code=t,this.customData=o,this.name=rv,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,up.prototype.create)}}class up{constructor(t,r,o){this.service=t,this.serviceName=r,this.errors=o}create(t,...r){const o=r[0]||{},a=`${this.service}/${t}`,c=this.errors[t],h=c?iv(c,o):"Error",p=`${this.serviceName}: ${h} (${a}).`;return new os(a,p,o)}}function iv(i,t){return i.replace(sv,(r,o)=>{const a=t[o];return a!=null?String(a):`<${o}?>`})}const sv=/\{\$([^}]+)}/g;function Yi(i){return JSON.parse(i)}function Le(i){return JSON.stringify(i)}const cp=function(i){let t={},r={},o={},a="";try{const c=i.split(".");t=Yi(du(c[0])||""),r=Yi(du(c[1])||""),a=c[2],o=r.d||{},delete r.d}catch{}return{header:t,claims:r,data:o,signature:a}},ov=function(i){const t=cp(i),r=t.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},lv=function(i){const t=cp(i).claims;return typeof t=="object"&&t.admin===!0};function fn(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function Hr(i,t){if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}function df(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function To(i,t,r){const o={};for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=t.call(r,i[a],a,i));return o}function hu(i,t){if(i===t)return!0;const r=Object.keys(i),o=Object.keys(t);for(const a of r){if(!o.includes(a))return!1;const c=i[a],h=t[a];if(hf(c)&&hf(h)){if(!hu(c,h))return!1}else if(c!==h)return!1}for(const a of o)if(!r.includes(a))return!1;return!0}function hf(i){return i!==null&&typeof i=="object"}function av(i){const t=[];for(const[r,o]of Object.entries(i))Array.isArray(o)?o.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(o));return t.length?"&"+t.join("&"):""}class uv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,r){r||(r=0);const o=this.W_;if(typeof t=="string")for(let C=0;C<16;C++)o[C]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(let C=0;C<16;C++)o[C]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(let C=16;C<80;C++){const x=o[C-3]^o[C-8]^o[C-14]^o[C-16];o[C]=(x<<1|x>>>31)&4294967295}let a=this.chain_[0],c=this.chain_[1],h=this.chain_[2],p=this.chain_[3],m=this.chain_[4],g,S;for(let C=0;C<80;C++){C<40?C<20?(g=p^c&(h^p),S=1518500249):(g=c^h^p,S=1859775393):C<60?(g=c&h|p&(c|h),S=2400959708):(g=c^h^p,S=3395469782);const x=(a<<5|a>>>27)+g+m+S+o[C]&4294967295;m=p,p=h,h=(c<<30|c>>>2)&4294967295,c=a,a=x}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(t,r){if(t==null)return;r===void 0&&(r=t.length);const o=r-this.blockSize;let a=0;const c=this.buf_;let h=this.inbuf_;for(;a<r;){if(h===0)for(;a<=o;)this.compress_(t,a),a+=this.blockSize;if(typeof t=="string"){for(;a<r;)if(c[h]=t.charCodeAt(a),++h,++a,h===this.blockSize){this.compress_(c),h=0;break}}else for(;a<r;)if(c[h]=t[a],++h,++a,h===this.blockSize){this.compress_(c),h=0;break}}this.inbuf_=h,this.total_+=r}digest(){const t=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=r&255,r/=256;this.compress_(this.buf_);let o=0;for(let a=0;a<5;a++)for(let c=24;c>=0;c-=8)t[o]=this.chain_[a]>>c&255,++o;return t}}function Mu(i,t){return`${i} failed: ${t} argument `}const cv=function(i){const t=[];let r=0;for(let o=0;o<i.length;o++){let a=i.charCodeAt(o);if(a>=55296&&a<=56319){const c=a-55296;o++,M(o<i.length,"Surrogate pair missing trail surrogate.");const h=i.charCodeAt(o)-56320;a=65536+(c<<10)+h}a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):a<65536?(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},$o=function(i){let t=0;for(let r=0;r<i.length;r++){const o=i.charCodeAt(r);o<128?t++:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,r++):t+=3}return t};function Qr(i){return i&&i._delegate?i._delegate:i}class qi{constructor(t,r,o){this.name=t,this.instanceFactory=r,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ir="[DEFAULT]";class dv{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const o=new Vo;if(this.instancesDeferred.set(r,o),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const o=this.normalizeInstanceIdentifier(t?.identifier),a=(r=t?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(fv(t))try{this.getOrInitializeService({instanceIdentifier:ir})}catch{}for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch{}}}}clearInstance(t=ir){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ir){return this.instances.has(t)}getOptions(t=ir){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:r});for(const[c,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);o===p&&h.resolve(a)}return a}onInit(t,r){var o;const a=this.normalizeInstanceIdentifier(r),c=(o=this.onInitCallbacks.get(a))!==null&&o!==void 0?o:new Set;c.add(t),this.onInitCallbacks.set(a,c);const h=this.instances.get(a);return h&&t(h,a),()=>{c.delete(t)}}invokeOnInitCallbacks(t,r){const o=this.onInitCallbacks.get(r);if(o)for(const a of o)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:hv(t),options:r}),this.instances.set(t,o),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=ir){return this.component?this.component.multipleInstances?t:ir:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hv(i){return i===ir?void 0:i}function fv(i){return i.instantiationMode==="EAGER"}class pv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new dv(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}var me;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(me||(me={}));const mv={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},gv=me.INFO,_v={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},vv=(i,t,...r)=>{if(t<i.logLevel)return;const o=new Date().toISOString(),a=_v[t];if(a)console[a](`[${o}]  ${i.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dp{constructor(t){this.name=t,this._logLevel=gv,this._logHandler=vv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in me))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?mv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...t),this._logHandler(this,me.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...t),this._logHandler(this,me.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,me.INFO,...t),this._logHandler(this,me.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,me.WARN,...t),this._logHandler(this,me.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...t),this._logHandler(this,me.ERROR,...t)}}const yv=(i,t)=>t.some(r=>i instanceof r);let ff,pf;function wv(){return ff||(ff=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cv(){return pf||(pf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hp=new WeakMap,fu=new WeakMap,fp=new WeakMap,Ja=new WeakMap,Ou=new WeakMap;function Ev(i){const t=new Promise((r,o)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{r(Ln(i.result)),a()},h=()=>{o(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",h)});return t.then(r=>{r instanceof IDBCursor&&hp.set(r,i)}).catch(()=>{}),Ou.set(t,i),t}function Sv(i){if(fu.has(i))return;const t=new Promise((r,o)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{r(),a()},h=()=>{o(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});fu.set(i,t)}let pu={get(i,t,r){if(i instanceof IDBTransaction){if(t==="done")return fu.get(i);if(t==="objectStoreNames")return i.objectStoreNames||fp.get(i);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ln(i[t])},set(i,t,r){return i[t]=r,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function kv(i){pu=i(pu)}function Nv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const o=i.call(Za(this),t,...r);return fp.set(o,t.sort?t.sort():[t]),Ln(o)}:Cv().includes(i)?function(...t){return i.apply(Za(this),t),Ln(hp.get(this))}:function(...t){return Ln(i.apply(Za(this),t))}}function xv(i){return typeof i=="function"?Nv(i):(i instanceof IDBTransaction&&Sv(i),yv(i,wv())?new Proxy(i,pu):i)}function Ln(i){if(i instanceof IDBRequest)return Ev(i);if(Ja.has(i))return Ja.get(i);const t=xv(i);return t!==i&&(Ja.set(i,t),Ou.set(t,i)),t}const Za=i=>Ou.get(i);function Iv(i,t,{blocked:r,upgrade:o,blocking:a,terminated:c}={}){const h=indexedDB.open(i,t),p=Ln(h);return o&&h.addEventListener("upgradeneeded",m=>{o(Ln(h.result),m.oldVersion,m.newVersion,Ln(h.transaction),m)}),r&&h.addEventListener("blocked",m=>r(m.oldVersion,m.newVersion,m)),p.then(m=>{c&&m.addEventListener("close",()=>c()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const Tv=["get","getKey","getAll","getAllKeys","count"],Pv=["put","add","delete","clear"],eu=new Map;function mf(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(eu.get(t))return eu.get(t);const r=t.replace(/FromIndex$/,""),o=t!==r,a=Pv.includes(r);if(!(r in(o?IDBIndex:IDBObjectStore).prototype)||!(a||Tv.includes(r)))return;const c=async function(h,...p){const m=this.transaction(h,a?"readwrite":"readonly");let g=m.store;return o&&(g=g.index(p.shift())),(await Promise.all([g[r](...p),a&&m.done]))[0]};return eu.set(t,c),c}kv(i=>({...i,get:(t,r,o)=>mf(t,r)||i.get(t,r,o),has:(t,r)=>!!mf(t,r)||i.has(t,r)}));class Rv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Dv(r)){const o=r.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(r=>r).join(" ")}}function Dv(i){const t=i.getComponent();return t?.type==="VERSION"}const mu="@firebase/app",gf="0.10.13";const dn=new dp("@firebase/app"),Av="@firebase/app-compat",Mv="@firebase/analytics-compat",Ov="@firebase/analytics",Lv="@firebase/app-check-compat",jv="@firebase/app-check",Fv="@firebase/auth",bv="@firebase/auth-compat",zv="@firebase/database",Uv="@firebase/data-connect",Bv="@firebase/database-compat",Hv="@firebase/functions",Wv="@firebase/functions-compat",Vv="@firebase/installations",$v="@firebase/installations-compat",Gv="@firebase/messaging",Qv="@firebase/messaging-compat",Kv="@firebase/performance",Yv="@firebase/performance-compat",qv="@firebase/remote-config",Xv="@firebase/remote-config-compat",Jv="@firebase/storage",Zv="@firebase/storage-compat",ey="@firebase/firestore",ty="@firebase/vertexai-preview",ny="@firebase/firestore-compat",ry="firebase",iy="10.14.1";const gu="[DEFAULT]",sy={[mu]:"fire-core",[Av]:"fire-core-compat",[Ov]:"fire-analytics",[Mv]:"fire-analytics-compat",[jv]:"fire-app-check",[Lv]:"fire-app-check-compat",[Fv]:"fire-auth",[bv]:"fire-auth-compat",[zv]:"fire-rtdb",[Uv]:"fire-data-connect",[Bv]:"fire-rtdb-compat",[Hv]:"fire-fn",[Wv]:"fire-fn-compat",[Vv]:"fire-iid",[$v]:"fire-iid-compat",[Gv]:"fire-fcm",[Qv]:"fire-fcm-compat",[Kv]:"fire-perf",[Yv]:"fire-perf-compat",[qv]:"fire-rc",[Xv]:"fire-rc-compat",[Jv]:"fire-gcs",[Zv]:"fire-gcs-compat",[ey]:"fire-fst",[ny]:"fire-fst-compat",[ty]:"fire-vertex","fire-js":"fire-js",[ry]:"fire-js-all"};const Po=new Map,oy=new Map,_u=new Map;function _f(i,t){try{i.container.addComponent(t)}catch(r){dn.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,r)}}function Ro(i){const t=i.name;if(_u.has(t))return dn.debug(`There were multiple attempts to register component ${t}.`),!1;_u.set(t,i);for(const r of Po.values())_f(r,i);for(const r of oy.values())_f(r,i);return!0}function ly(i,t){const r=i.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),i.container.getProvider(t)}const ay={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jn=new up("app","Firebase",ay);class uy{constructor(t,r,o){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}const cy=iy;function pp(i,t={}){let r=i;typeof t!="object"&&(t={name:t});const o=Object.assign({name:gu,automaticDataCollectionEnabled:!1},t),a=o.name;if(typeof a!="string"||!a)throw jn.create("bad-app-name",{appName:String(a)});if(r||(r=lp()),!r)throw jn.create("no-options");const c=Po.get(a);if(c){if(hu(r,c.options)&&hu(o,c.config))return c;throw jn.create("duplicate-app",{appName:a})}const h=new pv(a);for(const m of _u.values())h.addComponent(m);const p=new uy(r,o,h);return Po.set(a,p),p}function dy(i=gu){const t=Po.get(i);if(!t&&i===gu&&lp())return pp();if(!t)throw jn.create("no-app",{appName:i});return t}function zr(i,t,r){var o;let a=(o=sy[i])!==null&&o!==void 0?o:i;r&&(a+=`-${r}`);const c=a.match(/\s|\//),h=t.match(/\s|\//);if(c||h){const p=[`Unable to register library "${a}" with version "${t}":`];c&&p.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&h&&p.push("and"),h&&p.push(`version name "${t}" contains illegal characters (whitespace or "/")`),dn.warn(p.join(" "));return}Ro(new qi(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}const hy="firebase-heartbeat-database",fy=1,Xi="firebase-heartbeat-store";let tu=null;function mp(){return tu||(tu=Iv(hy,fy,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Xi)}catch(r){console.warn(r)}}}}).catch(i=>{throw jn.create("idb-open",{originalErrorMessage:i.message})})),tu}async function py(i){try{const r=(await mp()).transaction(Xi),o=await r.objectStore(Xi).get(gp(i));return await r.done,o}catch(t){if(t instanceof os)dn.warn(t.message);else{const r=jn.create("idb-get",{originalErrorMessage:t?.message});dn.warn(r.message)}}}async function vf(i,t){try{const o=(await mp()).transaction(Xi,"readwrite");await o.objectStore(Xi).put(t,gp(i)),await o.done}catch(r){if(r instanceof os)dn.warn(r.message);else{const o=jn.create("idb-set",{originalErrorMessage:r?.message});dn.warn(o.message)}}}function gp(i){return`${i.name}!${i.options.appId}`}const my=1024,gy=720*60*60*1e3;class _y{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new yy(r),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=yf();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const p=new Date(h.date).valueOf();return Date.now()-p<=gy}),this._storage.overwrite(this._heartbeatsCache))}catch(o){dn.warn(o)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=yf(),{heartbeatsToSend:o,unsentEntries:a}=vy(this._heartbeatsCache.heartbeats),c=Io(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(r){return dn.warn(r),""}}}function yf(){return new Date().toISOString().substring(0,10)}function vy(i,t=my){const r=[];let o=i.slice();for(const a of i){const c=r.find(h=>h.agent===a.agent);if(c){if(c.dates.push(a.date),wf(r)>t){c.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),wf(r)>t){r.pop();break}o=o.slice(1)}return{heartbeatsToSend:r,unsentEntries:o}}class yy{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tv()?nv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await py(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return vf(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return vf(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function wf(i){return Io(JSON.stringify({version:2,heartbeats:i})).length}function wy(i){Ro(new qi("platform-logger",t=>new Rv(t),"PRIVATE")),Ro(new qi("heartbeat",t=>new _y(t),"PRIVATE")),zr(mu,gf,i),zr(mu,gf,"esm2017"),zr("fire-js","")}wy("");var Cy="firebase",Ey="10.14.1";zr(Cy,Ey,"app");var Cf={};const Ef="@firebase/database",Sf="1.0.8";let _p="";function Sy(i){_p=i}class ky{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,r){r==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Le(r))}get(t){const r=this.domStorage_.getItem(this.prefixedName_(t));return r==null?null:Yi(r)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Ny{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,r){r==null?delete this.cache_[t]:this.cache_[t]=r}get(t){return fn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const vp=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ky(t)}}catch{}return new Ny},or=vp("localStorage"),xy=vp("sessionStorage");const Ur=new dp("@firebase/database"),Iy=(function(){let i=1;return function(){return i++}})(),yp=function(i){const t=cv(i),r=new uv;r.update(t);const o=r.digest();return Au.encodeByteArray(o)},ls=function(...i){let t="";for(let r=0;r<i.length;r++){const o=i[r];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?t+=ls.apply(null,o):typeof o=="object"?t+=Le(o):t+=o,t+=" "}return t};let Vi=null,kf=!0;const Ty=function(i,t){M(!0,"Can't turn on custom loggers persistently."),Ur.logLevel=me.VERBOSE,Vi=Ur.log.bind(Ur)},rt=function(...i){if(kf===!0&&(kf=!1,Vi===null&&xy.get("logging_enabled")===!0&&Ty()),Vi){const t=ls.apply(null,i);Vi(t)}},as=function(i){return function(...t){rt(i,...t)}},vu=function(...i){const t="FIREBASE INTERNAL ERROR: "+ls(...i);Ur.error(t)},hn=function(...i){const t=`FIREBASE FATAL ERROR: ${ls(...i)}`;throw Ur.error(t),new Error(t)},gt=function(...i){const t="FIREBASE WARNING: "+ls(...i);Ur.warn(t)},Py=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wp=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},Ry=function(i){if(document.readyState==="complete")i();else{let t=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Wr="[MIN_NAME]",ar="[MAX_NAME]",Kr=function(i,t){if(i===t)return 0;if(i===Wr||t===ar)return-1;if(t===Wr||i===ar)return 1;{const r=Nf(i),o=Nf(t);return r!==null?o!==null?r-o===0?i.length-t.length:r-o:-1:o!==null?1:i<t?-1:1}},Dy=function(i,t){return i===t?0:i<t?-1:1},zi=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+Le(t))},Lu=function(i){if(typeof i!="object"||i===null)return Le(i);const t=[];for(const o in i)t.push(o);t.sort();let r="{";for(let o=0;o<t.length;o++)o!==0&&(r+=","),r+=Le(t[o]),r+=":",r+=Lu(i[t[o]]);return r+="}",r},Cp=function(i,t){const r=i.length;if(r<=t)return[i];const o=[];for(let a=0;a<r;a+=t)a+t>r?o.push(i.substring(a,r)):o.push(i.substring(a,a+t));return o};function _t(i,t){for(const r in i)i.hasOwnProperty(r)&&t(r,i[r])}const Ep=function(i){M(!wp(i),"Invalid JSON number");const t=11,r=52,o=(1<<t-1)-1;let a,c,h,p,m;i===0?(c=0,h=0,a=1/i===-1/0?1:0):(a=i<0,i=Math.abs(i),i>=Math.pow(2,1-o)?(p=Math.min(Math.floor(Math.log(i)/Math.LN2),o),c=p+o,h=Math.round(i*Math.pow(2,r-p)-Math.pow(2,r))):(c=0,h=Math.round(i/Math.pow(2,1-o-r))));const g=[];for(m=r;m;m-=1)g.push(h%2?1:0),h=Math.floor(h/2);for(m=t;m;m-=1)g.push(c%2?1:0),c=Math.floor(c/2);g.push(a?1:0),g.reverse();const S=g.join("");let C="";for(m=0;m<64;m+=8){let x=parseInt(S.substr(m,8),2).toString(16);x.length===1&&(x="0"+x),C=C+x}return C.toLowerCase()},Ay=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},My=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Oy(i,t){let r="Unknown Error";i==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?r="Client doesn't have permission to access the desired data.":i==="unavailable"&&(r="The service is unavailable");const o=new Error(i+" at "+t._path.toString()+": "+r);return o.code=i.toUpperCase(),o}const Ly=new RegExp("^-?(0*)\\d{1,10}$"),jy=-2147483648,Fy=2147483647,Nf=function(i){if(Ly.test(i)){const t=Number(i);if(t>=jy&&t<=Fy)return t}return null},Yr=function(i){try{i()}catch(t){setTimeout(()=>{const r=t.stack||"";throw gt("Exception was thrown by user callback.",r),t},Math.floor(0))}},by=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$i=function(i,t){const r=setTimeout(i,t);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};class zy{constructor(t,r){this.appName_=t,this.appCheckProvider=r,this.appCheck=r?.getImmediate({optional:!0}),this.appCheck||r?.get().then(o=>this.appCheck=o)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((r,o)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(o=>o.addTokenListener(t))}notifyForInvalidToken(){gt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Uy{constructor(t,r,o){this.appName_=t,this.firebaseOptions_=r,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(a=>this.auth_=a)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(r=>r&&r.code==="auth/token-not-initialized"?(rt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,o)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(r=>r.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(r=>r.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gt(t)}}class xo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}xo.OWNER="owner";const ju="5",Sp="v",kp="s",Np="r",xp="f",Ip=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Tp="ls",Pp="p",yu="ac",Rp="websocket",Dp="long_polling";class Ap{constructor(t,r,o,a,c=!1,h="",p=!1,m=!1){this.secure=r,this.namespace=o,this.webSocketOnly=a,this.nodeAdmin=c,this.persistenceKey=h,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=m,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=or.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&or.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${r}`}}function By(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function Mp(i,t,r){M(typeof t=="string","typeof type must == string"),M(typeof r=="object","typeof params must == object");let o;if(t===Rp)o=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===Dp)o=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);By(i)&&(r.ns=i.namespace);const a=[];return _t(r,(c,h)=>{a.push(c+"="+h)}),o+a.join("&")}class Hy{constructor(){this.counters_={}}incrementCounter(t,r=1){fn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=r}get(){return W_(this.counters_)}}const nu={},ru={};function Fu(i){const t=i.toString();return nu[t]||(nu[t]=new Hy),nu[t]}function Wy(i,t){const r=i.toString();return ru[r]||(ru[r]=t()),ru[r]}class Vy{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,r){this.closeAfterResponse=t,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,r){for(this.pendingResponses[t]=r;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<o.length;++a)o[a]&&Yr(()=>{this.onMessage_(o[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const xf="start",$y="close",Gy="pLPCommand",Qy="pRTLPCB",Op="id",Lp="pw",jp="ser",Ky="cb",Yy="seg",qy="ts",Xy="d",Jy="dframe",Fp=1870,bp=30,Zy=Fp-bp,ew=25e3,tw=3e4;class br{constructor(t,r,o,a,c,h,p){this.connId=t,this.repoInfo=r,this.applicationId=o,this.appCheckToken=a,this.authToken=c,this.transportSessionId=h,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=as(t),this.stats_=Fu(r),this.urlFn=m=>(this.appCheckToken&&(m[yu]=this.appCheckToken),Mp(r,Dp,m))}open(t,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Vy(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(tw)),Ry(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bu((...c)=>{const[h,p,m,g,S]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===xf)this.id=p,this.password=m;else if(h===$y)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...c)=>{const[h,p]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(h,p)},()=>{this.onClosed_()},this.urlFn);const o={};o[xf]="t",o[jp]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[Ky]=this.scriptTagHolder.uniqueCallbackIdentifier),o[Sp]=ju,this.transportSessionId&&(o[kp]=this.transportSessionId),this.lastSessionId&&(o[Tp]=this.lastSessionId),this.applicationId&&(o[Pp]=this.applicationId),this.appCheckToken&&(o[yu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ip.test(location.hostname)&&(o[Np]=xp);const a=this.urlFn(o);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){br.forceAllow_=!0}static forceDisallow(){br.forceDisallow_=!0}static isAvailable(){return br.forceAllow_?!0:!br.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ay()&&!My()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const r=Le(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=ip(r),a=Cp(o,Zy);for(let c=0;c<a.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[c]),this.curSegmentNum++}addDisconnectPingFrame(t,r){this.myDisconnFrame=document.createElement("iframe");const o={};o[Jy]="t",o[Op]=t,o[Lp]=r,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const r=Le(t).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class bu{constructor(t,r,o,a){this.onDisconnect=o,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Iy(),window[Gy+this.uniqueCallbackIdentifier]=t,window[Qy+this.uniqueCallbackIdentifier]=r,this.myIFrame=bu.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(p){rt("frame writing exception"),p.stack&&rt(p.stack),rt(p)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||rt("No IE domain setting required")}catch{const o=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,r){for(this.myID=t,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[Op]=this.myID,t[Lp]=this.myPW,t[jp]=this.currentSerial;let r=this.urlFn(t),o="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+bp+o.length<=Fp;){const h=this.pendingSegs.shift();o=o+"&"+Yy+a+"="+h.seg+"&"+qy+a+"="+h.ts+"&"+Xy+a+"="+h.d,a++}return r=r+o,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(t,r,o){this.pendingSegs.push({seg:t,ts:r,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(t,r){this.outstandingRequests.add(r);const o=()=>{this.outstandingRequests.delete(r),this.newRequest_()},a=setTimeout(o,Math.floor(ew)),c=()=>{clearTimeout(a),o()};this.addTag(t,c)}addTag(t,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.onload=o.onreadystatechange=function(){const a=o.readyState;(!a||a==="loaded"||a==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),r())},o.onerror=()=>{rt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}const nw=16384,rw=45e3;let Do=null;typeof MozWebSocket<"u"?Do=MozWebSocket:typeof WebSocket<"u"&&(Do=WebSocket);class Ht{constructor(t,r,o,a,c,h,p){this.connId=t,this.applicationId=o,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=as(this.connId),this.stats_=Fu(r),this.connURL=Ht.connectionURL_(r,h,p,a,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,a,c){const h={};return h[Sp]=ju,typeof location<"u"&&location.hostname&&Ip.test(location.hostname)&&(h[Np]=xp),r&&(h[kp]=r),o&&(h[Tp]=o),a&&(h[yu]=a),c&&(h[Pp]=c),Mp(t,Rp,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,or.set("previous_websocket_failure",!0);try{let o;ev(),this.mySock=new Do(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const a=o.message||o.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const a=o.message||o.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){Ht.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(r);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&Do!==null&&!Ht.forceDisallow_}static previouslyFailed(){return or.isInMemoryStorage||or.get("previous_websocket_failure")===!0}markConnectionHealthy(){or.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=Yi(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(M(this.frames===null,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);o!==null&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=Le(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=Cp(r,nw);o.length>1&&this.sendString_(String(o.length));for(let a=0;a<o.length;a++)this.sendString_(o[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(rw))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ht.responsesRequiredToBeHealthy=2;Ht.healthyTimeout=3e4;class Ji{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[br,Ht]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Ht&&Ht.isAvailable();let o=r&&!Ht.previouslyFailed();if(t.webSocketOnly&&(r||gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Ht];else{const a=this.transports_=[];for(const c of Ji.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);Ji.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ji.globalTransportInitialized_=!1;const iw=6e4,sw=5e3,ow=10*1024,lw=100*1024,iu="t",If="d",aw="s",Tf="r",uw="e",Pf="o",Rf="a",Df="n",Af="p",cw="h";class dw{constructor(t,r,o,a,c,h,p,m,g,S){this.id=t,this.repoInfo_=r,this.applicationId_=o,this.appCheckToken_=a,this.authToken_=c,this.onMessage_=h,this.onReady_=p,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=as("c:"+this.id+":"),this.transportManager_=new Ji(r),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,o)},Math.floor(0));const a=t.healthyTimeout||0;a>0&&(this.healthyTimeout_=$i(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>lw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>ow?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return r=>{t===this.conn_?this.onConnectionLost_(r):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return r=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(r):t===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(t){const r={t:"d",d:t};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(iu in t){const r=t[iu];r===Rf?this.upgradeIfSecondaryHealthy_():r===Tf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===Pf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const r=zi("t",t),o=zi("d",t);if(r==="c")this.onSecondaryControl_(o);else if(r==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Af,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Rf,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Df,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const r=zi("t",t),o=zi("d",t);r==="c"?this.onControl_(o):r==="d"&&this.onDataMessage_(o)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const r=zi(iu,t);if(If in t){const o=t[If];if(r===cw){const a=Object.assign({},o);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(r===Df){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===aw?this.onConnectionShutdown_(o):r===Tf?this.onReset_(o):r===uw?vu("Server Error: "+o):r===Pf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vu("Unknown control packet command: "+r)}}onHandshake_(t){const r=t.ts,o=t.v,a=t.h;this.sessionId=t.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),ju!==o&&gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,o),$i(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(iw))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,r){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$i(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(sw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Af,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(or.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class zp{put(t,r,o,a){}merge(t,r,o,a){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,r,o){}onDisconnectMerge(t,r,o){}onDisconnectCancel(t,r){}reportStats(t){}}class Up{constructor(t){this.allowedEvents_=t,this.listeners_={},M(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...r){if(Array.isArray(this.listeners_[t])){const o=[...this.listeners_[t]];for(let a=0;a<o.length;a++)o[a].callback.apply(o[a].context,r)}}on(t,r,o){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:r,context:o});const a=this.getInitialEvent(t);a&&r.apply(o,a)}off(t,r,o){this.validateEventType_(t);const a=this.listeners_[t]||[];for(let c=0;c<a.length;c++)if(a[c].callback===r&&(!o||o===a[c].context)){a.splice(c,1);return}}validateEventType_(t){M(this.allowedEvents_.find(r=>r===t),"Unknown event: "+t)}}class Ao extends Up{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ap()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ao}getInitialEvent(t){return M(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const Mf=32,Of=768;class he{constructor(t,r){if(r===void 0){this.pieces_=t.split("/");let o=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[o]=this.pieces_[a],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=r}toString(){let t="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(t+="/"+this.pieces_[r]);return t||"/"}}function ae(){return new he("")}function Z(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function zn(i){return i.pieces_.length-i.pieceNum_}function ge(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new he(i.pieces_,t)}function Bp(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function hw(i){let t="";for(let r=i.pieceNum_;r<i.pieces_.length;r++)i.pieces_[r]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[r])));return t||"/"}function Hp(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function Wp(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let r=i.pieceNum_;r<i.pieces_.length-1;r++)t.push(i.pieces_[r]);return new he(t,0)}function je(i,t){const r=[];for(let o=i.pieceNum_;o<i.pieces_.length;o++)r.push(i.pieces_[o]);if(t instanceof he)for(let o=t.pieceNum_;o<t.pieces_.length;o++)r.push(t.pieces_[o]);else{const o=t.split("/");for(let a=0;a<o.length;a++)o[a].length>0&&r.push(o[a])}return new he(r,0)}function te(i){return i.pieceNum_>=i.pieces_.length}function at(i,t){const r=Z(i),o=Z(t);if(r===null)return t;if(r===o)return at(ge(i),ge(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function zu(i,t){if(zn(i)!==zn(t))return!1;for(let r=i.pieceNum_,o=t.pieceNum_;r<=i.pieces_.length;r++,o++)if(i.pieces_[r]!==t.pieces_[o])return!1;return!0}function Wt(i,t){let r=i.pieceNum_,o=t.pieceNum_;if(zn(i)>zn(t))return!1;for(;r<i.pieces_.length;){if(i.pieces_[r]!==t.pieces_[o])return!1;++r,++o}return!0}class fw{constructor(t,r){this.errorPrefix_=r,this.parts_=Hp(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=$o(this.parts_[o]);Vp(this)}}function pw(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=$o(t),Vp(i)}function mw(i){const t=i.parts_.pop();i.byteLength_-=$o(t),i.parts_.length>0&&(i.byteLength_-=1)}function Vp(i){if(i.byteLength_>Of)throw new Error(i.errorPrefix_+"has a key path longer than "+Of+" bytes ("+i.byteLength_+").");if(i.parts_.length>Mf)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Mf+") or object contains a cycle "+sr(i))}function sr(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}class Uu extends Up{constructor(){super(["visible"]);let t,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const o=!document[t];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new Uu}getInitialEvent(t){return M(t==="visible","Unknown event type: "+t),[this.visible_]}}const Ui=1e3,gw=300*1e3,Lf=30*1e3,_w=1.3,vw=3e4,yw="server_kill",jf=3;class cn extends zp{constructor(t,r,o,a,c,h,p,m){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=cn.nextPersistentConnectionId_++,this.log_=as("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ui,this.maxReconnectDelay_=gw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Uu.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ao.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_(Le(c)),M(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[a]=o)}get(t){this.initConnection_();const r=new Vo,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const p=h.d;h.s==="ok"?r.resolve(p):r.reject(p)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),r.promise}listen(t,r,o,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),M(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),M(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:r,query:t,tag:o};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+o+" for "+a);const c={p:o},h="q";t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest(h,c,p=>{const m=p.d,g=p.s;cn.warnOnListenWarnings_(m,r),(this.listens.get(o)&&this.listens.get(o).get(a))===t&&(this.log_("listen response",p),g!=="ok"&&this.removeListen_(o,a),t.onComplete&&t.onComplete(g,m))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&fn(t,"w")){const o=Hr(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||lv(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Lf)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=ov(t)?"auth":"gauth",o={cred:t};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(r,o,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+a),M(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,a)&&this.connected_&&this.sendUnlisten_(o,a,t._queryObject,r)}sendUnlisten_(t,r,o,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t},h="n";a&&(c.q=o,c.t=a),this.sendRequest(h,c)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,a){const c={p:r,d:o};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,o,a){this.putInternal("p",t,r,o,a)}merge(t,r,o,a){this.putInternal("m",t,r,o,a)}putInternal(t,r,o,a,c){this.initConnection_();const h={p:r,d:o};c!==void 0&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{if(o.s!=="ok"){const c=o.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Le(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):vu("Unrecognized action received from server: "+Le(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){M(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vw&&(this.reconnectDelay_=Ui),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_w)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+cn.nextConnectionId_++,c=this.lastSessionId;let h=!1,p=null;const m=function(){p?p.close():(h=!0,o())},g=function(C){M(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(C)};this.realtime_={close:m,sendRequest:g};const S=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[C,x]=await Promise.all([this.authTokenProvider_.getToken(S),this.appCheckTokenProvider_.getToken(S)]);h?rt("getToken() completed but was canceled"):(rt("getToken() completed. Creating connection."),this.authToken_=C&&C.accessToken,this.appCheckToken_=x&&x.token,p=new dw(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,o,L=>{gt(L+" ("+this.repoInfo_.toString()+")"),this.interrupt(yw)},c))}catch(C){this.log_("Failed to get token: "+C),h||(this.repoInfo_.nodeAdmin&&gt(C),m())}}}interrupt(t){rt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){rt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],df(this.interruptReasons_)&&(this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;r?o=r.map(c=>Lu(c)).join("$"):o="default";const a=this.removeListen_(t,o);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const o=new he(t).toString();let a;if(this.listens.has(o)){const c=this.listens.get(o);a=c.get(r),c.delete(r),c.size===0&&this.listens.delete(o)}else a=void 0;return a}onAuthRevoked_(t,r){rt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=jf&&(this.reconnectDelay_=Lf,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){rt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=jf&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+_p.replace(/\./g,"-")]=1,ap()?t["framework.cordova"]=1:Z_()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Ao.getInstance().currentlyOnline();return df(this.interruptReasons_)&&t}}cn.nextPersistentConnectionId_=0;cn.nextConnectionId_=0;class ee{constructor(t,r){this.name=t,this.node=r}static Wrap(t,r){return new ee(t,r)}}class Go{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,r){const o=new ee(Wr,t),a=new ee(Wr,r);return this.compare(o,a)!==0}minPost(){return ee.MIN}}let ko;class $p extends Go{static get __EMPTY_NODE(){return ko}static set __EMPTY_NODE(t){ko=t}compare(t,r){return Kr(t.name,r.name)}isDefinedOn(t){throw Gr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,r){return!1}minPost(){return ee.MIN}maxPost(){return new ee(ar,ko)}makePost(t,r){return M(typeof t=="string","KeyIndex indexValue must always be a string."),new ee(t,ko)}toString(){return".key"}}const Br=new $p;class No{constructor(t,r,o,a,c=null){this.isReverse_=a,this.resultGenerator_=c,this.nodeStack_=[];let h=1;for(;!t.isEmpty();)if(t=t,h=r?o(t.key,r):1,a&&(h*=-1),h<0)this.isReverse_?t=t.left:t=t.right;else if(h===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(t.key,t.value):r={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Ve{constructor(t,r,o,a,c){this.key=t,this.value=r,this.color=o??Ve.RED,this.left=a??mt.EMPTY_NODE,this.right=c??mt.EMPTY_NODE}copy(t,r,o,a,c){return new Ve(t??this.key,r??this.value,o??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let a=this;const c=o(t,a.key);return c<0?a=a.copy(null,null,null,a.left.insert(t,r,o),null):c===0?a=a.copy(null,r,null,null,null):a=a.copy(null,null,null,null,a.right.insert(t,r,o)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return mt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,a;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),r(t,o.key)===0){if(o.right.isEmpty())return mt.EMPTY_NODE;a=o.right.min_(),o=o.copy(a.key,a.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Ve.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Ve.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Ve.RED=!0;Ve.BLACK=!1;class ww{copy(t,r,o,a,c){return this}insert(t,r,o){return new Ve(t,r,null)}remove(t,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class mt{constructor(t,r=mt.EMPTY_NODE){this.comparator_=t,this.root_=r}insert(t,r){return new mt(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,Ve.BLACK,null,null))}remove(t){return new mt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ve.BLACK,null,null))}get(t){let r,o=this.root_;for(;!o.isEmpty();){if(r=this.comparator_(t,o.key),r===0)return o.value;r<0?o=o.left:r>0&&(o=o.right)}return null}getPredecessorKey(t){let r,o=this.root_,a=null;for(;!o.isEmpty();)if(r=this.comparator_(t,o.key),r===0){if(o.left.isEmpty())return a?a.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else r<0?o=o.left:r>0&&(a=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new No(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,r){return new No(this.root_,t,this.comparator_,!1,r)}getReverseIteratorFrom(t,r){return new No(this.root_,t,this.comparator_,!0,r)}getReverseIterator(t){return new No(this.root_,null,this.comparator_,!0,t)}}mt.EMPTY_NODE=new ww;function Cw(i,t){return Kr(i.name,t.name)}function Bu(i,t){return Kr(i,t)}let wu;function Ew(i){wu=i}const Gp=function(i){return typeof i=="number"?"number:"+Ep(i):"string:"+i},Qp=function(i){if(i.isLeafNode()){const t=i.val();M(typeof t=="string"||typeof t=="number"||typeof t=="object"&&fn(t,".sv"),"Priority must be a string or number.")}else M(i===wu||i.isEmpty(),"priority of unexpected type.");M(i===wu||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ff;class We{constructor(t,r=We.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,M(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Qp(this.priorityNode_)}static set __childrenNodeConstructor(t){Ff=t}static get __childrenNodeConstructor(){return Ff}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new We(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:We.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return te(t)?this:Z(t)===".priority"?this.priorityNode_:We.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:We.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=Z(t);return o===null?r:r.isEmpty()&&o!==".priority"?this:(M(o!==".priority"||zn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,We.__childrenNodeConstructor.EMPTY_NODE.updateChild(ge(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Gp(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",r==="number"?t+=Ep(this.value_):t+=this.value_,this.lazyHash_=yp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===We.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof We.__childrenNodeConstructor?-1:(M(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,a=We.VALUE_TYPE_ORDER.indexOf(r),c=We.VALUE_TYPE_ORDER.indexOf(o);return M(a>=0,"Unknown leaf type: "+r),M(c>=0,"Unknown leaf type: "+o),a===c?o==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}We.VALUE_TYPE_ORDER=["object","boolean","number","string"];let Kp,Yp;function Sw(i){Kp=i}function kw(i){Yp=i}class Nw extends Go{compare(t,r){const o=t.node.getPriority(),a=r.node.getPriority(),c=o.compareTo(a);return c===0?Kr(t.name,r.name):c}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,r){return!t.getPriority().equals(r.getPriority())}minPost(){return ee.MIN}maxPost(){return new ee(ar,new We("[PRIORITY-POST]",Yp))}makePost(t,r){const o=Kp(t);return new ee(r,new We("[PRIORITY-POST]",o))}toString(){return".priority"}}const Ne=new Nw;const xw=Math.log(2);class Iw{constructor(t){const r=c=>parseInt(Math.log(c)/xw,10),o=c=>parseInt(Array(c+1).join("1"),2);this.count=r(t+1),this.current_=this.count-1;const a=o(this.count);this.bits_=t+1&a}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Mo=function(i,t,r,o){i.sort(t);const a=function(m,g){const S=g-m;let C,x;if(S===0)return null;if(S===1)return C=i[m],x=r?r(C):C,new Ve(x,C.node,Ve.BLACK,null,null);{const L=parseInt(S/2,10)+m,O=a(m,L),V=a(L+1,g);return C=i[L],x=r?r(C):C,new Ve(x,C.node,Ve.BLACK,O,V)}},c=function(m){let g=null,S=null,C=i.length;const x=function(O,V){const K=C-O,Pe=C;C-=O;const De=a(K+1,Pe),Ae=i[K],Se=r?r(Ae):Ae;L(new Ve(Se,Ae.node,V,null,De))},L=function(O){g?(g.left=O,g=O):(S=O,g=O)};for(let O=0;O<m.count;++O){const V=m.nextBitIsOne(),K=Math.pow(2,m.count-(O+1));V?x(K,Ve.BLACK):(x(K,Ve.BLACK),x(K,Ve.RED))}return S},h=new Iw(i.length),p=c(h);return new mt(o||t,p)};let su;const Fr={};class un{constructor(t,r){this.indexes_=t,this.indexSet_=r}static get Default(){return M(Fr&&Ne,"ChildrenNode.ts has not been loaded"),su=su||new un({".priority":Fr},{".priority":Ne}),su}get(t){const r=Hr(this.indexes_,t);if(!r)throw new Error("No index defined for "+t);return r instanceof mt?r:null}hasIndex(t){return fn(this.indexSet_,t.toString())}addIndex(t,r){M(t!==Br,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let a=!1;const c=r.getIterator(ee.Wrap);let h=c.getNext();for(;h;)a=a||t.isDefinedOn(h.node),o.push(h),h=c.getNext();let p;a?p=Mo(o,t.getCompare()):p=Fr;const m=t.toString(),g=Object.assign({},this.indexSet_);g[m]=t;const S=Object.assign({},this.indexes_);return S[m]=p,new un(S,g)}addToIndexes(t,r){const o=To(this.indexes_,(a,c)=>{const h=Hr(this.indexSet_,c);if(M(h,"Missing index implementation for "+c),a===Fr)if(h.isDefinedOn(t.node)){const p=[],m=r.getIterator(ee.Wrap);let g=m.getNext();for(;g;)g.name!==t.name&&p.push(g),g=m.getNext();return p.push(t),Mo(p,h.getCompare())}else return Fr;else{const p=r.get(t.name);let m=a;return p&&(m=m.remove(new ee(t.name,p))),m.insert(t,t.node)}});return new un(o,this.indexSet_)}removeFromIndexes(t,r){const o=To(this.indexes_,a=>{if(a===Fr)return a;{const c=r.get(t.name);return c?a.remove(new ee(t.name,c)):a}});return new un(o,this.indexSet_)}}let Bi;class Q{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&Qp(this.priorityNode_),this.children_.isEmpty()&&M(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Bi||(Bi=new Q(new mt(Bu),null,un.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Bi}updatePriority(t){return this.children_.isEmpty()?this:new Q(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const r=this.children_.get(t);return r===null?Bi:r}}getChild(t){const r=Z(t);return r===null?this:this.getImmediateChild(r).getChild(ge(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(M(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{const o=new ee(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(o,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(o,this.children_));const h=a.isEmpty()?Bi:this.priorityNode_;return new Q(a,h,c)}}updateChild(t,r){const o=Z(t);if(o===null)return r;{M(Z(t)!==".priority"||zn(t)===1,".priority must be the last token in a path");const a=this.getImmediateChild(o).updateChild(ge(t),r);return this.updateImmediateChild(o,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,a=0,c=!0;if(this.forEachChild(Ne,(h,p)=>{r[h]=p.val(t),o++,c&&Q.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*o){const h=[];for(const p in r)h[p]=r[p];return h}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Gp(this.getPriority().val())+":"),this.forEachChild(Ne,(r,o)=>{const a=o.hash();a!==""&&(t+=":"+r+":"+a)}),this.lazyHash_=t===""?"":yp(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const a=this.resolveIndex_(o);if(a){const c=a.getPredecessorKey(new ee(t,r));return c?c.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new ee(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new ee(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,ee.Wrap);let c=a.peek();for(;c!=null&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,ee.Wrap);let c=a.peek();for(;c!=null&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===us?-1:0}withIndex(t){if(t===Br||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new Q(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Br||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const o=this.getIterator(Ne),a=r.getIterator(Ne);let c=o.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=o.getNext(),h=a.getNext()}return c===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===Br?null:this.indexMap_.get(t.toString())}}Q.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Tw extends Q{constructor(){super(new mt(Bu),Q.EMPTY_NODE,un.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Q.EMPTY_NODE}isEmpty(){return!1}}const us=new Tw;Object.defineProperties(ee,{MIN:{value:new ee(Wr,Q.EMPTY_NODE)},MAX:{value:new ee(ar,us)}});$p.__EMPTY_NODE=Q.EMPTY_NODE;We.__childrenNodeConstructor=Q;Ew(us);kw(us);const Pw=!0;function $e(i,t=null){if(i===null)return Q.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),M(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const r=i;return new We(r,$e(t))}if(!(i instanceof Array)&&Pw){const r=[];let o=!1;if(_t(i,(h,p)=>{if(h.substring(0,1)!=="."){const m=$e(p);m.isEmpty()||(o=o||!m.getPriority().isEmpty(),r.push(new ee(h,m)))}}),r.length===0)return Q.EMPTY_NODE;const c=Mo(r,Cw,h=>h.name,Bu);if(o){const h=Mo(r,Ne.getCompare());return new Q(c,$e(t),new un({".priority":h},{".priority":Ne}))}else return new Q(c,$e(t),un.Default)}else{let r=Q.EMPTY_NODE;return _t(i,(o,a)=>{if(fn(i,o)&&o.substring(0,1)!=="."){const c=$e(a);(c.isLeafNode()||!c.isEmpty())&&(r=r.updateImmediateChild(o,c))}}),r.updatePriority($e(t))}}Sw($e);class Rw extends Go{constructor(t){super(),this.indexPath_=t,M(!te(t)&&Z(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,r){const o=this.extractChild(t.node),a=this.extractChild(r.node),c=o.compareTo(a);return c===0?Kr(t.name,r.name):c}makePost(t,r){const o=$e(t),a=Q.EMPTY_NODE.updateChild(this.indexPath_,o);return new ee(r,a)}maxPost(){const t=Q.EMPTY_NODE.updateChild(this.indexPath_,us);return new ee(ar,t)}toString(){return Hp(this.indexPath_,0).join("/")}}class Dw extends Go{compare(t,r){const o=t.node.compareTo(r.node);return o===0?Kr(t.name,r.name):o}isDefinedOn(t){return!0}indexedValueChanged(t,r){return!t.equals(r)}minPost(){return ee.MIN}maxPost(){return ee.MAX}makePost(t,r){const o=$e(t);return new ee(r,o)}toString(){return".value"}}const Aw=new Dw;function qp(i){return{type:"value",snapshotNode:i}}function Vr(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function Zi(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function es(i,t,r){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:r}}function Mw(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}class Hu{constructor(t){this.index_=t}updateChild(t,r,o,a,c,h){M(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=t.getImmediateChild(r);return p.getChild(a).equals(o.getChild(a))&&p.isEmpty()===o.isEmpty()||(h!=null&&(o.isEmpty()?t.hasChild(r)?h.trackChildChange(Zi(r,p)):M(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?h.trackChildChange(Vr(r,o)):h.trackChildChange(es(r,o,p))),t.isLeafNode()&&o.isEmpty())?t:t.updateImmediateChild(r,o).withIndex(this.index_)}updateFullNode(t,r,o){return o!=null&&(t.isLeafNode()||t.forEachChild(Ne,(a,c)=>{r.hasChild(a)||o.trackChildChange(Zi(a,c))}),r.isLeafNode()||r.forEachChild(Ne,(a,c)=>{if(t.hasChild(a)){const h=t.getImmediateChild(a);h.equals(c)||o.trackChildChange(es(a,c,h))}else o.trackChildChange(Vr(a,c))})),r.withIndex(this.index_)}updatePriority(t,r){return t.isEmpty()?Q.EMPTY_NODE:t.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ts{constructor(t){this.indexedFilter_=new Hu(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ts.getStartPost_(t),this.endPost_=ts.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,o=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return r&&o}updateChild(t,r,o,a,c,h){return this.matches(new ee(r,o))||(o=Q.EMPTY_NODE),this.indexedFilter_.updateChild(t,r,o,a,c,h)}updateFullNode(t,r,o){r.isLeafNode()&&(r=Q.EMPTY_NODE);let a=r.withIndex(this.index_);a=a.updatePriority(Q.EMPTY_NODE);const c=this;return r.forEachChild(Ne,(h,p)=>{c.matches(new ee(h,p))||(a=a.updateImmediateChild(h,Q.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,a,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const r=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),r)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const r=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),r)}else return t.getIndex().maxPost()}}class Ow{constructor(t){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=r=>{const o=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new ts(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,r,o,a,c,h){return this.rangedFilter_.matches(new ee(r,o))||(o=Q.EMPTY_NODE),t.getImmediateChild(r).equals(o)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,r,o,a,c,h):this.fullLimitUpdateChild_(t,r,o,c,h)}updateFullNode(t,r,o){let a;if(r.isLeafNode()||r.isEmpty())a=Q.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){a=Q.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;c.hasNext()&&h<this.limit_;){const p=c.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))a=a.updateImmediateChild(p.name,p.node),h++;else break;else continue}}else{a=r.withIndex(this.index_),a=a.updatePriority(Q.EMPTY_NODE);let c;this.reverse_?c=a.getReverseIterator(this.index_):c=a.getIterator(this.index_);let h=0;for(;c.hasNext();){const p=c.getNext();h<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?h++:a=a.updateImmediateChild(p.name,Q.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,a,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,r,o,a,c){let h;if(this.reverse_){const C=this.index_.getCompare();h=(x,L)=>C(L,x)}else h=this.index_.getCompare();const p=t;M(p.numChildren()===this.limit_,"");const m=new ee(r,o),g=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),S=this.rangedFilter_.matches(m);if(p.hasChild(r)){const C=p.getImmediateChild(r);let x=a.getChildAfterChild(this.index_,g,this.reverse_);for(;x!=null&&(x.name===r||p.hasChild(x.name));)x=a.getChildAfterChild(this.index_,x,this.reverse_);const L=x==null?1:h(x,m);if(S&&!o.isEmpty()&&L>=0)return c?.trackChildChange(es(r,o,C)),p.updateImmediateChild(r,o);{c?.trackChildChange(Zi(r,C));const V=p.updateImmediateChild(r,Q.EMPTY_NODE);return x!=null&&this.rangedFilter_.matches(x)?(c?.trackChildChange(Vr(x.name,x.node)),V.updateImmediateChild(x.name,x.node)):V}}else return o.isEmpty()?t:S&&h(g,m)>=0?(c!=null&&(c.trackChildChange(Zi(g.name,g.node)),c.trackChildChange(Vr(r,o))),p.updateImmediateChild(r,o).updateImmediateChild(g.name,Q.EMPTY_NODE)):t}}class Wu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ne}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return M(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return M(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wr}hasEnd(){return this.endSet_}getIndexEndValue(){return M(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return M(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ar}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return M(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ne}copy(){const t=new Wu;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Lw(i){return i.loadsAllData()?new Hu(i.getIndex()):i.hasLimit()?new Ow(i):new ts(i)}function bf(i){const t={};if(i.isDefault())return t;let r;if(i.index_===Ne?r="$priority":i.index_===Aw?r="$value":i.index_===Br?r="$key":(M(i.index_ instanceof Rw,"Unrecognized index type!"),r=i.index_.toString()),t.orderBy=Le(r),i.startSet_){const o=i.startAfterSet_?"startAfter":"startAt";t[o]=Le(i.indexStartValue_),i.startNameSet_&&(t[o]+=","+Le(i.indexStartName_))}if(i.endSet_){const o=i.endBeforeSet_?"endBefore":"endAt";t[o]=Le(i.indexEndValue_),i.endNameSet_&&(t[o]+=","+Le(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function zf(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let r=i.viewFrom_;r===""&&(i.isViewFromLeft()?r="l":r="r"),t.vf=r}return i.index_!==Ne&&(t.i=i.index_.toString()),t}class Oo extends zp{constructor(t,r,o,a){super(),this.repoInfo_=t,this.onDataUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.log_=as("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,r){return r!==void 0?"tag$"+r:(M(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,r,o,a){const c=t._path.toString();this.log_("Listen called for "+c+" "+t._queryIdentifier);const h=Oo.getListenId_(t,o),p={};this.listens_[h]=p;const m=bf(t._queryParams);this.restRequest_(c+".json",m,(g,S)=>{let C=S;if(g===404&&(C=null,g=null),g===null&&this.onDataUpdate_(c,C,!1,o),Hr(this.listens_,h)===p){let x;g?g===401?x="permission_denied":x="rest_error:"+g:x="ok",a(x,null)}})}unlisten(t,r){const o=Oo.getListenId_(t,r);delete this.listens_[o]}get(t){const r=bf(t._queryParams),o=t._path.toString(),a=new Vo;return this.restRequest_(o+".json",r,(c,h)=>{let p=h;c===404&&(p=null,c=null),c===null?(this.onDataUpdate_(o,p,!1,null),a.resolve(p)):a.reject(new Error(p))}),a.promise}refreshAuthToken(t){}restRequest_(t,r={},o){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,c])=>{a&&a.accessToken&&(r.auth=a.accessToken),c&&c.token&&(r.ac=c.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+av(r);this.log_("Sending REST request for "+h);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(o&&p.readyState===4){this.log_("REST Response for "+h+" received. status:",p.status,"response:",p.responseText);let m=null;if(p.status>=200&&p.status<300){try{m=Yi(p.responseText)}catch{gt("Failed to parse JSON response for "+h+": "+p.responseText)}o(null,m)}else p.status!==401&&p.status!==404&&gt("Got unsuccessful REST response for "+h+" Status: "+p.status),o(p.status);o=null}},p.open("GET",h,!0),p.send()})}}class jw{constructor(){this.rootNode_=Q.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,r){this.rootNode_=this.rootNode_.updateChild(t,r)}}function Lo(){return{value:null,children:new Map}}function Xp(i,t,r){if(te(t))i.value=r,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,r);else{const o=Z(t);i.children.has(o)||i.children.set(o,Lo());const a=i.children.get(o);t=ge(t),Xp(a,t,r)}}function Cu(i,t,r){i.value!==null?r(t,i.value):Fw(i,(o,a)=>{const c=new he(t.toString()+"/"+o);Cu(a,c,r)})}function Fw(i,t){i.children.forEach((r,o)=>{t(o,r)})}class bw{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),r=Object.assign({},t);return this.last_&&_t(this.last_,(o,a)=>{r[o]=r[o]-a}),this.last_=t,r}}const Uf=10*1e3,zw=30*1e3,Uw=300*1e3;class Bw{constructor(t,r){this.server_=r,this.statsToReport_={},this.statsListener_=new bw(t);const o=Uf+(zw-Uf)*Math.random();$i(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const t=this.statsListener_.get(),r={};let o=!1;_t(t,(a,c)=>{c>0&&fn(this.statsToReport_,a)&&(r[a]=c,o=!0)}),o&&this.server_.reportStats(r),$i(this.reportStats_.bind(this),Math.floor(Math.random()*2*Uw))}}var Vt;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Vt||(Vt={}));function Jp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Vu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $u(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class jo{constructor(t,r,o){this.path=t,this.affectedTree=r,this.revert=o,this.type=Vt.ACK_USER_WRITE,this.source=Jp()}operationForChild(t){if(te(this.path)){if(this.affectedTree.value!=null)return M(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new he(t));return new jo(ae(),r,this.revert)}}else return M(Z(this.path)===t,"operationForChild called for unrelated child."),new jo(ge(this.path),this.affectedTree,this.revert)}}class ns{constructor(t,r){this.source=t,this.path=r,this.type=Vt.LISTEN_COMPLETE}operationForChild(t){return te(this.path)?new ns(this.source,ae()):new ns(this.source,ge(this.path))}}class ur{constructor(t,r,o){this.source=t,this.path=r,this.snap=o,this.type=Vt.OVERWRITE}operationForChild(t){return te(this.path)?new ur(this.source,ae(),this.snap.getImmediateChild(t)):new ur(this.source,ge(this.path),this.snap)}}class rs{constructor(t,r,o){this.source=t,this.path=r,this.children=o,this.type=Vt.MERGE}operationForChild(t){if(te(this.path)){const r=this.children.subtree(new he(t));return r.isEmpty()?null:r.value?new ur(this.source,ae(),r.value):new rs(this.source,ae(),r)}else return M(Z(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new rs(this.source,ge(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Un{constructor(t,r,o){this.node_=t,this.fullyInitialized_=r,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(te(t))return this.isFullyInitialized()&&!this.filtered_;const r=Z(t);return this.isCompleteForChild(r)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Hw{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Ww(i,t,r,o){const a=[],c=[];return t.forEach(h=>{h.type==="child_changed"&&i.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&c.push(Mw(h.childName,h.snapshotNode))}),Hi(i,a,"child_removed",t,o,r),Hi(i,a,"child_added",t,o,r),Hi(i,a,"child_moved",c,o,r),Hi(i,a,"child_changed",t,o,r),Hi(i,a,"value",t,o,r),a}function Hi(i,t,r,o,a,c){const h=o.filter(p=>p.type===r);h.sort((p,m)=>$w(i,p,m)),h.forEach(p=>{const m=Vw(i,p,c);a.forEach(g=>{g.respondsTo(p.type)&&t.push(g.createEvent(m,i.query_))})})}function Vw(i,t,r){return t.type==="value"||t.type==="child_removed"||(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function $w(i,t,r){if(t.childName==null||r.childName==null)throw Gr("Should only compare child_ events.");const o=new ee(t.childName,t.snapshotNode),a=new ee(r.childName,r.snapshotNode);return i.index_.compare(o,a)}function Qo(i,t){return{eventCache:i,serverCache:t}}function Gi(i,t,r,o){return Qo(new Un(t,r,o),i.serverCache)}function Zp(i,t,r,o){return Qo(i.eventCache,new Un(t,r,o))}function Fo(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function cr(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let ou;const Gw=()=>(ou||(ou=new mt(Dy)),ou);class ye{constructor(t,r=Gw()){this.value=t,this.children=r}static fromObject(t){let r=new ye(null);return _t(t,(o,a)=>{r=r.set(new he(o),a)}),r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,r){if(this.value!=null&&r(this.value))return{path:ae(),value:this.value};if(te(t))return null;{const o=Z(t),a=this.children.get(o);if(a!==null){const c=a.findRootMostMatchingPathAndValue(ge(t),r);return c!=null?{path:je(new he(o),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(te(t))return this;{const r=Z(t),o=this.children.get(r);return o!==null?o.subtree(ge(t)):new ye(null)}}set(t,r){if(te(t))return new ye(r,this.children);{const o=Z(t),c=(this.children.get(o)||new ye(null)).set(ge(t),r),h=this.children.insert(o,c);return new ye(this.value,h)}}remove(t){if(te(t))return this.children.isEmpty()?new ye(null):new ye(null,this.children);{const r=Z(t),o=this.children.get(r);if(o){const a=o.remove(ge(t));let c;return a.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,a),this.value===null&&c.isEmpty()?new ye(null):new ye(this.value,c)}else return this}}get(t){if(te(t))return this.value;{const r=Z(t),o=this.children.get(r);return o?o.get(ge(t)):null}}setTree(t,r){if(te(t))return r;{const o=Z(t),c=(this.children.get(o)||new ye(null)).setTree(ge(t),r);let h;return c.isEmpty()?h=this.children.remove(o):h=this.children.insert(o,c),new ye(this.value,h)}}fold(t){return this.fold_(ae(),t)}fold_(t,r){const o={};return this.children.inorderTraversal((a,c)=>{o[a]=c.fold_(je(t,a),r)}),r(t,this.value,o)}findOnPath(t,r){return this.findOnPath_(t,ae(),r)}findOnPath_(t,r,o){const a=this.value?o(r,this.value):!1;if(a)return a;if(te(t))return null;{const c=Z(t),h=this.children.get(c);return h?h.findOnPath_(ge(t),je(r,c),o):null}}foreachOnPath(t,r){return this.foreachOnPath_(t,ae(),r)}foreachOnPath_(t,r,o){if(te(t))return this;{this.value&&o(r,this.value);const a=Z(t),c=this.children.get(a);return c?c.foreachOnPath_(ge(t),je(r,a),o):new ye(null)}}foreach(t){this.foreach_(ae(),t)}foreach_(t,r){this.children.inorderTraversal((o,a)=>{a.foreach_(je(t,o),r)}),this.value&&r(t,this.value)}foreachChild(t){this.children.inorderTraversal((r,o)=>{o.value&&t(r,o.value)})}}class $t{constructor(t){this.writeTree_=t}static empty(){return new $t(new ye(null))}}function Qi(i,t,r){if(te(t))return new $t(new ye(r));{const o=i.writeTree_.findRootMostValueAndPath(t);if(o!=null){const a=o.path;let c=o.value;const h=at(a,t);return c=c.updateChild(h,r),new $t(i.writeTree_.set(a,c))}else{const a=new ye(r),c=i.writeTree_.setTree(t,a);return new $t(c)}}}function Bf(i,t,r){let o=i;return _t(r,(a,c)=>{o=Qi(o,je(t,a),c)}),o}function Hf(i,t){if(te(t))return $t.empty();{const r=i.writeTree_.setTree(t,new ye(null));return new $t(r)}}function Eu(i,t){return dr(i,t)!=null}function dr(i,t){const r=i.writeTree_.findRootMostValueAndPath(t);return r!=null?i.writeTree_.get(r.path).getChild(at(r.path,t)):null}function Wf(i){const t=[],r=i.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(Ne,(o,a)=>{t.push(new ee(o,a))}):i.writeTree_.children.inorderTraversal((o,a)=>{a.value!=null&&t.push(new ee(o,a.value))}),t}function Fn(i,t){if(te(t))return i;{const r=dr(i,t);return r!=null?new $t(new ye(r)):new $t(i.writeTree_.subtree(t))}}function Su(i){return i.writeTree_.isEmpty()}function $r(i,t){return em(ae(),i.writeTree_,t)}function em(i,t,r){if(t.value!=null)return r.updateChild(i,t.value);{let o=null;return t.children.inorderTraversal((a,c)=>{a===".priority"?(M(c.value!==null,"Priority writes must always be leaf nodes"),o=c.value):r=em(je(i,a),c,r)}),!r.getChild(i).isEmpty()&&o!==null&&(r=r.updateChild(je(i,".priority"),o)),r}}function Ko(i,t){return im(t,i)}function Qw(i,t,r,o,a){M(o>i.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),i.allWrites.push({path:t,snap:r,writeId:o,visible:a}),a&&(i.visibleWrites=Qi(i.visibleWrites,t,r)),i.lastWriteId=o}function Kw(i,t){for(let r=0;r<i.allWrites.length;r++){const o=i.allWrites[r];if(o.writeId===t)return o}return null}function Yw(i,t){const r=i.allWrites.findIndex(p=>p.writeId===t);M(r>=0,"removeWrite called with nonexistent writeId.");const o=i.allWrites[r];i.allWrites.splice(r,1);let a=o.visible,c=!1,h=i.allWrites.length-1;for(;a&&h>=0;){const p=i.allWrites[h];p.visible&&(h>=r&&qw(p,o.path)?a=!1:Wt(o.path,p.path)&&(c=!0)),h--}if(a){if(c)return Xw(i),!0;if(o.snap)i.visibleWrites=Hf(i.visibleWrites,o.path);else{const p=o.children;_t(p,m=>{i.visibleWrites=Hf(i.visibleWrites,je(o.path,m))})}return!0}else return!1}function qw(i,t){if(i.snap)return Wt(i.path,t);for(const r in i.children)if(i.children.hasOwnProperty(r)&&Wt(je(i.path,r),t))return!0;return!1}function Xw(i){i.visibleWrites=tm(i.allWrites,Jw,ae()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function Jw(i){return i.visible}function tm(i,t,r){let o=$t.empty();for(let a=0;a<i.length;++a){const c=i[a];if(t(c)){const h=c.path;let p;if(c.snap)Wt(r,h)?(p=at(r,h),o=Qi(o,p,c.snap)):Wt(h,r)&&(p=at(h,r),o=Qi(o,ae(),c.snap.getChild(p)));else if(c.children){if(Wt(r,h))p=at(r,h),o=Bf(o,p,c.children);else if(Wt(h,r))if(p=at(h,r),te(p))o=Bf(o,ae(),c.children);else{const m=Hr(c.children,Z(p));if(m){const g=m.getChild(ge(p));o=Qi(o,ae(),g)}}}else throw Gr("WriteRecord should have .snap or .children")}}return o}function nm(i,t,r,o,a){if(!o&&!a){const c=dr(i.visibleWrites,t);if(c!=null)return c;{const h=Fn(i.visibleWrites,t);if(Su(h))return r;if(r==null&&!Eu(h,ae()))return null;{const p=r||Q.EMPTY_NODE;return $r(h,p)}}}else{const c=Fn(i.visibleWrites,t);if(!a&&Su(c))return r;if(!a&&r==null&&!Eu(c,ae()))return null;{const h=function(g){return(g.visible||a)&&(!o||!~o.indexOf(g.writeId))&&(Wt(g.path,t)||Wt(t,g.path))},p=tm(i.allWrites,h,t),m=r||Q.EMPTY_NODE;return $r(p,m)}}}function Zw(i,t,r){let o=Q.EMPTY_NODE;const a=dr(i.visibleWrites,t);if(a)return a.isLeafNode()||a.forEachChild(Ne,(c,h)=>{o=o.updateImmediateChild(c,h)}),o;if(r){const c=Fn(i.visibleWrites,t);return r.forEachChild(Ne,(h,p)=>{const m=$r(Fn(c,new he(h)),p);o=o.updateImmediateChild(h,m)}),Wf(c).forEach(h=>{o=o.updateImmediateChild(h.name,h.node)}),o}else{const c=Fn(i.visibleWrites,t);return Wf(c).forEach(h=>{o=o.updateImmediateChild(h.name,h.node)}),o}}function eC(i,t,r,o,a){M(o||a,"Either existingEventSnap or existingServerSnap must exist");const c=je(t,r);if(Eu(i.visibleWrites,c))return null;{const h=Fn(i.visibleWrites,c);return Su(h)?a.getChild(r):$r(h,a.getChild(r))}}function tC(i,t,r,o){const a=je(t,r),c=dr(i.visibleWrites,a);if(c!=null)return c;if(o.isCompleteForChild(r)){const h=Fn(i.visibleWrites,a);return $r(h,o.getNode().getImmediateChild(r))}else return null}function nC(i,t){return dr(i.visibleWrites,t)}function rC(i,t,r,o,a,c,h){let p;const m=Fn(i.visibleWrites,t),g=dr(m,ae());if(g!=null)p=g;else if(r!=null)p=$r(m,r);else return[];if(p=p.withIndex(h),!p.isEmpty()&&!p.isLeafNode()){const S=[],C=h.getCompare(),x=c?p.getReverseIteratorFrom(o,h):p.getIteratorFrom(o,h);let L=x.getNext();for(;L&&S.length<a;)C(L,o)!==0&&S.push(L),L=x.getNext();return S}else return[]}function iC(){return{visibleWrites:$t.empty(),allWrites:[],lastWriteId:-1}}function bo(i,t,r,o){return nm(i.writeTree,i.treePath,t,r,o)}function Gu(i,t){return Zw(i.writeTree,i.treePath,t)}function Vf(i,t,r,o){return eC(i.writeTree,i.treePath,t,r,o)}function zo(i,t){return nC(i.writeTree,je(i.treePath,t))}function sC(i,t,r,o,a,c){return rC(i.writeTree,i.treePath,t,r,o,a,c)}function Qu(i,t,r){return tC(i.writeTree,i.treePath,t,r)}function rm(i,t){return im(je(i.treePath,t),i.writeTree)}function im(i,t){return{treePath:i,writeTree:t}}class oC{constructor(){this.changeMap=new Map}trackChildChange(t){const r=t.type,o=t.childName;M(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),M(o!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(o);if(a){const c=a.type;if(r==="child_added"&&c==="child_removed")this.changeMap.set(o,es(o,t.snapshotNode,a.snapshotNode));else if(r==="child_removed"&&c==="child_added")this.changeMap.delete(o);else if(r==="child_removed"&&c==="child_changed")this.changeMap.set(o,Zi(o,a.oldSnap));else if(r==="child_changed"&&c==="child_added")this.changeMap.set(o,Vr(o,t.snapshotNode));else if(r==="child_changed"&&c==="child_changed")this.changeMap.set(o,es(o,t.snapshotNode,a.oldSnap));else throw Gr("Illegal combination of changes: "+t+" occurred after "+a)}else this.changeMap.set(o,t)}getChanges(){return Array.from(this.changeMap.values())}}class lC{getCompleteChild(t){return null}getChildAfterChild(t,r,o){return null}}const sm=new lC;class Ku{constructor(t,r,o=null){this.writes_=t,this.viewCache_=r,this.optCompleteServerCache_=o}getCompleteChild(t){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(t))return r.getNode().getImmediateChild(t);{const o=this.optCompleteServerCache_!=null?new Un(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qu(this.writes_,t,o)}}getChildAfterChild(t,r,o){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:cr(this.viewCache_),c=sC(this.writes_,a,r,1,o,t);return c.length===0?null:c[0]}}function aC(i){return{filter:i}}function uC(i,t){M(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),M(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function cC(i,t,r,o,a){const c=new oC;let h,p;if(r.type===Vt.OVERWRITE){const g=r;g.source.fromUser?h=ku(i,t,g.path,g.snap,o,a,c):(M(g.source.fromServer,"Unknown source."),p=g.source.tagged||t.serverCache.isFiltered()&&!te(g.path),h=Uo(i,t,g.path,g.snap,o,a,p,c))}else if(r.type===Vt.MERGE){const g=r;g.source.fromUser?h=hC(i,t,g.path,g.children,o,a,c):(M(g.source.fromServer,"Unknown source."),p=g.source.tagged||t.serverCache.isFiltered(),h=Nu(i,t,g.path,g.children,o,a,p,c))}else if(r.type===Vt.ACK_USER_WRITE){const g=r;g.revert?h=mC(i,t,g.path,o,a,c):h=fC(i,t,g.path,g.affectedTree,o,a,c)}else if(r.type===Vt.LISTEN_COMPLETE)h=pC(i,t,r.path,o,c);else throw Gr("Unknown operation type: "+r.type);const m=c.getChanges();return dC(t,h,m),{viewCache:h,changes:m}}function dC(i,t,r){const o=t.eventCache;if(o.isFullyInitialized()){const a=o.getNode().isLeafNode()||o.getNode().isEmpty(),c=Fo(i);(r.length>0||!i.eventCache.isFullyInitialized()||a&&!o.getNode().equals(c)||!o.getNode().getPriority().equals(c.getPriority()))&&r.push(qp(Fo(t)))}}function om(i,t,r,o,a,c){const h=t.eventCache;if(zo(o,r)!=null)return t;{let p,m;if(te(r))if(M(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=cr(t),S=g instanceof Q?g:Q.EMPTY_NODE,C=Gu(o,S);p=i.filter.updateFullNode(t.eventCache.getNode(),C,c)}else{const g=bo(o,cr(t));p=i.filter.updateFullNode(t.eventCache.getNode(),g,c)}else{const g=Z(r);if(g===".priority"){M(zn(r)===1,"Can't have a priority with additional path components");const S=h.getNode();m=t.serverCache.getNode();const C=Vf(o,r,S,m);C!=null?p=i.filter.updatePriority(S,C):p=h.getNode()}else{const S=ge(r);let C;if(h.isCompleteForChild(g)){m=t.serverCache.getNode();const x=Vf(o,r,h.getNode(),m);x!=null?C=h.getNode().getImmediateChild(g).updateChild(S,x):C=h.getNode().getImmediateChild(g)}else C=Qu(o,g,t.serverCache);C!=null?p=i.filter.updateChild(h.getNode(),g,C,S,a,c):p=h.getNode()}}return Gi(t,p,h.isFullyInitialized()||te(r),i.filter.filtersNodes())}}function Uo(i,t,r,o,a,c,h,p){const m=t.serverCache;let g;const S=h?i.filter:i.filter.getIndexedFilter();if(te(r))g=S.updateFullNode(m.getNode(),o,null);else if(S.filtersNodes()&&!m.isFiltered()){const L=m.getNode().updateChild(r,o);g=S.updateFullNode(m.getNode(),L,null)}else{const L=Z(r);if(!m.isCompleteForPath(r)&&zn(r)>1)return t;const O=ge(r),K=m.getNode().getImmediateChild(L).updateChild(O,o);L===".priority"?g=S.updatePriority(m.getNode(),K):g=S.updateChild(m.getNode(),L,K,O,sm,null)}const C=Zp(t,g,m.isFullyInitialized()||te(r),S.filtersNodes()),x=new Ku(a,C,c);return om(i,C,r,a,x,p)}function ku(i,t,r,o,a,c,h){const p=t.eventCache;let m,g;const S=new Ku(a,t,c);if(te(r))g=i.filter.updateFullNode(t.eventCache.getNode(),o,h),m=Gi(t,g,!0,i.filter.filtersNodes());else{const C=Z(r);if(C===".priority")g=i.filter.updatePriority(t.eventCache.getNode(),o),m=Gi(t,g,p.isFullyInitialized(),p.isFiltered());else{const x=ge(r),L=p.getNode().getImmediateChild(C);let O;if(te(x))O=o;else{const V=S.getCompleteChild(C);V!=null?Bp(x)===".priority"&&V.getChild(Wp(x)).isEmpty()?O=V:O=V.updateChild(x,o):O=Q.EMPTY_NODE}if(L.equals(O))m=t;else{const V=i.filter.updateChild(p.getNode(),C,O,x,S,h);m=Gi(t,V,p.isFullyInitialized(),i.filter.filtersNodes())}}}return m}function $f(i,t){return i.eventCache.isCompleteForChild(t)}function hC(i,t,r,o,a,c,h){let p=t;return o.foreach((m,g)=>{const S=je(r,m);$f(t,Z(S))&&(p=ku(i,p,S,g,a,c,h))}),o.foreach((m,g)=>{const S=je(r,m);$f(t,Z(S))||(p=ku(i,p,S,g,a,c,h))}),p}function Gf(i,t,r){return r.foreach((o,a)=>{t=t.updateChild(o,a)}),t}function Nu(i,t,r,o,a,c,h,p){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let m=t,g;te(r)?g=o:g=new ye(null).setTree(r,o);const S=t.serverCache.getNode();return g.children.inorderTraversal((C,x)=>{if(S.hasChild(C)){const L=t.serverCache.getNode().getImmediateChild(C),O=Gf(i,L,x);m=Uo(i,m,new he(C),O,a,c,h,p)}}),g.children.inorderTraversal((C,x)=>{const L=!t.serverCache.isCompleteForChild(C)&&x.value===null;if(!S.hasChild(C)&&!L){const O=t.serverCache.getNode().getImmediateChild(C),V=Gf(i,O,x);m=Uo(i,m,new he(C),V,a,c,h,p)}}),m}function fC(i,t,r,o,a,c,h){if(zo(a,r)!=null)return t;const p=t.serverCache.isFiltered(),m=t.serverCache;if(o.value!=null){if(te(r)&&m.isFullyInitialized()||m.isCompleteForPath(r))return Uo(i,t,r,m.getNode().getChild(r),a,c,p,h);if(te(r)){let g=new ye(null);return m.getNode().forEachChild(Br,(S,C)=>{g=g.set(new he(S),C)}),Nu(i,t,r,g,a,c,p,h)}else return t}else{let g=new ye(null);return o.foreach((S,C)=>{const x=je(r,S);m.isCompleteForPath(x)&&(g=g.set(S,m.getNode().getChild(x)))}),Nu(i,t,r,g,a,c,p,h)}}function pC(i,t,r,o,a){const c=t.serverCache,h=Zp(t,c.getNode(),c.isFullyInitialized()||te(r),c.isFiltered());return om(i,h,r,o,sm,a)}function mC(i,t,r,o,a,c){let h;if(zo(o,r)!=null)return t;{const p=new Ku(o,t,a),m=t.eventCache.getNode();let g;if(te(r)||Z(r)===".priority"){let S;if(t.serverCache.isFullyInitialized())S=bo(o,cr(t));else{const C=t.serverCache.getNode();M(C instanceof Q,"serverChildren would be complete if leaf node"),S=Gu(o,C)}S=S,g=i.filter.updateFullNode(m,S,c)}else{const S=Z(r);let C=Qu(o,S,t.serverCache);C==null&&t.serverCache.isCompleteForChild(S)&&(C=m.getImmediateChild(S)),C!=null?g=i.filter.updateChild(m,S,C,ge(r),p,c):t.eventCache.getNode().hasChild(S)?g=i.filter.updateChild(m,S,Q.EMPTY_NODE,ge(r),p,c):g=m,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(h=bo(o,cr(t)),h.isLeafNode()&&(g=i.filter.updateFullNode(g,h,c)))}return h=t.serverCache.isFullyInitialized()||zo(o,ae())!=null,Gi(t,g,h,i.filter.filtersNodes())}}class gC{constructor(t,r){this.query_=t,this.eventRegistrations_=[];const o=this.query_._queryParams,a=new Hu(o.getIndex()),c=Lw(o);this.processor_=aC(c);const h=r.serverCache,p=r.eventCache,m=a.updateFullNode(Q.EMPTY_NODE,h.getNode(),null),g=c.updateFullNode(Q.EMPTY_NODE,p.getNode(),null),S=new Un(m,h.isFullyInitialized(),a.filtersNodes()),C=new Un(g,p.isFullyInitialized(),c.filtersNodes());this.viewCache_=Qo(C,S),this.eventGenerator_=new Hw(this.query_)}get query(){return this.query_}}function _C(i){return i.viewCache_.serverCache.getNode()}function vC(i){return Fo(i.viewCache_)}function yC(i,t){const r=cr(i.viewCache_);return r&&(i.query._queryParams.loadsAllData()||!te(t)&&!r.getImmediateChild(Z(t)).isEmpty())?r.getChild(t):null}function Qf(i){return i.eventRegistrations_.length===0}function wC(i,t){i.eventRegistrations_.push(t)}function Kf(i,t,r){const o=[];if(r){M(t==null,"A cancel should cancel all event registrations.");const a=i.query._path;i.eventRegistrations_.forEach(c=>{const h=c.createCancelEvent(r,a);h&&o.push(h)})}if(t){let a=[];for(let c=0;c<i.eventRegistrations_.length;++c){const h=i.eventRegistrations_[c];if(!h.matches(t))a.push(h);else if(t.hasAnyCallback()){a=a.concat(i.eventRegistrations_.slice(c+1));break}}i.eventRegistrations_=a}else i.eventRegistrations_=[];return o}function Yf(i,t,r,o){t.type===Vt.MERGE&&t.source.queryId!==null&&(M(cr(i.viewCache_),"We should always have a full cache before handling merges"),M(Fo(i.viewCache_),"Missing event cache, even though we have a server cache"));const a=i.viewCache_,c=cC(i.processor_,a,t,r,o);return uC(i.processor_,c.viewCache),M(c.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,lm(i,c.changes,c.viewCache.eventCache.getNode(),null)}function CC(i,t){const r=i.viewCache_.eventCache,o=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Ne,(c,h)=>{o.push(Vr(c,h))}),r.isFullyInitialized()&&o.push(qp(r.getNode())),lm(i,o,r.getNode(),t)}function lm(i,t,r,o){const a=o?[o]:i.eventRegistrations_;return Ww(i.eventGenerator_,t,r,a)}let Bo;class am{constructor(){this.views=new Map}}function EC(i){M(!Bo,"__referenceConstructor has already been defined"),Bo=i}function SC(){return M(Bo,"Reference.ts has not been loaded"),Bo}function kC(i){return i.views.size===0}function Yu(i,t,r,o){const a=t.source.queryId;if(a!==null){const c=i.views.get(a);return M(c!=null,"SyncTree gave us an op for an invalid query."),Yf(c,t,r,o)}else{let c=[];for(const h of i.views.values())c=c.concat(Yf(h,t,r,o));return c}}function um(i,t,r,o,a){const c=t._queryIdentifier,h=i.views.get(c);if(!h){let p=bo(r,a?o:null),m=!1;p?m=!0:o instanceof Q?(p=Gu(r,o),m=!1):(p=Q.EMPTY_NODE,m=!1);const g=Qo(new Un(p,m,!1),new Un(o,a,!1));return new gC(t,g)}return h}function NC(i,t,r,o,a,c){const h=um(i,t,o,a,c);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,h),wC(h,r),CC(h,r)}function xC(i,t,r,o){const a=t._queryIdentifier,c=[];let h=[];const p=Bn(i);if(a==="default")for(const[m,g]of i.views.entries())h=h.concat(Kf(g,r,o)),Qf(g)&&(i.views.delete(m),g.query._queryParams.loadsAllData()||c.push(g.query));else{const m=i.views.get(a);m&&(h=h.concat(Kf(m,r,o)),Qf(m)&&(i.views.delete(a),m.query._queryParams.loadsAllData()||c.push(m.query)))}return p&&!Bn(i)&&c.push(new(SC())(t._repo,t._path)),{removed:c,events:h}}function cm(i){const t=[];for(const r of i.views.values())r.query._queryParams.loadsAllData()||t.push(r);return t}function bn(i,t){let r=null;for(const o of i.views.values())r=r||yC(o,t);return r}function dm(i,t){if(t._queryParams.loadsAllData())return Yo(i);{const o=t._queryIdentifier;return i.views.get(o)}}function hm(i,t){return dm(i,t)!=null}function Bn(i){return Yo(i)!=null}function Yo(i){for(const t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Ho;function IC(i){M(!Ho,"__referenceConstructor has already been defined"),Ho=i}function TC(){return M(Ho,"Reference.ts has not been loaded"),Ho}let PC=1;class qf{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ye(null),this.pendingWriteTree_=iC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fm(i,t,r,o,a){return Qw(i.pendingWriteTree_,t,r,o,a),a?ds(i,new ur(Jp(),t,r)):[]}function lr(i,t,r=!1){const o=Kw(i.pendingWriteTree_,t);if(Yw(i.pendingWriteTree_,t)){let c=new ye(null);return o.snap!=null?c=c.set(ae(),!0):_t(o.children,h=>{c=c.set(new he(h),!0)}),ds(i,new jo(o.path,c,r))}else return[]}function cs(i,t,r){return ds(i,new ur(Vu(),t,r))}function RC(i,t,r){const o=ye.fromObject(r);return ds(i,new rs(Vu(),t,o))}function DC(i,t){return ds(i,new ns(Vu(),t))}function AC(i,t,r){const o=Xu(i,r);if(o){const a=Ju(o),c=a.path,h=a.queryId,p=at(c,t),m=new ns($u(h),p);return Zu(i,c,m)}else return[]}function Wo(i,t,r,o,a=!1){const c=t._path,h=i.syncPointTree_.get(c);let p=[];if(h&&(t._queryIdentifier==="default"||hm(h,t))){const m=xC(h,t,r,o);kC(h)&&(i.syncPointTree_=i.syncPointTree_.remove(c));const g=m.removed;if(p=m.events,!a){const S=g.findIndex(x=>x._queryParams.loadsAllData())!==-1,C=i.syncPointTree_.findOnPath(c,(x,L)=>Bn(L));if(S&&!C){const x=i.syncPointTree_.subtree(c);if(!x.isEmpty()){const L=LC(x);for(let O=0;O<L.length;++O){const V=L[O],K=V.query,Pe=_m(i,V);i.listenProvider_.startListening(Ki(K),is(i,K),Pe.hashFn,Pe.onComplete)}}}!C&&g.length>0&&!o&&(S?i.listenProvider_.stopListening(Ki(t),null):g.forEach(x=>{const L=i.queryToTagMap.get(qo(x));i.listenProvider_.stopListening(Ki(x),L)}))}jC(i,g)}return p}function pm(i,t,r,o){const a=Xu(i,o);if(a!=null){const c=Ju(a),h=c.path,p=c.queryId,m=at(h,t),g=new ur($u(p),m,r);return Zu(i,h,g)}else return[]}function MC(i,t,r,o){const a=Xu(i,o);if(a){const c=Ju(a),h=c.path,p=c.queryId,m=at(h,t),g=ye.fromObject(r),S=new rs($u(p),m,g);return Zu(i,h,S)}else return[]}function xu(i,t,r,o=!1){const a=t._path;let c=null,h=!1;i.syncPointTree_.foreachOnPath(a,(x,L)=>{const O=at(x,a);c=c||bn(L,O),h=h||Bn(L)});let p=i.syncPointTree_.get(a);p?(h=h||Bn(p),c=c||bn(p,ae())):(p=new am,i.syncPointTree_=i.syncPointTree_.set(a,p));let m;c!=null?m=!0:(m=!1,c=Q.EMPTY_NODE,i.syncPointTree_.subtree(a).foreachChild((L,O)=>{const V=bn(O,ae());V&&(c=c.updateImmediateChild(L,V))}));const g=hm(p,t);if(!g&&!t._queryParams.loadsAllData()){const x=qo(t);M(!i.queryToTagMap.has(x),"View does not exist, but we have a tag");const L=FC();i.queryToTagMap.set(x,L),i.tagToQueryMap.set(L,x)}const S=Ko(i.pendingWriteTree_,a);let C=NC(p,t,r,S,c,m);if(!g&&!h&&!o){const x=dm(p,t);C=C.concat(bC(i,t,x))}return C}function qu(i,t,r){const a=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(t,(h,p)=>{const m=at(h,t),g=bn(p,m);if(g)return g});return nm(a,t,c,r,!0)}function OC(i,t){const r=t._path;let o=null;i.syncPointTree_.foreachOnPath(r,(g,S)=>{const C=at(g,r);o=o||bn(S,C)});let a=i.syncPointTree_.get(r);a?o=o||bn(a,ae()):(a=new am,i.syncPointTree_=i.syncPointTree_.set(r,a));const c=o!=null,h=c?new Un(o,!0,!1):null,p=Ko(i.pendingWriteTree_,t._path),m=um(a,t,p,c?h.getNode():Q.EMPTY_NODE,c);return vC(m)}function ds(i,t){return mm(t,i.syncPointTree_,null,Ko(i.pendingWriteTree_,ae()))}function mm(i,t,r,o){if(te(i.path))return gm(i,t,r,o);{const a=t.get(ae());r==null&&a!=null&&(r=bn(a,ae()));let c=[];const h=Z(i.path),p=i.operationForChild(h),m=t.children.get(h);if(m&&p){const g=r?r.getImmediateChild(h):null,S=rm(o,h);c=c.concat(mm(p,m,g,S))}return a&&(c=c.concat(Yu(a,i,o,r))),c}}function gm(i,t,r,o){const a=t.get(ae());r==null&&a!=null&&(r=bn(a,ae()));let c=[];return t.children.inorderTraversal((h,p)=>{const m=r?r.getImmediateChild(h):null,g=rm(o,h),S=i.operationForChild(h);S&&(c=c.concat(gm(S,p,m,g)))}),a&&(c=c.concat(Yu(a,i,o,r))),c}function _m(i,t){const r=t.query,o=is(i,r);return{hashFn:()=>(_C(t)||Q.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return o?AC(i,r._path,o):DC(i,r._path);{const c=Oy(a,r);return Wo(i,r,null,c)}}}}function is(i,t){const r=qo(t);return i.queryToTagMap.get(r)}function qo(i){return i._path.toString()+"$"+i._queryIdentifier}function Xu(i,t){return i.tagToQueryMap.get(t)}function Ju(i){const t=i.indexOf("$");return M(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new he(i.substr(0,t))}}function Zu(i,t,r){const o=i.syncPointTree_.get(t);M(o,"Missing sync point for query tag that we're tracking");const a=Ko(i.pendingWriteTree_,t);return Yu(o,r,a,null)}function LC(i){return i.fold((t,r,o)=>{if(r&&Bn(r))return[Yo(r)];{let a=[];return r&&(a=cm(r)),_t(o,(c,h)=>{a=a.concat(h)}),a}})}function Ki(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(TC())(i._repo,i._path):i}function jC(i,t){for(let r=0;r<t.length;++r){const o=t[r];if(!o._queryParams.loadsAllData()){const a=qo(o),c=i.queryToTagMap.get(a);i.queryToTagMap.delete(a),i.tagToQueryMap.delete(c)}}}function FC(){return PC++}function bC(i,t,r){const o=t._path,a=is(i,t),c=_m(i,r),h=i.listenProvider_.startListening(Ki(t),a,c.hashFn,c.onComplete),p=i.syncPointTree_.subtree(o);if(a)M(!Bn(p.value),"If we're adding a query, it shouldn't be shadowed");else{const m=p.fold((g,S,C)=>{if(!te(g)&&S&&Bn(S))return[Yo(S).query];{let x=[];return S&&(x=x.concat(cm(S).map(L=>L.query))),_t(C,(L,O)=>{x=x.concat(O)}),x}});for(let g=0;g<m.length;++g){const S=m[g];i.listenProvider_.stopListening(Ki(S),is(i,S))}}return h}class ec{constructor(t){this.node_=t}getImmediateChild(t){const r=this.node_.getImmediateChild(t);return new ec(r)}node(){return this.node_}}class tc{constructor(t,r){this.syncTree_=t,this.path_=r}getImmediateChild(t){const r=je(this.path_,t);return new tc(this.syncTree_,r)}node(){return qu(this.syncTree_,this.path_)}}const zC=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},Xf=function(i,t,r){if(!i||typeof i!="object")return i;if(M(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return UC(i[".sv"],t,r);if(typeof i[".sv"]=="object")return BC(i[".sv"],t);M(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},UC=function(i,t,r){if(i==="timestamp")return r.timestamp;M(!1,"Unexpected server value: "+i)},BC=function(i,t,r){i.hasOwnProperty("increment")||M(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const o=i.increment;typeof o!="number"&&M(!1,"Unexpected increment value: "+o);const a=t.node();if(M(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return o;const h=a.getValue();return typeof h!="number"?o:h+o},HC=function(i,t,r,o){return nc(t,new tc(r,i),o)},vm=function(i,t,r){return nc(i,new ec(t),r)};function nc(i,t,r){const o=i.getPriority().val(),a=Xf(o,t.getImmediateChild(".priority"),r);let c;if(i.isLeafNode()){const h=i,p=Xf(h.getValue(),t,r);return p!==h.getValue()||a!==h.getPriority().val()?new We(p,$e(a)):i}else{const h=i;return c=h,a!==h.getPriority().val()&&(c=c.updatePriority(new We(a))),h.forEachChild(Ne,(p,m)=>{const g=nc(m,t.getImmediateChild(p),r);g!==m&&(c=c.updateImmediateChild(p,g))}),c}}class rc{constructor(t="",r=null,o={children:{},childCount:0}){this.name=t,this.parent=r,this.node=o}}function ic(i,t){let r=t instanceof he?t:new he(t),o=i,a=Z(r);for(;a!==null;){const c=Hr(o.node.children,a)||{children:{},childCount:0};o=new rc(a,o,c),r=ge(r),a=Z(r)}return o}function qr(i){return i.node.value}function ym(i,t){i.node.value=t,Iu(i)}function wm(i){return i.node.childCount>0}function WC(i){return qr(i)===void 0&&!wm(i)}function Xo(i,t){_t(i.node.children,(r,o)=>{t(new rc(r,i,o))})}function Cm(i,t,r,o){r&&t(i),Xo(i,a=>{Cm(a,t,!0)})}function VC(i,t,r){let o=i.parent;for(;o!==null;){if(t(o))return!0;o=o.parent}return!1}function hs(i){return new he(i.parent===null?i.name:hs(i.parent)+"/"+i.name)}function Iu(i){i.parent!==null&&$C(i.parent,i.name,i)}function $C(i,t,r){const o=WC(r),a=fn(i.node.children,t);o&&a?(delete i.node.children[t],i.node.childCount--,Iu(i)):!o&&!a&&(i.node.children[t]=r.node,i.node.childCount++,Iu(i))}const GC=/[\[\].#$\/\u0000-\u001F\u007F]/,QC=/[\[\].#$\u0000-\u001F\u007F]/,lu=10*1024*1024,Em=function(i){return typeof i=="string"&&i.length!==0&&!GC.test(i)},Sm=function(i){return typeof i=="string"&&i.length!==0&&!QC.test(i)},KC=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Sm(i)},YC=function(i,t,r,o){sc(Mu(i,"value"),t,r)},sc=function(i,t,r){const o=r instanceof he?new fw(r,i):r;if(t===void 0)throw new Error(i+"contains undefined "+sr(o));if(typeof t=="function")throw new Error(i+"contains a function "+sr(o)+" with contents = "+t.toString());if(wp(t))throw new Error(i+"contains "+t.toString()+" "+sr(o));if(typeof t=="string"&&t.length>lu/3&&$o(t)>lu)throw new Error(i+"contains a string greater than "+lu+" utf8 bytes "+sr(o)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let a=!1,c=!1;if(_t(t,(h,p)=>{if(h===".value")a=!0;else if(h!==".priority"&&h!==".sv"&&(c=!0,!Em(h)))throw new Error(i+" contains an invalid key ("+h+") "+sr(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);pw(o,h),sc(i,p,o),mw(o)}),a&&c)throw new Error(i+' contains ".value" child '+sr(o)+" in addition to actual children.")}},km=function(i,t,r,o){if(!Sm(r))throw new Error(Mu(i,t)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},qC=function(i,t,r,o){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),km(i,t,r)},XC=function(i,t){if(Z(t)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},JC=function(i,t){const r=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Em(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!KC(r))throw new Error(Mu(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class ZC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function oc(i,t){let r=null;for(let o=0;o<t.length;o++){const a=t[o],c=a.getPath();r!==null&&!zu(c,r.path)&&(i.eventLists_.push(r),r=null),r===null&&(r={events:[],path:c}),r.events.push(a)}r&&i.eventLists_.push(r)}function Nm(i,t,r){oc(i,r),xm(i,o=>zu(o,t))}function Jt(i,t,r){oc(i,r),xm(i,o=>Wt(o,t)||Wt(t,o))}function xm(i,t){i.recursionDepth_++;let r=!0;for(let o=0;o<i.eventLists_.length;o++){const a=i.eventLists_[o];if(a){const c=a.path;t(c)?(e0(i.eventLists_[o]),i.eventLists_[o]=null):r=!1}}r&&(i.eventLists_=[]),i.recursionDepth_--}function e0(i){for(let t=0;t<i.events.length;t++){const r=i.events[t];if(r!==null){i.events[t]=null;const o=r.getEventRunner();Vi&&rt("event: "+r.toString()),Yr(o)}}}const t0="repo_interrupt",n0=25;class r0{constructor(t,r,o,a){this.repoInfo_=t,this.forceRestClient_=r,this.authTokenProvider_=o,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ZC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lo(),this.transactionQueueTree_=new rc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function i0(i,t,r){if(i.stats_=Fu(i.repoInfo_),i.forceRestClient_||by())i.server_=new Oo(i.repoInfo_,(o,a,c,h)=>{Jf(i,o,a,c,h)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>Zf(i,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Le(r)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}i.persistentConnection_=new cn(i.repoInfo_,t,(o,a,c,h)=>{Jf(i,o,a,c,h)},o=>{Zf(i,o)},o=>{o0(i,o)},i.authTokenProvider_,i.appCheckProvider_,r),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(o=>{i.server_.refreshAuthToken(o)}),i.appCheckProvider_.addTokenChangeListener(o=>{i.server_.refreshAppCheckToken(o.token)}),i.statsReporter_=Wy(i.repoInfo_,()=>new Bw(i.stats_,i.server_)),i.infoData_=new jw,i.infoSyncTree_=new qf({startListening:(o,a,c,h)=>{let p=[];const m=i.infoData_.getNode(o._path);return m.isEmpty()||(p=cs(i.infoSyncTree_,o._path,m),setTimeout(()=>{h("ok")},0)),p},stopListening:()=>{}}),ac(i,"connected",!1),i.serverSyncTree_=new qf({startListening:(o,a,c,h)=>(i.server_.listen(o,c,a,(p,m)=>{const g=h(p,m);Jt(i.eventQueue_,o._path,g)}),[]),stopListening:(o,a)=>{i.server_.unlisten(o,a)}})}function s0(i){const r=i.infoData_.getNode(new he(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function lc(i){return zC({timestamp:s0(i)})}function Jf(i,t,r,o,a){i.dataUpdateCount++;const c=new he(t);r=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,r):r;let h=[];if(a)if(o){const m=To(r,g=>$e(g));h=MC(i.serverSyncTree_,c,m,a)}else{const m=$e(r);h=pm(i.serverSyncTree_,c,m,a)}else if(o){const m=To(r,g=>$e(g));h=RC(i.serverSyncTree_,c,m)}else{const m=$e(r);h=cs(i.serverSyncTree_,c,m)}let p=c;h.length>0&&(p=Zo(i,c)),Jt(i.eventQueue_,p,h)}function Zf(i,t){ac(i,"connected",t),t===!1&&u0(i)}function o0(i,t){_t(t,(r,o)=>{ac(i,r,o)})}function ac(i,t,r){const o=new he("/.info/"+t),a=$e(r);i.infoData_.updateSnapshot(o,a);const c=cs(i.infoSyncTree_,o,a);Jt(i.eventQueue_,o,c)}function Im(i){return i.nextWriteId_++}function l0(i,t,r){const o=OC(i.serverSyncTree_,t);return o!=null?Promise.resolve(o):i.server_.get(t).then(a=>{const c=$e(a).withIndex(t._queryParams.getIndex());xu(i.serverSyncTree_,t,r,!0);let h;if(t._queryParams.loadsAllData())h=cs(i.serverSyncTree_,t._path,c);else{const p=is(i.serverSyncTree_,t);h=pm(i.serverSyncTree_,t._path,c,p)}return Jt(i.eventQueue_,t._path,h),Wo(i.serverSyncTree_,t,r,null,!0),c},a=>(Jo(i,"get for query "+Le(t)+" failed: "+a),Promise.reject(new Error(a))))}function a0(i,t,r,o,a){Jo(i,"set",{path:t.toString(),value:r,priority:o});const c=lc(i),h=$e(r,o),p=qu(i.serverSyncTree_,t),m=vm(h,p,c),g=Im(i),S=fm(i.serverSyncTree_,t,m,g,!0);oc(i.eventQueue_,S),i.server_.put(t.toString(),h.val(!0),(x,L)=>{const O=x==="ok";O||gt("set at "+t+" failed: "+x);const V=lr(i.serverSyncTree_,g,!O);Jt(i.eventQueue_,t,V),f0(i,a,x,L)});const C=Am(i,t);Zo(i,C),Jt(i.eventQueue_,C,[])}function u0(i){Jo(i,"onDisconnectEvents");const t=lc(i),r=Lo();Cu(i.onDisconnect_,ae(),(a,c)=>{const h=HC(a,c,i.serverSyncTree_,t);Xp(r,a,h)});let o=[];Cu(r,ae(),(a,c)=>{o=o.concat(cs(i.serverSyncTree_,a,c));const h=Am(i,a);Zo(i,h)}),i.onDisconnect_=Lo(),Jt(i.eventQueue_,ae(),o)}function c0(i,t,r){let o;Z(t._path)===".info"?o=xu(i.infoSyncTree_,t,r):o=xu(i.serverSyncTree_,t,r),Nm(i.eventQueue_,t._path,o)}function d0(i,t,r){let o;Z(t._path)===".info"?o=Wo(i.infoSyncTree_,t,r):o=Wo(i.serverSyncTree_,t,r),Nm(i.eventQueue_,t._path,o)}function h0(i){i.persistentConnection_&&i.persistentConnection_.interrupt(t0)}function Jo(i,...t){let r="";i.persistentConnection_&&(r=i.persistentConnection_.id+":"),rt(r,...t)}function f0(i,t,r,o){t&&Yr(()=>{if(r==="ok")t(null);else{const a=(r||"error").toUpperCase();let c=a;o&&(c+=": "+o);const h=new Error(c);h.code=a,t(h)}})}function Tm(i,t,r){return qu(i.serverSyncTree_,t,r)||Q.EMPTY_NODE}function uc(i,t=i.transactionQueueTree_){if(t||el(i,t),qr(t)){const r=Rm(i,t);M(r.length>0,"Sending zero length transaction queue"),r.every(a=>a.status===0)&&p0(i,hs(t),r)}else wm(t)&&Xo(t,r=>{uc(i,r)})}function p0(i,t,r){const o=r.map(g=>g.currentWriteId),a=Tm(i,t,o);let c=a;const h=a.hash();for(let g=0;g<r.length;g++){const S=r[g];M(S.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const C=at(t,S.path);c=c.updateChild(C,S.currentOutputSnapshotRaw)}const p=c.val(!0),m=t;i.server_.put(m.toString(),p,g=>{Jo(i,"transaction put response",{path:m.toString(),status:g});let S=[];if(g==="ok"){const C=[];for(let x=0;x<r.length;x++)r[x].status=2,S=S.concat(lr(i.serverSyncTree_,r[x].currentWriteId)),r[x].onComplete&&C.push(()=>r[x].onComplete(null,!0,r[x].currentOutputSnapshotResolved)),r[x].unwatcher();el(i,ic(i.transactionQueueTree_,t)),uc(i,i.transactionQueueTree_),Jt(i.eventQueue_,t,S);for(let x=0;x<C.length;x++)Yr(C[x])}else{if(g==="datastale")for(let C=0;C<r.length;C++)r[C].status===3?r[C].status=4:r[C].status=0;else{gt("transaction at "+m.toString()+" failed: "+g);for(let C=0;C<r.length;C++)r[C].status=4,r[C].abortReason=g}Zo(i,t)}},h)}function Zo(i,t){const r=Pm(i,t),o=hs(r),a=Rm(i,r);return m0(i,a,o),o}function m0(i,t,r){if(t.length===0)return;const o=[];let a=[];const h=t.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<t.length;p++){const m=t[p],g=at(r,m.path);let S=!1,C;if(M(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)S=!0,C=m.abortReason,a=a.concat(lr(i.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=n0)S=!0,C="maxretry",a=a.concat(lr(i.serverSyncTree_,m.currentWriteId,!0));else{const x=Tm(i,m.path,h);m.currentInputSnapshot=x;const L=t[p].update(x.val());if(L!==void 0){sc("transaction failed: Data returned ",L,m.path);let O=$e(L);typeof L=="object"&&L!=null&&fn(L,".priority")||(O=O.updatePriority(x.getPriority()));const K=m.currentWriteId,Pe=lc(i),De=vm(O,x,Pe);m.currentOutputSnapshotRaw=O,m.currentOutputSnapshotResolved=De,m.currentWriteId=Im(i),h.splice(h.indexOf(K),1),a=a.concat(fm(i.serverSyncTree_,m.path,De,m.currentWriteId,m.applyLocally)),a=a.concat(lr(i.serverSyncTree_,K,!0))}else S=!0,C="nodata",a=a.concat(lr(i.serverSyncTree_,m.currentWriteId,!0))}Jt(i.eventQueue_,r,a),a=[],S&&(t[p].status=2,(function(x){setTimeout(x,Math.floor(0))})(t[p].unwatcher),t[p].onComplete&&(C==="nodata"?o.push(()=>t[p].onComplete(null,!1,t[p].currentInputSnapshot)):o.push(()=>t[p].onComplete(new Error(C),!1,null))))}el(i,i.transactionQueueTree_);for(let p=0;p<o.length;p++)Yr(o[p]);uc(i,i.transactionQueueTree_)}function Pm(i,t){let r,o=i.transactionQueueTree_;for(r=Z(t);r!==null&&qr(o)===void 0;)o=ic(o,r),t=ge(t),r=Z(t);return o}function Rm(i,t){const r=[];return Dm(i,t,r),r.sort((o,a)=>o.order-a.order),r}function Dm(i,t,r){const o=qr(t);if(o)for(let a=0;a<o.length;a++)r.push(o[a]);Xo(t,a=>{Dm(i,a,r)})}function el(i,t){const r=qr(t);if(r){let o=0;for(let a=0;a<r.length;a++)r[a].status!==2&&(r[o]=r[a],o++);r.length=o,ym(t,r.length>0?r:void 0)}Xo(t,o=>{el(i,o)})}function Am(i,t){const r=hs(Pm(i,t)),o=ic(i.transactionQueueTree_,t);return VC(o,a=>{au(i,a)}),au(i,o),Cm(o,a=>{au(i,a)}),r}function au(i,t){const r=qr(t);if(r){const o=[];let a=[],c=-1;for(let h=0;h<r.length;h++)r[h].status===3||(r[h].status===1?(M(c===h-1,"All SENT items should be at beginning of queue."),c=h,r[h].status=3,r[h].abortReason="set"):(M(r[h].status===0,"Unexpected transaction status in abort"),r[h].unwatcher(),a=a.concat(lr(i.serverSyncTree_,r[h].currentWriteId,!0)),r[h].onComplete&&o.push(r[h].onComplete.bind(null,new Error("set"),!1,null))));c===-1?ym(t,void 0):r.length=c+1,Jt(i.eventQueue_,hs(t),a);for(let h=0;h<o.length;h++)Yr(o[h])}}function g0(i){let t="";const r=i.split("/");for(let o=0;o<r.length;o++)if(r[o].length>0){let a=r[o];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}t+="/"+a}return t}function _0(i){const t={};i.charAt(0)==="?"&&(i=i.substring(1));for(const r of i.split("&")){if(r.length===0)continue;const o=r.split("=");o.length===2?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):gt(`Invalid query segment '${r}' in query '${i}'`)}return t}const ep=function(i,t){const r=v0(i),o=r.namespace;r.domain==="firebase.com"&&hn(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&r.domain!=="localhost"&&hn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||Py();const a=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new Ap(r.host,r.secure,o,a,t,"",o!==r.subdomain),path:new he(r.pathString)}},v0=function(i){let t="",r="",o="",a="",c="",h=!0,p="https",m=443;if(typeof i=="string"){let g=i.indexOf("//");g>=0&&(p=i.substring(0,g-1),i=i.substring(g+2));let S=i.indexOf("/");S===-1&&(S=i.length);let C=i.indexOf("?");C===-1&&(C=i.length),t=i.substring(0,Math.min(S,C)),S<C&&(a=g0(i.substring(S,C)));const x=_0(i.substring(Math.min(i.length,C)));g=t.indexOf(":"),g>=0?(h=p==="https"||p==="wss",m=parseInt(t.substring(g+1),10)):g=t.length;const L=t.slice(0,g);if(L.toLowerCase()==="localhost")r="localhost";else if(L.split(".").length<=2)r=L;else{const O=t.indexOf(".");o=t.substring(0,O).toLowerCase(),r=t.substring(O+1),c=o}"ns"in x&&(c=x.ns)}return{host:t,port:m,domain:r,subdomain:o,secure:h,scheme:p,pathString:a,namespace:c}};class y0{constructor(t,r,o,a){this.eventType=t,this.eventRegistration=r,this.snapshot=o,this.prevName=a}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Le(this.snapshot.exportVal())}}class w0{constructor(t,r,o){this.eventRegistration=t,this.error=r,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Mm{constructor(t,r){this.snapshotCallback=t,this.cancelCallback=r}onValue(t,r){this.snapshotCallback.call(null,t,r)}onCancel(t){return M(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class cc{constructor(t,r,o,a){this._repo=t,this._path=r,this._queryParams=o,this._orderByCalled=a}get key(){return te(this._path)?null:Bp(this._path)}get ref(){return new pn(this._repo,this._path)}get _queryIdentifier(){const t=zf(this._queryParams),r=Lu(t);return r==="{}"?"default":r}get _queryObject(){return zf(this._queryParams)}isEqual(t){if(t=Qr(t),!(t instanceof cc))return!1;const r=this._repo===t._repo,o=zu(this._path,t._path),a=this._queryIdentifier===t._queryIdentifier;return r&&o&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+hw(this._path)}}class pn extends cc{constructor(t,r){super(t,r,new Wu,!1)}get parent(){const t=Wp(this._path);return t===null?null:new pn(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class ss{constructor(t,r,o){this._node=t,this.ref=r,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const r=new he(t),o=Tu(this.ref,t);return new ss(this._node.getChild(r),o,Ne)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,a)=>t(new ss(a,Tu(this.ref,o),Ne)))}hasChild(t){const r=new he(t);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function C0(i,t){return i=Qr(i),i._checkNotDeleted("ref"),t!==void 0?Tu(i._root,t):i._root}function Tu(i,t){return i=Qr(i),Z(i._path)===null?qC("child","path",t):km("child","path",t),new pn(i._repo,je(i._path,t))}function Ge(i,t){i=Qr(i),XC("set",i._path),YC("set",t,i._path);const r=new Vo;return a0(i._repo,i._path,t,null,r.wrapCallback(()=>{})),r.promise}function Xe(i){i=Qr(i);const t=new Mm(()=>{}),r=new tl(t);return l0(i._repo,i,r).then(o=>new ss(o,new pn(i._repo,i._path),i._queryParams.getIndex()))}class tl{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,r){const o=r._queryParams.getIndex();return new y0("value",this,new ss(t.snapshotNode,new pn(r._repo,r._path),o))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,r){return this.callbackContext.hasCancelCallback?new w0(this,t,r):null}matches(t){return t instanceof tl?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function E0(i,t,r,o,a){const c=new Mm(r,void 0),h=new tl(c);return c0(i._repo,i,h),()=>d0(i._repo,i,h)}function S0(i,t,r,o){return E0(i,"value",t)}EC(pn);IC(pn);const k0="FIREBASE_DATABASE_EMULATOR_HOST",Pu={};let N0=!1;function x0(i,t,r,o){i.repoInfo_=new Ap(`${t}:${r}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),o&&(i.authTokenProvider_=o)}function I0(i,t,r,o,a){let c=o||i.options.databaseURL;c===void 0&&(i.options.projectId||hn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rt("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let h=ep(c,a),p=h.repoInfo,m;typeof process<"u"&&Cf&&(m=Cf[k0]),m?(c=`http://${m}?ns=${p.namespace}`,h=ep(c,a),p=h.repoInfo):h.repoInfo.secure;const g=new Uy(i.name,i.options,t);JC("Invalid Firebase Database URL",h),te(h.path)||hn("Database URL must point to the root of a Firebase Database (not including a child path).");const S=P0(p,i,g,new zy(i.name,r));return new R0(S,i)}function T0(i,t){const r=Pu[t];(!r||r[i.key]!==i)&&hn(`Database ${t}(${i.repoInfo_}) has already been deleted.`),h0(i),delete r[i.key]}function P0(i,t,r,o){let a=Pu[t.name];a||(a={},Pu[t.name]=a);let c=a[i.toURLString()];return c&&hn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new r0(i,N0,r,o),a[i.toURLString()]=c,c}class R0{constructor(t,r){this._repoInternal=t,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(i0(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pn(this._repo,ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(T0(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&hn("Cannot call "+t+" on a deleted database.")}}function D0(i=dy(),t){const r=ly(i,"database").getImmediate({identifier:t});if(!r._instanceStarted){const o=q_("database");o&&A0(r,...o)}return r}function A0(i,t,r,o={}){i=Qr(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&hn("Cannot call useEmulator() after instance has already been initialized.");const a=i._repoInternal;let c;if(a.repoInfo_.nodeAdmin)o.mockUserToken&&hn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new xo(xo.OWNER);else if(o.mockUserToken){const h=typeof o.mockUserToken=="string"?o.mockUserToken:X_(o.mockUserToken,i.app.options.projectId);c=new xo(h)}x0(a,t,r,c)}function M0(i){Sy(cy),Ro(new qi("database",(t,{instanceIdentifier:r})=>{const o=t.getProvider("app").getImmediate(),a=t.getProvider("auth-internal"),c=t.getProvider("app-check-internal");return I0(o,a,c,r)},"PUBLIC").setMultipleInstances(!0)),zr(Ef,Sf,i),zr(Ef,Sf,"esm2017")}cn.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};cn.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};M0();const O0=[{type:"Action",title:"Skullduggery",description:"Take 1 Gold from another player",count:4},{type:"Action",title:"Hard Labour",cost:"1 Damage",description:"Gain 2 Gold",count:4},{type:"Action",title:"Sneaky Stab",description:"Take an adventure, reducing it's power by 1",count:5},{type:"Action",title:"Scout",description:"Discard up to 2 Adventures from the row and replace them",count:4},{type:"Action",title:"Espionage",description:"Look at another player's hand and take 1 card",count:2},{type:"Action",title:"Sabotage",description:"Target player loses 1 Health, 1 Gold, and discards 1 Card",count:2},{type:"Item",title:"Trusty Dagger",cost:"2 Gold",description:"1 Power",durability:1,count:4},{type:"Item",title:"Battle Axe",cost:"5 Gold",description:"2 Power",durability:1,count:3},{type:"Item",title:"Sword",cost:"10 Gold",description:"3 Power",durability:1,count:2},{type:"Item",title:"Magic Crystal",cost:"2 Gold",description:"1 Max Mana",durability:1,count:4},{type:"Item",title:"Arcane Amulet",cost:"5 Gold",description:"2 Max Mana",durability:1,count:3},{type:"Item",title:"Wizard Staff",cost:"10 Gold",description:"3 Max Mana",durability:1,count:2},{type:"Item",title:"Leather Belt",cost:"2 Gold",description:"1 Max Health",durability:1,count:4},{type:"Item",title:"Helm",cost:"5 Gold",description:"2 Max Health",durability:1,count:3},{type:"Item",title:"Cuirass",cost:"8 Gold",description:"3 Max Health",durability:1,count:2},{type:"Item",title:"Fleet Footed Boots",cost:"3 Gold",description:"1 Stamina",durability:1,count:4},{type:"Item",title:"Rogue's Cowl",cost:"6 Gold",description:"2 Stamina",durability:1,count:3},{type:"Spell",title:"Magic Missile",cost:"1 Mana",description:"Take an adventure, reducing it's power by 2",count:3},{type:"Spell",title:"Divination",cost:"1 Mana",description:"Draw 2 Cards",count:3},{type:"Spell",title:"Transmute",cost:"2 Mana",description:"Destroy an Item. It's owner receives Gold equal to half it's value, rounded down",count:2},{type:"Spell",title:"Cure Wounds",cost:"1 Mana",description:"Gain 2 Health",count:3},{type:"Spell",title:"Zap",cost:"1 Mana",description:"Deal 2 Damage to a player",count:3},{type:"Spell",title:"Destruction",cost:"3 Mana",description:"Destroy an Item",count:2}],L0=[],j0=[],F0=[{type:"Adventure",victoryPoints:0,title:"",cost:"8 Strength",description:"5 Gold",count:6},{type:"Adventure",victoryPoints:0,title:"",cost:"4 Mana",description:"5 Gold",count:6},{type:"Adventure",victoryPoints:0,title:"",cost:"3 Action Cards",description:"4 Gold",count:6},{type:"Adventure",victoryPoints:3,title:"",cost:"12 Strength",description:"3 VPs, 4 Gold",count:2},{type:"Adventure",victoryPoints:3,title:"",cost:"8 Strength, 3 Mana",description:"3 VPs, 4 Gold",count:2},{type:"Adventure",victoryPoints:3,title:"",cost:"6 Mana",description:"3 VPs, 4 Gold",count:2},{type:"Adventure",victoryPoints:3,title:"",cost:"5 Action Cards",description:"3 VPs, 4 Gold",count:2},{type:"Adventure",victoryPoints:3,title:"",cost:"3 Action Cards, 3 Mana",description:"3 VPs, 4 Gold",count:2},{type:"Adventure",victoryPoints:3,title:"",cost:"8 Strength, 3 Action Cards",description:"3 VPs, 4 Gold",count:2},{type:"Adventure",victoryPoints:7,title:"",cost:"16 Strength",description:"7 VPs, 4 Gold",count:2},{type:"Adventure",victoryPoints:7,title:"",cost:"8 Mana",description:"7 VPs, 4 Gold",count:2},{type:"Adventure",victoryPoints:7,title:"",cost:"7 Action Cards",description:"7 VPs, 4 Gold",count:2},{type:"Adventure",victoryPoints:7,title:"",cost:"4 Mana, 5 Action Cards, 12 Strength",description:"7 VPs, 4 Gold",count:2}],tp=[{type:"Character",title:"Warrior",stats:`Strength: 4
Max Health: 8
Mana: 0, Stamina: 5`,ability:"1 Starting Gold",count:1},{type:"Character",title:"Rogue",stats:`Strength: 2
Max Health: 7
Mana: 2, Stamina: 5`,ability:"1 Starting Gold",count:1},{type:"Character",title:"Wizard",stats:`Strength: 1
Max Health: 6
Mana: 3, Stamina: 5`,ability:"1 Starting Gold",count:1},{type:"Character",title:"Fighter",stats:`Strength: 3
Max Health: 8
Mana: 1, Stamina: 5`,ability:"1 Starting Gold",count:1},{type:"Character",title:"Arcanist",stats:`Strength: 1
Max Health: 6
Mana: 3, Stamina: 5`,ability:"1 Starting Gold",count:1},{type:"Character",title:"Ranger",stats:`Strength: 2
Max Health: 7
Mana: 2, Stamina: 5`,ability:"1 Starting Gold",count:1}];function b0(){const i=[];return O0.forEach((t,r)=>{for(let o=0;o<t.count;o++)i.push({...t,id:`action-${r}-${o}-${Date.now()}`})}),i}function z0(){const i=[];return L0.forEach((t,r)=>{for(let o=0;o<t.count;o++)i.push({...t,id:`spell-${r}-${o}-${Date.now()}`})}),i}function U0(){const i=[];return j0.forEach((t,r)=>{for(let o=0;o<t.count;o++)i.push({...t,id:`item-${r}-${o}-${Date.now()}`})}),i}function B0(){const i=[];return F0.forEach((t,r)=>{for(let o=0;o<t.count;o++)i.push({...t,id:`card-${r}-${o}-${Date.now()}`})}),i}function Wi(i){const t=[...i];for(let r=t.length-1;r>0;r--){const o=Math.floor(Math.random()*(r+1));[t[r],t[o]]=[t[o],t[r]]}return t}function H0(){const i=Math.floor(Math.random()*tp.length);return{...tp[i],id:`character-${i}-${Date.now()}`}}const W0={apiKey:"AIzaSyAm8uZMkpR9mNsWetQ4Amn9oskeLn2YFUk",authDomain:"gametester-36468.firebaseapp.com",databaseURL:"https://gametester-36468-default-rtdb.europe-west1.firebasedatabase.app",projectId:"gametester-36468",storageBucket:"gametester-36468.firebasestorage.app",messagingSenderId:"40537010714",appId:"1:40537010714:web:68c8c0e0a573ebcc6817a3"},V0=pp(W0),$0=D0(V0),G0="game1";function Fe(){return C0($0,`games/${G0}`)}function Q0(i){const t=Fe();return S0(t,o=>{i(o.val())})}async function K0(){const i=Wi(b0()),t=Wi(z0()),r=Wi(U0()),o=Wi(B0()),a={actionDeck:i,spellDeck:t,itemDeck:r,hands:{player1:[],player2:[]},inventories:{player1:[],player2:[]},characters:{player1:null,player2:null},currentCard:null,actionDiscardPile:[],spellDiscardPile:[],itemDiscardPile:[],adventureDeck:o,adventureRow:[],adventurePiles:{player1:[],player2:[]},resources:{player1:{damage:7,gold:4,mana:2,maxHealth:7,maxMana:2,stamina:5,strength:2},player2:{damage:7,gold:4,mana:2,maxHealth:7,maxMana:2,stamina:5,strength:2}},cardDamage:{},currentTurn:"player1"};await Ge(Fe(),a)}async function Y0(i,t,r){const o=Fe(),c=(await Xe(o)).val();if(!c)return;const h=c.resources?.[i]?.[t]??0,p=Math.max(0,h+r);await Ge(o,{...c,resources:{...c.resources,[i]:{...c.resources?.[i],[t]:p}}})}async function uu(i,t){const r=Fe(),a=(await Xe(r)).val(),c=`${t}Deck`,h=a?.[c];if(!a||!h||h.length===0)return;const[p,...m]=h,g=[...a.hands?.[i]||[],p];await Ge(r,{...a,[c]:m,hands:{...a.hands,[i]:g}})}function nl(i){return i==="Spell"?"spellDiscardPile":i==="Item"||i==="Item - Weapon"?"itemDiscardPile":"actionDiscardPile"}async function q0(i,t){const r=Fe(),a=(await Xe(r)).val();if(!a)return;const c=a.hands?.[i]||[],h=c.findIndex(S=>S.id===t);if(h===-1)return;const[p]=c.splice(h,1),m=[...c];let g={...a};if(a.currentCard){const S=nl(a.currentCard.type),C=a[S]||[];g[S]=[...C,a.currentCard]}await Ge(r,{...g,hands:{...a.hands,[i]:m},currentCard:p})}async function X0(i,t,r){const o=Fe(),c=(await Xe(o)).val();if(!c)return;const h=`${r}DiscardPile`,p=c[h]||[],m=p.findIndex(x=>x.id===t);if(m===-1)return;const[g]=p.splice(m,1),S=[...p],C=[...c.hands?.[i]||[],g];await Ge(o,{...c,hands:{...c.hands,[i]:C},[h]:S})}async function J0(i){const t=Fe(),o=(await Xe(t)).val();if(!o||!o.currentCard)return;const a=[...o.hands?.[i]||[],o.currentCard];await Ge(t,{...o,hands:{...o.hands,[i]:a},currentCard:null})}async function Om(i,t){const r=Fe(),a=(await Xe(r)).val();if(!a)return;const c=a.hands?.[i]||[],h=c.findIndex(C=>C.id===t);if(h===-1)return;const[p]=c.splice(h,1),m=[...c],g=nl(p.type),S=[...a[g]||[],p];await Ge(r,{...a,hands:{...a.hands,[i]:m},[g]:S})}async function Z0(){const i=Fe(),r=(await Xe(i)).val();if(!r||!r.currentCard)return;const o=nl(r.currentCard.type),a=[...r[o]||[],r.currentCard];await Ge(i,{...r,currentCard:null,[o]:a})}async function eE(){const i=Fe(),r=(await Xe(i)).val();if(!r||!r.adventureDeck||r.adventureDeck.length===0)return;const[o,...a]=r.adventureDeck,c=[...r.adventureRow||[],o];await Ge(i,{...r,adventureDeck:a,adventureRow:c})}async function tE(i){const t=Fe(),o=(await Xe(t)).val();if(!o||!o.adventureRow||o.adventureRow.length<=0)return;const a=o.adventureRow.findIndex(m=>m.id===i);if(a===-1)return;const[c]=o.adventureRow.splice(a,1),h=[...o.adventureRow],p=[...o.adventureDeck||[],c];await Ge(t,{...o,adventureRow:h,adventureDeck:p})}async function nE(i,t){const r=Fe(),a=(await Xe(r)).val();if(!a||!a.adventurePiles[i]||a.adventurePiles[i].length<=0)return;const c=a.adventurePiles[i].findIndex(g=>g.id===t);if(c===-1)return;const[h]=a.adventurePiles[i].splice(c,1),p=[...a.adventurePiles[i]],m=[...a.adventureDeck||[],h];await Ge(r,{...a,adventureDeck:m,adventurePiles:{...a.adventurePiles||{},[i]:p}})}async function rE(i,t){const r=Fe(),a=(await Xe(r)).val();if(!a)return;const c=a.adventureRow||[],h=c.findIndex(S=>S.id===t);if(h===-1)return;const[p]=c.splice(h,1),m=[...c],g=[...a.adventurePiles?.[i]||[],p];await Ge(r,{...a,adventureRow:m,adventurePiles:{...a.adventurePiles,[i]:g}})}async function iE(i){const t=Fe(),o=(await Xe(t)).val();if(!o)return;const a=`${i}DiscardPile`,c=`${i}Deck`,h=o[a]||[];if(h.length===0)return;const p=o[c]||[],m=Wi([...p,...h]);await Ge(t,{...o,[c]:m,[a]:[]})}async function sE(i,t){const r=Fe(),a=(await Xe(r)).val();if(!a)return;const c=a.hands?.[i]||[],h=c.findIndex(S=>S.id===t);if(h===-1)return;const[p]=c.splice(h,1),m=[...c],g=[...a.inventories?.[i]||[],p];await Ge(r,{...a,hands:{...a.hands,[i]:m},inventories:{...a.inventories,[i]:g}})}async function Lm(i,t){const r=Fe(),a=(await Xe(r)).val();if(!a)return;const c=a.inventories?.[i]||[],h=c.findIndex(C=>C.id===t);if(h===-1)return;const[p]=c.splice(h,1),m=[...c],g=nl(p.type),S=[...a[g]||[],p];await Ge(r,{...a,inventories:{...a.inventories,[i]:m},[g]:S})}async function oE(i){const t=Fe(),o=(await Xe(t)).val();if(!o)return;const a=H0();await Ge(t,{...o,characters:{...o.characters,[i]:a}})}async function lE(i,t){const r=Fe(),a=(await Xe(r)).val();if(!a)return;const c=a.cardDamage?.[i]??0,h=Math.max(0,c+t);await Ge(r,{...a,cardDamage:{...a.cardDamage,[i]:h}})}async function aE(){const i=Fe(),r=(await Xe(i)).val();if(!r)return;const o=r.currentTurn==="player1"?"player2":"player1";await Ge(i,{...r,currentTurn:o})}const Ru={item:"keyword-item",items:"keyword-item",strength:"keyword-strength",spell:"keyword-spell",spells:"keyword-spell",mana:"keyword-mana",weapon:"keyword-weapon",weapons:"keyword-weapon",gold:"keyword-gold",action:"keyword-action",actions:"keyword-action",damage:"keyword-damage",card:"keyword-card",cards:"keyword-card","victory point":"keyword-vp","victory points":"keyword-vp",vp:"keyword-vp",vps:"keyword-vp",stamina:"keyword-stamina"},uE=new RegExp(`\\b(${Object.keys(Ru).join("|")})\\b`,"gi");function cu(i){return i&&i.split(uE).map((r,o)=>{const a=r.toLowerCase();return Ru[a]?_.jsx("span",{className:Ru[a],children:r},o):r})}function Nt({card:i,onPlay:t,onTake:r,onDiscard:o,onMoveToInventory:a,cardDamage:c}){const h=c?.[i.id]??0,p=m=>{lE(i.id,m)};return _.jsxs("div",{className:"card",children:[_.jsxs("div",{className:"card-header",children:[_.jsx("span",{className:"card-title",children:i.title}),i.type&&_.jsx("span",{className:"card-type",children:cu(i.type)})]}),i.cost&&_.jsx("div",{className:"card-cost-container",children:_.jsx("span",{className:"card-cost",children:cu(i.cost)})}),_.jsx("div",{className:"card-description",children:cu(i.description)}),i.durability&&_.jsxs("div",{className:"card-durability",children:[_.jsx("span",{className:"durability-label",children:"Durability:"}),_.jsxs("div",{className:"durability-tracker",children:[_.jsx("button",{className:"durability-btn",onClick:()=>p(-1),disabled:h<=0,children:"-"}),_.jsxs("span",{className:"durability-value",children:[_.jsx("span",{className:h>0?"damage-taken":"",children:h}),_.jsx("span",{className:"durability-separator",children:"/"}),_.jsx("span",{children:i.durability})]}),_.jsx("button",{className:"durability-btn",onClick:()=>p(1),children:"+"})]})]}),_.jsxs("div",{className:"card-actions",children:[t&&_.jsx("button",{className:"play-button",onClick:t,children:"Play"}),r&&_.jsx("button",{className:"take-button",onClick:r,children:"Take"}),a&&_.jsx("button",{className:"inventory-button",onClick:a,children:"To Inventory"}),o&&_.jsx("button",{className:"discard-button",onClick:o,children:"Discard"})]})]})}function cE({playerId:i,cards:t,actionDeckEmpty:r,spellDeckEmpty:o,itemDeckEmpty:a,resources:c,cardDamage:h}){const p=i==="player1"?"Player 1":"Player 2",m=()=>{uu(i,"action")},g=()=>{uu(i,"spell")},S=()=>{uu(i,"item")},C=ie=>{q0(i,ie)},x=ie=>{Om(i,ie)},L=ie=>{sE(i,ie)},O=(ie,be)=>{Y0(i,ie,be)},V=c?.damage??0,K=c?.gold??0,Pe=c?.mana??0,De=c?.maxHealth??6,Ae=c?.maxMana??2,Se=c?.stamina??5,it=c?.strength??2;return _.jsxs("div",{className:"hand",children:[_.jsxs("div",{className:"hand-header",children:[_.jsxs("div",{className:"hand-title",children:[_.jsxs("h2",{children:[p,"'s Hand"]}),_.jsxs("span",{className:"card-count",children:["(",t.length," cards)"]})]}),_.jsxs("div",{className:"resources",children:[_.jsxs("div",{className:"resource gold-resource",children:[_.jsx("button",{className:"resource-btn",onClick:()=>O("gold",-1),children:"-"}),_.jsx("span",{className:"resource-value",children:K}),_.jsx("button",{className:"resource-btn",onClick:()=>O("gold",1),children:"+"}),_.jsx("span",{className:"resource-label",children:"Gold"})]}),_.jsxs("div",{className:"resource stamina-resource",children:[_.jsx("button",{className:"resource-btn",onClick:()=>O("stamina",-1),children:"-"}),_.jsx("span",{className:"resource-value",children:Se}),_.jsx("button",{className:"resource-btn",onClick:()=>O("stamina",1),children:"+"}),_.jsx("span",{className:"resource-label",children:"Stamina"})]}),_.jsxs("div",{className:"resource damage-resource",children:[_.jsx("button",{className:"resource-btn",onClick:()=>O("damage",-1),children:"-"}),_.jsx("span",{className:"resource-value",children:V}),_.jsx("button",{className:"resource-btn",onClick:()=>O("damage",1),children:"+"}),_.jsx("span",{className:"resource-label",children:"Health"})]}),_.jsxs("div",{className:"resource maxhealth-resource",children:[_.jsx("button",{className:"resource-btn",onClick:()=>O("maxHealth",-1),children:"-"}),_.jsx("span",{className:"resource-value",children:De}),_.jsx("button",{className:"resource-btn",onClick:()=>O("maxHealth",1),children:"+"}),_.jsx("span",{className:"resource-label",children:"Max Health"})]}),_.jsxs("div",{className:"resource mana-resource",children:[_.jsx("button",{className:"resource-btn",onClick:()=>O("mana",-1),children:"-"}),_.jsx("span",{className:"resource-value",children:Pe}),_.jsx("button",{className:"resource-btn",onClick:()=>O("mana",1),children:"+"}),_.jsx("span",{className:"resource-label",children:"Mana"})]}),_.jsxs("div",{className:"resource maxmana-resource",children:[_.jsx("button",{className:"resource-btn",onClick:()=>O("maxMana",-1),children:"-"}),_.jsx("span",{className:"resource-value",children:Ae}),_.jsx("button",{className:"resource-btn",onClick:()=>O("maxMana",1),children:"+"}),_.jsx("span",{className:"resource-label",children:"Max Mana"})]}),_.jsxs("div",{className:"resource strength-resource",children:[_.jsx("button",{className:"resource-btn",onClick:()=>O("strength",-1),children:"-"}),_.jsx("span",{className:"resource-value",children:it}),_.jsx("button",{className:"resource-btn",onClick:()=>O("strength",1),children:"+"}),_.jsx("span",{className:"resource-label",children:"Strength"})]})]})]}),_.jsxs("div",{className:"draw-buttons",children:[_.jsx("button",{className:"draw-button action-draw",onClick:m,disabled:r,children:"Draw Action"}),_.jsx("button",{className:"draw-button spell-draw",onClick:g,disabled:o,children:"Draw Spell"}),_.jsx("button",{className:"draw-button item-draw",onClick:S,disabled:a,children:"Draw Item"})]}),_.jsx("div",{className:"cards-container",children:t.length===0?_.jsx("p",{className:"empty-hand",children:"No cards in hand"}):t.map(ie=>_.jsx(Nt,{card:ie,cardDamage:h,onPlay:()=>C(ie.id),onDiscard:()=>x(ie.id),onMoveToInventory:()=>L(ie.id)},ie.id))})]})}function dE({playerId:i,cards:t,cardDamage:r}){const o=i==="player1"?"Player 1":"Player 2",a=c=>{Lm(i,c)};return _.jsxs("div",{className:"inventory",children:[_.jsx("div",{className:"inventory-header",children:_.jsxs("div",{className:"inventory-title",children:[_.jsxs("h2",{children:[o,"'s Inventory"]}),_.jsxs("span",{className:"card-count",children:["(",t.length," cards)"]})]})}),_.jsx("div",{className:"cards-container",children:t.length===0?_.jsx("p",{className:"empty-hand",children:"No cards in inventory"}):t.map(c=>_.jsx(Nt,{card:c,cardDamage:r,onDiscard:()=>a(c.id)},c.id))})]})}function hE({playerId:i,character:t}){const r=()=>{oE(i)};return t?_.jsxs("div",{className:"character-section",children:[_.jsx("h3",{children:"Character"}),_.jsxs("div",{className:"character-card",children:[_.jsx("div",{className:"character-title",children:t.title}),_.jsx("div",{className:"character-stats",children:t.stats.split(`
`).map((o,a)=>_.jsx("div",{children:o},a))}),_.jsxs("div",{className:"character-ability",children:[_.jsx("span",{className:"ability-label",children:"Ability:"})," ",t.ability]})]}),_.jsx("button",{className:"draw-character-btn",onClick:r,children:"Reroll Character"})]}):_.jsxs("div",{className:"character-section",children:[_.jsx("h3",{children:"Character"}),_.jsxs("div",{className:"no-character",children:[_.jsx("p",{children:"No character selected"}),_.jsx("button",{className:"draw-character-btn",onClick:r,children:"Draw Random Character"})]})]})}function fE({cards:i,onTakeCard:t,onClose:r,cardDamage:o,deckType:a}){const c=p=>{p.target===p.currentTarget&&r()},h=a?a.charAt(0).toUpperCase()+a.slice(1):"";return _.jsx("div",{className:"modal-backdrop",onClick:c,children:_.jsxs("div",{className:"modal",children:[_.jsxs("div",{className:"modal-header",children:[_.jsxs("h2",{children:[h," Discard Pile (",i.length," cards)"]}),_.jsx("button",{className:"modal-close",onClick:r,children:""})]}),_.jsx("div",{className:"modal-content",children:i.length===0?_.jsx("p",{className:"empty-modal",children:"No cards in discard pile"}):_.jsx("div",{className:"modal-cards",children:i.map(p=>_.jsx(Nt,{card:p,cardDamage:o,onTake:()=>t(p.id)},p.id))})})]})})}function pE({cards:i,onClose:t,playerId:r,cardDamage:o}){const a=h=>{h.target===h.currentTarget&&t()},c=h=>{nE(r,h)};return _.jsx("div",{className:"modal-backdrop",onClick:a,children:_.jsxs("div",{className:"modal adventure-modal",children:[_.jsxs("div",{className:"modal-header",children:[_.jsxs("h2",{children:["Your Adventures (",i.length," cards)"]}),_.jsx("button",{className:"modal-close",onClick:t,children:""})]}),_.jsx("div",{className:"modal-content",children:i.length===0?_.jsx("p",{className:"empty-modal",children:"No adventures taken yet"}):_.jsx("div",{className:"modal-cards",children:i.map(h=>_.jsx(Nt,{card:h,cardDamage:o,onDiscard:()=>c(h.id)},h.id))})})]})})}function mE({cards:i,opponentId:t,onClose:r,cardDamage:o}){const a=c=>{Om(t,c)};return _.jsx("div",{className:"modal-backdrop",onClick:r,children:_.jsxs("div",{className:"modal",onClick:c=>c.stopPropagation(),children:[_.jsxs("div",{className:"modal-header",children:[_.jsxs("h2",{children:["Opponent's Hand (",i.length,")"]}),_.jsx("button",{className:"modal-close",onClick:r,children:""})]}),_.jsx("div",{className:"modal-content",children:i.length===0?_.jsx("p",{className:"empty-modal",children:"No cards in opponent's hand"}):_.jsx("div",{className:"modal-cards",children:i.map(c=>_.jsx(Nt,{card:c,cardDamage:o,onDiscard:()=>a(c.id)},c.id))})})]})})}function gE({cards:i,opponentId:t,onClose:r,cardDamage:o}){const a=c=>{Lm(t,c)};return _.jsx("div",{className:"modal-backdrop",onClick:r,children:_.jsxs("div",{className:"modal",onClick:c=>c.stopPropagation(),children:[_.jsxs("div",{className:"modal-header",children:[_.jsxs("h2",{children:["Opponent's Inventory (",i.length,")"]}),_.jsx("button",{className:"modal-close",onClick:r,children:""})]}),_.jsx("div",{className:"modal-content",children:i.length===0?_.jsx("p",{className:"empty-modal",children:"No cards in opponent's inventory"}):_.jsx("div",{className:"modal-cards",children:i.map(c=>_.jsx(Nt,{card:c,cardDamage:o,onDiscard:()=>a(c.id)},c.id))})})]})})}function _E({character:i,onClose:t}){return _.jsx("div",{className:"modal-backdrop",onClick:t,children:_.jsxs("div",{className:"modal character-modal",onClick:r=>r.stopPropagation(),children:[_.jsxs("div",{className:"modal-header",children:[_.jsx("h2",{children:"Opponent's Character"}),_.jsx("button",{className:"modal-close",onClick:t,children:""})]}),_.jsx("div",{className:"modal-content",children:i?_.jsxs("div",{className:"character-card modal-character",children:[_.jsx("div",{className:"character-title",children:i.title}),_.jsx("div",{className:"character-stats",children:i.stats.split(`
`).map((r,o)=>_.jsx("div",{children:r},o))}),_.jsxs("div",{className:"character-ability",children:[_.jsx("span",{className:"ability-label",children:"Ability:"})," ",i.ability]})]}):_.jsx("p",{className:"empty-modal",children:"Opponent has no character selected"})})]})})}function vE({gameState:i,playerId:t,opponentId:r}){const[o,a]=Ot.useState(null),[c,h]=Ot.useState(!1),[p,m]=Ot.useState(!1),[g,S]=Ot.useState(!1),[C,x]=Ot.useState(!1),[L,O]=Ot.useState(!1),V=()=>{K0()},K=(xe,Hn)=>{X0(t,xe,Hn)},Pe=()=>{J0(t)},De=()=>{Z0()},Ae=()=>{eE()},Se=xe=>{rE(t,xe)},it=xe=>{tE(xe)},ie=xe=>{iE(xe)},be=()=>{aE()},Je=i?.actionDeck?.length??0,xt=i?.spellDeck?.length??0,vt=i?.itemDeck?.length??0,Zt=Je===0,It=xt===0,st=vt===0,yt=i?.hands?.[t]||[],wt=i?.inventories?.[t]||[],Qe=i?.currentCard||null,ue=i?.actionDiscardPile||[],j=i?.spellDiscardPile||[],W=i?.itemDiscardPile||[],b=i?.adventureDeck?.length??0,E=b===0,T=i?.adventureDeck?.[0]||null,X=i?.adventureRow||[],q=i?.adventurePiles?.[t]||[],re=i?.resources?.[t]||{damage:0,gold:0,mana:0},ne=i?.resources?.[r]||{damage:0,gold:0,mana:0},ce=i?.hands?.[r]||[],se=i?.inventories?.[r]||[],fe=i?.characters?.[t]||null,Ke=i?.characters?.[r]||null,ze=i?.cardDamage||{},Gt=(i?.currentTurn||"player1")===t,Xr=i?.adventurePiles?.[r]||[],Jr=(xe,Hn)=>{const Wn=xe.reduce((Vn,hr)=>Vn+(hr.victoryPoints||0),0),mn=Hn.reduce((Vn,hr)=>Vn+(hr.victoryPoints||0),0);return Wn+mn},fs=Jr(q,wt),Zr=Jr(Xr,se);return _.jsxs("div",{className:"game-board",children:[_.jsxs("div",{className:"game-controls",children:[_.jsx("button",{className:"new-game-button",onClick:V,children:"New Game"}),_.jsxs("div",{className:"deck-info",children:[_.jsx("span",{className:"deck-label",children:"Action Deck:"}),_.jsxs("span",{className:"deck-count",children:[Je," cards"]})]}),_.jsxs("div",{className:"deck-info",children:[_.jsx("span",{className:"deck-label",children:"Spell Deck:"}),_.jsxs("span",{className:"deck-count",children:[xt," cards"]})]}),_.jsxs("div",{className:"deck-info",children:[_.jsx("span",{className:"deck-label",children:"Item Deck:"}),_.jsxs("span",{className:"deck-count",children:[vt," cards"]})]}),_.jsxs("div",{className:"deck-info",children:[_.jsx("span",{className:"deck-label",children:"Adventure Deck:"}),_.jsxs("span",{className:"deck-count",children:[b," cards"]})]})]}),i?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"play-area",children:[_.jsxs("div",{className:"adventure-section",children:[_.jsxs("div",{className:"adventure-header",children:[_.jsx("h3",{children:"Adventure Row"}),_.jsxs("div",{className:"adventure-buttons",children:[_.jsx("button",{className:"peek-adventure-button",onClick:()=>O(!0),disabled:E,children:"Peek Top Card"}),_.jsx("button",{className:"draw-adventure-button",onClick:Ae,disabled:E,children:"Draw Adventure Card"})]})]}),_.jsx("div",{className:"adventure-row",children:X.length===0?_.jsx("div",{className:"empty-slot",children:"No adventure cards available"}):X.map(xe=>_.jsx(Nt,{card:xe,cardDamage:ze,onTake:()=>Se(xe.id),onDiscard:()=>it(xe.id)},xe.id))})]}),_.jsxs("div",{className:"current-card-area",children:[_.jsx("h3",{children:"Current Card"}),Qe?_.jsx(Nt,{card:Qe,cardDamage:ze,onTake:Pe,onDiscard:De}):_.jsx("div",{className:"empty-slot",children:"No card played"})]}),_.jsxs("div",{className:"discard-piles-container",children:[(Je>0||ue.length>0)&&_.jsxs("div",{className:"discard-pile-area action-discard",children:[_.jsxs("div",{className:"clickable",onClick:()=>a("action"),children:[_.jsxs("h3",{children:["Action Discard (",ue.length,")"]}),ue.length>0?_.jsx(Nt,{card:ue[ue.length-1],cardDamage:ze}):_.jsx("div",{className:"empty-slot",children:"Empty"}),_.jsx("p",{className:"click-hint",children:"Click to view all"})]}),_.jsx("button",{className:"shuffle-discard-button",onClick:()=>ie("action"),disabled:ue.length===0,children:"Shuffle into Deck"})]}),(xt>0||j.length>0)&&_.jsxs("div",{className:"discard-pile-area spell-discard",children:[_.jsxs("div",{className:"clickable",onClick:()=>a("spell"),children:[_.jsxs("h3",{children:["Spell Discard (",j.length,")"]}),j.length>0?_.jsx(Nt,{card:j[j.length-1],cardDamage:ze}):_.jsx("div",{className:"empty-slot",children:"Empty"}),_.jsx("p",{className:"click-hint",children:"Click to view all"})]}),_.jsx("button",{className:"shuffle-discard-button",onClick:()=>ie("spell"),disabled:j.length===0,children:"Shuffle into Deck"})]}),(vt>0||W.length>0)&&_.jsxs("div",{className:"discard-pile-area item-discard",children:[_.jsxs("div",{className:"clickable",onClick:()=>a("item"),children:[_.jsxs("h3",{children:["Item Discard (",W.length,")"]}),W.length>0?_.jsx(Nt,{card:W[W.length-1],cardDamage:ze}):_.jsx("div",{className:"empty-slot",children:"Empty"}),_.jsx("p",{className:"click-hint",children:"Click to view all"})]}),_.jsx("button",{className:"shuffle-discard-button",onClick:()=>ie("item"),disabled:W.length===0,children:"Shuffle into Deck"})]})]})]}),_.jsxs("div",{className:`global-statistics${Gt?"":" highlighted"}`,children:[_.jsxs("div",{className:"opponent",children:[_.jsx("span",{className:"opponent-label",children:"Opponent:"}),_.jsx("button",{className:"opponent-view-btn character-btn",onClick:()=>x(!0),children:Ke?Ke.title:"No Character"}),_.jsxs("button",{className:"opponent-view-btn",onClick:()=>m(!0),children:["Hand: ",ce.length]}),_.jsxs("span",{className:"opponent-stat damage-stat",children:["Damage: ",ne.damage]}),_.jsxs("span",{className:"opponent-stat gold-stat",children:["Gold: ",ne.gold]}),_.jsxs("span",{className:"opponent-stat mana-stat",children:["Mana: ",ne.mana]}),_.jsxs("span",{className:"opponent-stat",children:["Adventures: ",i?.adventurePiles?.[r]?.length||0]}),_.jsxs("button",{className:"opponent-view-btn inventory-stat",onClick:()=>S(!0),children:["Inventory: ",se.length]}),_.jsxs("span",{className:"opponent-stat vp-stat",children:["VP: ",Zr]})]}),_.jsxs("div",{className:"turn-indicator",children:[_.jsx("span",{className:`turn-status ${Gt?"my-turn":"opponent-turn"}`,children:Gt?"Your Turn":"Opponent's Turn"}),Gt&&_.jsx("button",{className:"end-turn-button",onClick:be,children:"End Turn"})]})]}),_.jsx("div",{className:`player-section${Gt?" highlighted":""}`,children:_.jsx(cE,{playerId:t,cards:yt,actionDeckEmpty:Zt,spellDeckEmpty:It,itemDeckEmpty:st,resources:re,cardDamage:ze})}),_.jsxs("div",{className:"inventory-section",children:[_.jsx(hE,{playerId:t,character:fe}),_.jsx(dE,{playerId:t,cards:wt,cardDamage:ze}),_.jsxs("div",{className:"adventure-pile-area clickable",onClick:()=>h(!0),children:[_.jsxs("h3",{children:["Your Adventures (",q.length,")"]}),_.jsxs("div",{className:"victory-points-display",children:[_.jsx("span",{className:"vp-label",children:"Victory Points:"}),_.jsx("span",{className:"vp-value",children:fs})]}),q.length>0?_.jsx(Nt,{card:q[q.length-1],cardDamage:ze}):_.jsx("div",{className:"empty-slot",children:"No adventures taken"}),_.jsx("p",{className:"click-hint",children:"Click to view all"})]})]})]}):_.jsx("div",{className:"no-game",children:_.jsx("p",{children:'No game in progress. Click "New Game" to start!'})}),o&&_.jsx(fE,{cards:o==="action"?ue:o==="spell"?j:W,onTakeCard:xe=>K(xe,o),onClose:()=>a(null),cardDamage:ze,deckType:o}),c&&_.jsx(pE,{cards:q,onClose:()=>h(!1),playerId:t,cardDamage:ze}),p&&_.jsx(mE,{cards:ce,opponentId:r,onClose:()=>m(!1),cardDamage:ze}),g&&_.jsx(gE,{cards:se,opponentId:r,onClose:()=>S(!1),cardDamage:ze}),C&&_.jsx(_E,{character:Ke,onClose:()=>x(!1)}),L&&_.jsx("div",{className:"modal-backdrop",onClick:()=>O(!1),children:_.jsxs("div",{className:"modal peek-modal",onClick:xe=>xe.stopPropagation(),children:[_.jsxs("div",{className:"modal-header",children:[_.jsx("h2",{children:"Top of Adventure Deck"}),_.jsx("button",{className:"modal-close",onClick:()=>O(!1),children:""})]}),_.jsx("div",{className:"modal-content",children:T?_.jsx(Nt,{card:T,cardDamage:ze}):_.jsx("p",{className:"empty-modal",children:"Adventure deck is empty"})})]})})]})}function yE({onSelect:i,onSelectOpponent:t}){return _.jsxs("div",{className:"player-select",children:[_.jsx("h2",{children:"Select Your Player"}),_.jsxs("div",{className:"player-buttons",children:[_.jsx("button",{className:"player-select-btn",onClick:()=>{i("player1"),t("player2")},children:"Player 1"}),_.jsx("button",{className:"player-select-btn",onClick:()=>{i("player2"),t("player1")},children:"Player 2"})]})]})}function wE(){const[i,t]=Ot.useState(null),[r,o]=Ot.useState(!0),[a,c]=Ot.useState(null),[h,p]=Ot.useState(null);return Ot.useEffect(()=>{const m=Q0(g=>{t(g),o(!1)});return()=>m()},[]),r?_.jsx("div",{className:"app",children:_.jsx("div",{className:"loading",children:"Connecting to game..."})}):a?_.jsxs("div",{className:"app",children:[_.jsxs("header",{className:"app-header",children:[_.jsx("h1",{children:"Card Game Tester"}),_.jsxs("div",{className:"player-info",children:["Playing as: ",a==="player1"?"Player 1":"Player 2",_.jsx("button",{className:"change-player-btn",onClick:()=>c(null),children:"Change"})]})]}),_.jsx("main",{children:_.jsx(vE,{gameState:i,playerId:a,opponentId:h})})]}):_.jsxs("div",{className:"app",children:[_.jsx("header",{className:"app-header",children:_.jsx("h1",{children:"Card Game Tester"})}),_.jsx("main",{children:_.jsx(yE,{onSelect:c,onSelectOpponent:p})})]})}U_.createRoot(document.getElementById("root")).render(_.jsx(Ot.StrictMode,{children:_.jsx(wE,{})}));
