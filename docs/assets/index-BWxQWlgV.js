(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();var Va={exports:{}},Li={},Ha={exports:{}},Z={};var qh;function I_(){if(qh)return Z;qh=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.iterator;function x(E){return E===null||typeof E!="object"?null:(E=C&&E[C]||E["@@iterator"],typeof E=="function"?E:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,V={};function K(E,I,X){this.props=E,this.context=I,this.refs=V,this.updater=X||L}K.prototype.isReactComponent={},K.prototype.setState=function(E,I){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,I,"setState")},K.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function Oe(){}Oe.prototype=K.prototype;function We(E,I,X){this.props=E,this.context=I,this.refs=V,this.updater=X||L}var Ve=We.prototype=new Oe;Ve.constructor=We,O(Ve,K.prototype),Ve.isPureReactComponent=!0;var xe=Array.isArray,_t=Object.prototype.hasOwnProperty,He={current:null},qe={key:!0,ref:!0,__self:!0,__source:!0};function nt(E,I,X){var J,q={},re=null,se=null;if(I!=null)for(J in I.ref!==void 0&&(se=I.ref),I.key!==void 0&&(re=""+I.key),I)_t.call(I,J)&&!qe.hasOwnProperty(J)&&(q[J]=I[J]);var ae=arguments.length-2;if(ae===1)q.children=X;else if(1<ae){for(var ce=Array(ae),rt=0;rt<ae;rt++)ce[rt]=arguments[rt+2];q.children=ce}if(E&&E.defaultProps)for(J in ae=E.defaultProps,ae)q[J]===void 0&&(q[J]=ae[J]);return{$$typeof:i,type:E,key:re,ref:se,props:q,_owner:He.current}}function Ht(E,I){return{$$typeof:i,type:E.type,key:I,ref:E.ref,props:E.props,_owner:E._owner}}function Dt(E){return typeof E=="object"&&E!==null&&E.$$typeof===i}function $t(E){var I={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(X){return I[X]})}var vt=/\/+/g;function Te(E,I){return typeof E=="object"&&E!==null&&E.key!=null?$t(""+E.key):I.toString(36)}function lt(E,I,X,J,q){var re=typeof E;(re==="undefined"||re==="boolean")&&(E=null);var se=!1;if(E===null)se=!0;else switch(re){case"string":case"number":se=!0;break;case"object":switch(E.$$typeof){case i:case t:se=!0}}if(se)return se=E,q=q(se),E=J===""?"."+Te(se,0):J,xe(q)?(X="",E!=null&&(X=E.replace(vt,"$&/")+"/"),lt(q,I,X,"",function(rt){return rt})):q!=null&&(Dt(q)&&(q=Ht(q,X+(!q.key||se&&se.key===q.key?"":(""+q.key).replace(vt,"$&/")+"/")+E)),I.push(q)),1;if(se=0,J=J===""?".":J+":",xe(E))for(var ae=0;ae<E.length;ae++){re=E[ae];var ce=J+Te(re,ae);se+=lt(re,I,X,ce,q)}else if(ce=x(E),typeof ce=="function")for(E=ce.call(E),ae=0;!(re=E.next()).done;)re=re.value,ce=J+Te(re,ae++),se+=lt(re,I,X,ce,q);else if(re==="object")throw I=String(E),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return se}function yt(E,I,X){if(E==null)return E;var J=[],q=0;return lt(E,J,"","",function(re){return I.call(X,re,q++)}),J}function $e(E){if(E._status===-1){var I=E._result;I=I(),I.then(function(X){(E._status===0||E._status===-1)&&(E._status=1,E._result=X)},function(X){(E._status===0||E._status===-1)&&(E._status=2,E._result=X)}),E._status===-1&&(E._status=0,E._result=I)}if(E._status===1)return E._result.default;throw E._result}var me={current:null},F={transition:null},G={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:F,ReactCurrentOwner:He};function z(){throw Error("act(...) is not supported in production builds of React.")}return Z.Children={map:yt,forEach:function(E,I,X){yt(E,function(){I.apply(this,arguments)},X)},count:function(E){var I=0;return yt(E,function(){I++}),I},toArray:function(E){return yt(E,function(I){return I})||[]},only:function(E){if(!Dt(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Z.Component=K,Z.Fragment=r,Z.Profiler=a,Z.PureComponent=We,Z.StrictMode=o,Z.Suspense=m,Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,Z.act=z,Z.cloneElement=function(E,I,X){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var J=O({},E.props),q=E.key,re=E.ref,se=E._owner;if(I!=null){if(I.ref!==void 0&&(re=I.ref,se=He.current),I.key!==void 0&&(q=""+I.key),E.type&&E.type.defaultProps)var ae=E.type.defaultProps;for(ce in I)_t.call(I,ce)&&!qe.hasOwnProperty(ce)&&(J[ce]=I[ce]===void 0&&ae!==void 0?ae[ce]:I[ce])}var ce=arguments.length-2;if(ce===1)J.children=X;else if(1<ce){ae=Array(ce);for(var rt=0;rt<ce;rt++)ae[rt]=arguments[rt+2];J.children=ae}return{$$typeof:i,type:E.type,key:q,ref:re,props:J,_owner:se}},Z.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:c,_context:E},E.Consumer=E},Z.createElement=nt,Z.createFactory=function(E){var I=nt.bind(null,E);return I.type=E,I},Z.createRef=function(){return{current:null}},Z.forwardRef=function(E){return{$$typeof:p,render:E}},Z.isValidElement=Dt,Z.lazy=function(E){return{$$typeof:S,_payload:{_status:-1,_result:E},_init:$e}},Z.memo=function(E,I){return{$$typeof:g,type:E,compare:I===void 0?null:I}},Z.startTransition=function(E){var I=F.transition;F.transition={};try{E()}finally{F.transition=I}},Z.unstable_act=z,Z.useCallback=function(E,I){return me.current.useCallback(E,I)},Z.useContext=function(E){return me.current.useContext(E)},Z.useDebugValue=function(){},Z.useDeferredValue=function(E){return me.current.useDeferredValue(E)},Z.useEffect=function(E,I){return me.current.useEffect(E,I)},Z.useId=function(){return me.current.useId()},Z.useImperativeHandle=function(E,I,X){return me.current.useImperativeHandle(E,I,X)},Z.useInsertionEffect=function(E,I){return me.current.useInsertionEffect(E,I)},Z.useLayoutEffect=function(E,I){return me.current.useLayoutEffect(E,I)},Z.useMemo=function(E,I){return me.current.useMemo(E,I)},Z.useReducer=function(E,I,X){return me.current.useReducer(E,I,X)},Z.useRef=function(E){return me.current.useRef(E)},Z.useState=function(E){return me.current.useState(E)},Z.useSyncExternalStore=function(E,I,X){return me.current.useSyncExternalStore(E,I,X)},Z.useTransition=function(){return me.current.useTransition()},Z.version="18.3.1",Z}var Xh;function Nu(){return Xh||(Xh=1,Ha.exports=I_()),Ha.exports}var Jh;function P_(){if(Jh)return Li;Jh=1;var i=Nu(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,g){var S,C={},x=null,L=null;g!==void 0&&(x=""+g),m.key!==void 0&&(x=""+m.key),m.ref!==void 0&&(L=m.ref);for(S in m)o.call(m,S)&&!c.hasOwnProperty(S)&&(C[S]=m[S]);if(p&&p.defaultProps)for(S in m=p.defaultProps,m)C[S]===void 0&&(C[S]=m[S]);return{$$typeof:t,type:p,key:x,ref:L,props:C,_owner:a.current}}return Li.Fragment=r,Li.jsx=h,Li.jsxs=h,Li}var Zh;function R_(){return Zh||(Zh=1,Va.exports=P_()),Va.exports}var v=R_(),Rt=Nu(),yo={},$a={exports:{}},ft={},Ga={exports:{}},Qa={};var ef;function D_(){return ef||(ef=1,(function(i){function t(F,G){var z=F.length;F.push(G);e:for(;0<z;){var E=z-1>>>1,I=F[E];if(0<a(I,G))F[E]=G,F[z]=I,z=E;else break e}}function r(F){return F.length===0?null:F[0]}function o(F){if(F.length===0)return null;var G=F[0],z=F.pop();if(z!==G){F[0]=z;e:for(var E=0,I=F.length,X=I>>>1;E<X;){var J=2*(E+1)-1,q=F[J],re=J+1,se=F[re];if(0>a(q,z))re<I&&0>a(se,q)?(F[E]=se,F[re]=z,E=re):(F[E]=q,F[J]=z,E=J);else if(re<I&&0>a(se,z))F[E]=se,F[re]=z,E=re;else break e}}return G}function a(F,G){var z=F.sortIndex-G.sortIndex;return z!==0?z:F.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var m=[],g=[],S=1,C=null,x=3,L=!1,O=!1,V=!1,K=typeof setTimeout=="function"?setTimeout:null,Oe=typeof clearTimeout=="function"?clearTimeout:null,We=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ve(F){for(var G=r(g);G!==null;){if(G.callback===null)o(g);else if(G.startTime<=F)o(g),G.sortIndex=G.expirationTime,t(m,G);else break;G=r(g)}}function xe(F){if(V=!1,Ve(F),!O)if(r(m)!==null)O=!0,$e(_t);else{var G=r(g);G!==null&&me(xe,G.startTime-F)}}function _t(F,G){O=!1,V&&(V=!1,Oe(nt),nt=-1),L=!0;var z=x;try{for(Ve(G),C=r(m);C!==null&&(!(C.expirationTime>G)||F&&!$t());){var E=C.callback;if(typeof E=="function"){C.callback=null,x=C.priorityLevel;var I=E(C.expirationTime<=G);G=i.unstable_now(),typeof I=="function"?C.callback=I:C===r(m)&&o(m),Ve(G)}else o(m);C=r(m)}if(C!==null)var X=!0;else{var J=r(g);J!==null&&me(xe,J.startTime-G),X=!1}return X}finally{C=null,x=z,L=!1}}var He=!1,qe=null,nt=-1,Ht=5,Dt=-1;function $t(){return!(i.unstable_now()-Dt<Ht)}function vt(){if(qe!==null){var F=i.unstable_now();Dt=F;var G=!0;try{G=qe(!0,F)}finally{G?Te():(He=!1,qe=null)}}else He=!1}var Te;if(typeof We=="function")Te=function(){We(vt)};else if(typeof MessageChannel<"u"){var lt=new MessageChannel,yt=lt.port2;lt.port1.onmessage=vt,Te=function(){yt.postMessage(null)}}else Te=function(){K(vt,0)};function $e(F){qe=F,He||(He=!0,Te())}function me(F,G){nt=K(function(){F(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_continueExecution=function(){O||L||(O=!0,$e(_t))},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ht=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return r(m)},i.unstable_next=function(F){switch(x){case 1:case 2:case 3:var G=3;break;default:G=x}var z=x;x=G;try{return F()}finally{x=z}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(F,G){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var z=x;x=F;try{return G()}finally{x=z}},i.unstable_scheduleCallback=function(F,G,z){var E=i.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?E+z:E):z=E,F){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=z+I,F={id:S++,callback:G,priorityLevel:F,startTime:z,expirationTime:I,sortIndex:-1},z>E?(F.sortIndex=z,t(g,F),r(m)===null&&F===r(g)&&(V?(Oe(nt),nt=-1):V=!0,me(xe,z-E))):(F.sortIndex=I,t(m,F),O||L||(O=!0,$e(_t))),F},i.unstable_shouldYield=$t,i.unstable_wrapCallback=function(F){var G=x;return function(){var z=x;x=G;try{return F.apply(this,arguments)}finally{x=z}}}})(Qa)),Qa}var tf;function A_(){return tf||(tf=1,Ga.exports=D_()),Ga.exports}var nf;function M_(){if(nf)return ft;nf=1;var i=Nu(),t=A_();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,n){h(e,n),h(e+"Capture",n)}function h(e,n){for(a[e]=n,e=0;e<n.length;e++)o.add(n[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},C={};function x(e){return m.call(C,e)?!0:m.call(S,e)?!1:g.test(e)?C[e]=!0:(S[e]=!0,!1)}function L(e,n,s,l){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function O(e,n,s,l){if(n===null||typeof n>"u"||L(e,n,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function V(e,n,s,l,u,d,f){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=u,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=d,this.removeEmptyString=f}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){K[e]=new V(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];K[n]=new V(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){K[e]=new V(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){K[e]=new V(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){K[e]=new V(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){K[e]=new V(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){K[e]=new V(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){K[e]=new V(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){K[e]=new V(e,5,!1,e.toLowerCase(),null,!1,!1)});var Oe=/[\-:]([a-z])/g;function We(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Oe,We);K[n]=new V(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Oe,We);K[n]=new V(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Oe,We);K[n]=new V(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){K[e]=new V(e,1,!1,e.toLowerCase(),null,!1,!1)}),K.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){K[e]=new V(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ve(e,n,s,l){var u=K.hasOwnProperty(n)?K[n]:null;(u!==null?u.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(O(n,s,u,l)&&(s=null),l||u===null?x(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):u.mustUseProperty?e[u.propertyName]=s===null?u.type===3?!1:"":s:(n=u.attributeName,l=u.attributeNamespace,s===null?e.removeAttribute(n):(u=u.type,s=u===3||u===4&&s===!0?"":""+s,l?e.setAttributeNS(l,n,s):e.setAttribute(n,s))))}var xe=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_t=Symbol.for("react.element"),He=Symbol.for("react.portal"),qe=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),Ht=Symbol.for("react.profiler"),Dt=Symbol.for("react.provider"),$t=Symbol.for("react.context"),vt=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),lt=Symbol.for("react.suspense_list"),yt=Symbol.for("react.memo"),$e=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),F=Symbol.iterator;function G(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var z=Object.assign,E;function I(e){if(E===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return`
`+E+e}var X=!1;function J(e,n){if(!e||X)return"";X=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(T){var l=T}Reflect.construct(e,[],n)}else{try{n.call()}catch(T){l=T}e.call(n.prototype)}else{try{throw Error()}catch(T){l=T}e()}}catch(T){if(T&&l&&typeof T.stack=="string"){for(var u=T.stack.split(`
`),d=l.stack.split(`
`),f=u.length-1,_=d.length-1;1<=f&&0<=_&&u[f]!==d[_];)_--;for(;1<=f&&0<=_;f--,_--)if(u[f]!==d[_]){if(f!==1||_!==1)do if(f--,_--,0>_||u[f]!==d[_]){var y=`
`+u[f].replace(" at new "," at ");return e.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",e.displayName)),y}while(1<=f&&0<=_);break}}}finally{X=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?I(e):""}function q(e){switch(e.tag){case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return e=J(e.type,!1),e;case 11:return e=J(e.type.render,!1),e;case 1:return e=J(e.type,!0),e;default:return""}}function re(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qe:return"Fragment";case He:return"Portal";case Ht:return"Profiler";case nt:return"StrictMode";case Te:return"Suspense";case lt:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $t:return(e.displayName||"Context")+".Consumer";case Dt:return(e._context.displayName||"Context")+".Provider";case vt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yt:return n=e.displayName||null,n!==null?n:re(e.type)||"Memo";case $e:n=e._payload,e=e._init;try{return re(e(n))}catch{}}return null}function se(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(n);case 8:return n===nt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ae(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ce(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function rt(e){var n=ce(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var u=s.get,d=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(f){l=""+f,d.call(this,f)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(f){l=""+f},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function lr(e){e._valueTracker||(e._valueTracker=rt(e))}function Ge(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return e&&(l=ce(e)?e.checked?"true":"false":e.value),e=l,e!==s?(n.setValue(e),!0):!1}function ar(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kr(e,n){var s=n.checked;return z({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function us(e,n){var s=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;s=ae(n.value!=null?n.value:s),e._wrapperState={initialChecked:l,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function ur(e,n){n=n.checked,n!=null&&Ve(e,"checked",n,!1)}function bn(e,n){ur(e,n);var s=ae(n.value),l=n.type;if(s!=null)l==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Jo(e,n.type,s):n.hasOwnProperty("defaultValue")&&Jo(e,n.type,ae(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function sc(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Jo(e,n,s){(n!=="number"||ar(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var qr=Array.isArray;function cr(e,n,s,l){if(e=e.options,n){n={};for(var u=0;u<s.length;u++)n["$"+s[u]]=!0;for(s=0;s<e.length;s++)u=n.hasOwnProperty("$"+e[s].value),e[s].selected!==u&&(e[s].selected=u),u&&l&&(e[s].defaultSelected=!0)}else{for(s=""+ae(s),n=null,u=0;u<e.length;u++){if(e[u].value===s){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function Zo(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return z({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oc(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(r(92));if(qr(s)){if(1<s.length)throw Error(r(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:ae(s)}}function lc(e,n){var s=ae(n.value),l=ae(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),l!=null&&(e.defaultValue=""+l)}function ac(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function uc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function el(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?uc(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cs,cc=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,l,u){MSApp.execUnsafeLocalFunction(function(){return e(n,s,l,u)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(cs=cs||document.createElement("div"),cs.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=cs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Xr(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var Jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Am=["Webkit","ms","Moz","O"];Object.keys(Jr).forEach(function(e){Am.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Jr[n]=Jr[e]})});function dc(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Jr.hasOwnProperty(e)&&Jr[e]?(""+n).trim():n+"px"}function hc(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var l=s.indexOf("--")===0,u=dc(s,n[s],l);s==="float"&&(s="cssFloat"),l?e.setProperty(s,u):e[s]=u}}var Mm=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tl(e,n){if(n){if(Mm[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function nl(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rl=null;function il(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sl=null,dr=null,hr=null;function fc(e){if(e=wi(e)){if(typeof sl!="function")throw Error(r(280));var n=e.stateNode;n&&(n=Ms(n),sl(e.stateNode,e.type,n))}}function pc(e){dr?hr?hr.push(e):hr=[e]:dr=e}function mc(){if(dr){var e=dr,n=hr;if(hr=dr=null,fc(e),n)for(e=0;e<n.length;e++)fc(n[e])}}function gc(e,n){return e(n)}function _c(){}var ol=!1;function vc(e,n,s){if(ol)return e(n,s);ol=!0;try{return gc(e,n,s)}finally{ol=!1,(dr!==null||hr!==null)&&(_c(),mc())}}function Zr(e,n){var s=e.stateNode;if(s===null)return null;var l=Ms(s);if(l===null)return null;s=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(r(231,n,typeof s));return s}var ll=!1;if(p)try{var ei={};Object.defineProperty(ei,"passive",{get:function(){ll=!0}}),window.addEventListener("test",ei,ei),window.removeEventListener("test",ei,ei)}catch{ll=!1}function Om(e,n,s,l,u,d,f,_,y){var T=Array.prototype.slice.call(arguments,3);try{n.apply(s,T)}catch(R){this.onError(R)}}var ti=!1,ds=null,hs=!1,al=null,Lm={onError:function(e){ti=!0,ds=e}};function Fm(e,n,s,l,u,d,f,_,y){ti=!1,ds=null,Om.apply(Lm,arguments)}function jm(e,n,s,l,u,d,f,_,y){if(Fm.apply(this,arguments),ti){if(ti){var T=ds;ti=!1,ds=null}else throw Error(r(198));hs||(hs=!0,al=T)}}function Un(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function yc(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function wc(e){if(Un(e)!==e)throw Error(r(188))}function zm(e){var n=e.alternate;if(!n){if(n=Un(e),n===null)throw Error(r(188));return n!==e?null:e}for(var s=e,l=n;;){var u=s.return;if(u===null)break;var d=u.alternate;if(d===null){if(l=u.return,l!==null){s=l;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===s)return wc(u),e;if(d===l)return wc(u),n;d=d.sibling}throw Error(r(188))}if(s.return!==l.return)s=u,l=d;else{for(var f=!1,_=u.child;_;){if(_===s){f=!0,s=u,l=d;break}if(_===l){f=!0,l=u,s=d;break}_=_.sibling}if(!f){for(_=d.child;_;){if(_===s){f=!0,s=d,l=u;break}if(_===l){f=!0,l=d,s=u;break}_=_.sibling}if(!f)throw Error(r(189))}}if(s.alternate!==l)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?e:n}function Cc(e){return e=zm(e),e!==null?Ec(e):null}function Ec(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Ec(e);if(n!==null)return n;e=e.sibling}return null}var Sc=t.unstable_scheduleCallback,kc=t.unstable_cancelCallback,bm=t.unstable_shouldYield,Um=t.unstable_requestPaint,ke=t.unstable_now,Bm=t.unstable_getCurrentPriorityLevel,ul=t.unstable_ImmediatePriority,Nc=t.unstable_UserBlockingPriority,fs=t.unstable_NormalPriority,Wm=t.unstable_LowPriority,xc=t.unstable_IdlePriority,ps=null,Gt=null;function Vm(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ps,e,void 0,(e.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:Gm,Hm=Math.log,$m=Math.LN2;function Gm(e){return e>>>=0,e===0?32:31-(Hm(e)/$m|0)|0}var ms=64,gs=4194304;function ni(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _s(e,n){var s=e.pendingLanes;if(s===0)return 0;var l=0,u=e.suspendedLanes,d=e.pingedLanes,f=s&268435455;if(f!==0){var _=f&~u;_!==0?l=ni(_):(d&=f,d!==0&&(l=ni(d)))}else f=s&~u,f!==0?l=ni(f):d!==0&&(l=ni(d));if(l===0)return 0;if(n!==0&&n!==l&&(n&u)===0&&(u=l&-l,d=n&-n,u>=d||u===16&&(d&4194240)!==0))return n;if((l&4)!==0&&(l|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=l;0<n;)s=31-At(n),u=1<<s,l|=e[s],n&=~u;return l}function Qm(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ym(e,n){for(var s=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes;0<d;){var f=31-At(d),_=1<<f,y=u[f];y===-1?((_&s)===0||(_&l)!==0)&&(u[f]=Qm(_,n)):y<=n&&(e.expiredLanes|=_),d&=~_}}function cl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tc(){var e=ms;return ms<<=1,(ms&4194240)===0&&(ms=64),e}function dl(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function ri(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-At(n),e[n]=s}function Km(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<s;){var u=31-At(s),d=1<<u;n[u]=0,l[u]=-1,e[u]=-1,s&=~d}}function hl(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var l=31-At(s),u=1<<l;u&n|e[l]&n&&(e[l]|=n),s&=~u}}var ue=0;function Ic(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Pc,fl,Rc,Dc,Ac,pl=!1,vs=[],fn=null,pn=null,mn=null,ii=new Map,si=new Map,gn=[],qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mc(e,n){switch(e){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":ii.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":si.delete(n.pointerId)}}function oi(e,n,s,l,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[u]},n!==null&&(n=wi(n),n!==null&&fl(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function Xm(e,n,s,l,u){switch(n){case"focusin":return fn=oi(fn,e,n,s,l,u),!0;case"dragenter":return pn=oi(pn,e,n,s,l,u),!0;case"mouseover":return mn=oi(mn,e,n,s,l,u),!0;case"pointerover":var d=u.pointerId;return ii.set(d,oi(ii.get(d)||null,e,n,s,l,u)),!0;case"gotpointercapture":return d=u.pointerId,si.set(d,oi(si.get(d)||null,e,n,s,l,u)),!0}return!1}function Oc(e){var n=Bn(e.target);if(n!==null){var s=Un(n);if(s!==null){if(n=s.tag,n===13){if(n=yc(s),n!==null){e.blockedOn=n,Ac(e.priority,function(){Rc(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ys(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=gl(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);rl=l,s.target.dispatchEvent(l),rl=null}else return n=wi(s),n!==null&&fl(n),e.blockedOn=s,!1;n.shift()}return!0}function Lc(e,n,s){ys(e)&&s.delete(n)}function Jm(){pl=!1,fn!==null&&ys(fn)&&(fn=null),pn!==null&&ys(pn)&&(pn=null),mn!==null&&ys(mn)&&(mn=null),ii.forEach(Lc),si.forEach(Lc)}function li(e,n){e.blockedOn===n&&(e.blockedOn=null,pl||(pl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Jm)))}function ai(e){function n(u){return li(u,e)}if(0<vs.length){li(vs[0],e);for(var s=1;s<vs.length;s++){var l=vs[s];l.blockedOn===e&&(l.blockedOn=null)}}for(fn!==null&&li(fn,e),pn!==null&&li(pn,e),mn!==null&&li(mn,e),ii.forEach(n),si.forEach(n),s=0;s<gn.length;s++)l=gn[s],l.blockedOn===e&&(l.blockedOn=null);for(;0<gn.length&&(s=gn[0],s.blockedOn===null);)Oc(s),s.blockedOn===null&&gn.shift()}var fr=xe.ReactCurrentBatchConfig,ws=!0;function Zm(e,n,s,l){var u=ue,d=fr.transition;fr.transition=null;try{ue=1,ml(e,n,s,l)}finally{ue=u,fr.transition=d}}function eg(e,n,s,l){var u=ue,d=fr.transition;fr.transition=null;try{ue=4,ml(e,n,s,l)}finally{ue=u,fr.transition=d}}function ml(e,n,s,l){if(ws){var u=gl(e,n,s,l);if(u===null)Ml(e,n,l,Cs,s),Mc(e,l);else if(Xm(u,e,n,s,l))l.stopPropagation();else if(Mc(e,l),n&4&&-1<qm.indexOf(e)){for(;u!==null;){var d=wi(u);if(d!==null&&Pc(d),d=gl(e,n,s,l),d===null&&Ml(e,n,l,Cs,s),d===u)break;u=d}u!==null&&l.stopPropagation()}else Ml(e,n,l,null,s)}}var Cs=null;function gl(e,n,s,l){if(Cs=null,e=il(l),e=Bn(e),e!==null)if(n=Un(e),n===null)e=null;else if(s=n.tag,s===13){if(e=yc(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Cs=e,null}function Fc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bm()){case ul:return 1;case Nc:return 4;case fs:case Wm:return 16;case xc:return 536870912;default:return 16}default:return 16}}var _n=null,_l=null,Es=null;function jc(){if(Es)return Es;var e,n=_l,s=n.length,l,u="value"in _n?_n.value:_n.textContent,d=u.length;for(e=0;e<s&&n[e]===u[e];e++);var f=s-e;for(l=1;l<=f&&n[s-l]===u[d-l];l++);return Es=u.slice(e,1<l?1-l:void 0)}function Ss(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ks(){return!0}function zc(){return!1}function wt(e){function n(s,l,u,d,f){this._reactName=s,this._targetInst=u,this.type=l,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(s=e[_],this[_]=s?s(d):d[_]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ks:zc,this.isPropagationStopped=zc,this}return z(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),n}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vl=wt(pr),ui=z({},pr,{view:0,detail:0}),tg=wt(ui),yl,wl,ci,Ns=z({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:El,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ci&&(ci&&e.type==="mousemove"?(yl=e.screenX-ci.screenX,wl=e.screenY-ci.screenY):wl=yl=0,ci=e),yl)},movementY:function(e){return"movementY"in e?e.movementY:wl}}),bc=wt(Ns),ng=z({},Ns,{dataTransfer:0}),rg=wt(ng),ig=z({},ui,{relatedTarget:0}),Cl=wt(ig),sg=z({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),og=wt(sg),lg=z({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ag=wt(lg),ug=z({},pr,{data:0}),Uc=wt(ug),cg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fg(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=hg[e])?!!n[e]:!1}function El(){return fg}var pg=z({},ui,{key:function(e){if(e.key){var n=cg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ss(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:El,charCode:function(e){return e.type==="keypress"?Ss(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ss(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mg=wt(pg),gg=z({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bc=wt(gg),_g=z({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:El}),vg=wt(_g),yg=z({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wg=wt(yg),Cg=z({},Ns,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Eg=wt(Cg),Sg=[9,13,27,32],Sl=p&&"CompositionEvent"in window,di=null;p&&"documentMode"in document&&(di=document.documentMode);var kg=p&&"TextEvent"in window&&!di,Wc=p&&(!Sl||di&&8<di&&11>=di),Vc=" ",Hc=!1;function $c(e,n){switch(e){case"keyup":return Sg.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mr=!1;function Ng(e,n){switch(e){case"compositionend":return Gc(n);case"keypress":return n.which!==32?null:(Hc=!0,Vc);case"textInput":return e=n.data,e===Vc&&Hc?null:e;default:return null}}function xg(e,n){if(mr)return e==="compositionend"||!Sl&&$c(e,n)?(e=jc(),Es=_l=_n=null,mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Wc&&n.locale!=="ko"?null:n.data;default:return null}}var Tg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Tg[e.type]:n==="textarea"}function Yc(e,n,s,l){pc(l),n=Rs(n,"onChange"),0<n.length&&(s=new vl("onChange","change",null,s,l),e.push({event:s,listeners:n}))}var hi=null,fi=null;function Ig(e){hd(e,0)}function xs(e){var n=wr(e);if(Ge(n))return e}function Pg(e,n){if(e==="change")return n}var Kc=!1;if(p){var kl;if(p){var Nl="oninput"in document;if(!Nl){var qc=document.createElement("div");qc.setAttribute("oninput","return;"),Nl=typeof qc.oninput=="function"}kl=Nl}else kl=!1;Kc=kl&&(!document.documentMode||9<document.documentMode)}function Xc(){hi&&(hi.detachEvent("onpropertychange",Jc),fi=hi=null)}function Jc(e){if(e.propertyName==="value"&&xs(fi)){var n=[];Yc(n,fi,e,il(e)),vc(Ig,n)}}function Rg(e,n,s){e==="focusin"?(Xc(),hi=n,fi=s,hi.attachEvent("onpropertychange",Jc)):e==="focusout"&&Xc()}function Dg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xs(fi)}function Ag(e,n){if(e==="click")return xs(n)}function Mg(e,n){if(e==="input"||e==="change")return xs(n)}function Og(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Mt=typeof Object.is=="function"?Object.is:Og;function pi(e,n){if(Mt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var u=s[l];if(!m.call(n,u)||!Mt(e[u],n[u]))return!1}return!0}function Zc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ed(e,n){var s=Zc(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=n&&l>=n)return{node:s,offset:n-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Zc(s)}}function td(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?td(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function nd(){for(var e=window,n=ar();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ar(e.document)}return n}function xl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function Lg(e){var n=nd(),s=e.focusedElem,l=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&td(s.ownerDocument.documentElement,s)){if(l!==null&&xl(s)){if(n=l.start,e=l.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var u=s.textContent.length,d=Math.min(l.start,u);l=l.end===void 0?d:Math.min(l.end,u),!e.extend&&d>l&&(u=l,l=d,d=u),u=ed(s,d);var f=ed(s,l);u&&f&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(n=n.createRange(),n.setStart(u.node,u.offset),e.removeAllRanges(),d>l?(e.addRange(n),e.extend(f.node,f.offset)):(n.setEnd(f.node,f.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Fg=p&&"documentMode"in document&&11>=document.documentMode,gr=null,Tl=null,mi=null,Il=!1;function rd(e,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Il||gr==null||gr!==ar(l)||(l=gr,"selectionStart"in l&&xl(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),mi&&pi(mi,l)||(mi=l,l=Rs(Tl,"onSelect"),0<l.length&&(n=new vl("onSelect","select",null,n,s),e.push({event:n,listeners:l}),n.target=gr)))}function Ts(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var _r={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},Pl={},id={};p&&(id=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);function Is(e){if(Pl[e])return Pl[e];if(!_r[e])return e;var n=_r[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in id)return Pl[e]=n[s];return e}var sd=Is("animationend"),od=Is("animationiteration"),ld=Is("animationstart"),ad=Is("transitionend"),ud=new Map,cd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(e,n){ud.set(e,n),c(n,[e])}for(var Rl=0;Rl<cd.length;Rl++){var Dl=cd[Rl],jg=Dl.toLowerCase(),zg=Dl[0].toUpperCase()+Dl.slice(1);vn(jg,"on"+zg)}vn(sd,"onAnimationEnd"),vn(od,"onAnimationIteration"),vn(ld,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(ad,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bg=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function dd(e,n,s){var l=e.type||"unknown-event";e.currentTarget=s,jm(l,n,void 0,e),e.currentTarget=null}function hd(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],u=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var f=l.length-1;0<=f;f--){var _=l[f],y=_.instance,T=_.currentTarget;if(_=_.listener,y!==d&&u.isPropagationStopped())break e;dd(u,_,T),d=y}else for(f=0;f<l.length;f++){if(_=l[f],y=_.instance,T=_.currentTarget,_=_.listener,y!==d&&u.isPropagationStopped())break e;dd(u,_,T),d=y}}}if(hs)throw e=al,hs=!1,al=null,e}function ge(e,n){var s=n[bl];s===void 0&&(s=n[bl]=new Set);var l=e+"__bubble";s.has(l)||(fd(n,e,2,!1),s.add(l))}function Al(e,n,s){var l=0;n&&(l|=4),fd(s,e,l,n)}var Ps="_reactListening"+Math.random().toString(36).slice(2);function _i(e){if(!e[Ps]){e[Ps]=!0,o.forEach(function(s){s!=="selectionchange"&&(bg.has(s)||Al(s,!1,e),Al(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ps]||(n[Ps]=!0,Al("selectionchange",!1,n))}}function fd(e,n,s,l){switch(Fc(n)){case 1:var u=Zm;break;case 4:u=eg;break;default:u=ml}s=u.bind(null,n,s,e),u=void 0,!ll||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(n,s,{capture:!0,passive:u}):e.addEventListener(n,s,!0):u!==void 0?e.addEventListener(n,s,{passive:u}):e.addEventListener(n,s,!1)}function Ml(e,n,s,l,u){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var f=l.tag;if(f===3||f===4){var _=l.stateNode.containerInfo;if(_===u||_.nodeType===8&&_.parentNode===u)break;if(f===4)for(f=l.return;f!==null;){var y=f.tag;if((y===3||y===4)&&(y=f.stateNode.containerInfo,y===u||y.nodeType===8&&y.parentNode===u))return;f=f.return}for(;_!==null;){if(f=Bn(_),f===null)return;if(y=f.tag,y===5||y===6){l=d=f;continue e}_=_.parentNode}}l=l.return}vc(function(){var T=d,R=il(s),D=[];e:{var P=ud.get(e);if(P!==void 0){var j=vl,U=e;switch(e){case"keypress":if(Ss(s)===0)break e;case"keydown":case"keyup":j=mg;break;case"focusin":U="focus",j=Cl;break;case"focusout":U="blur",j=Cl;break;case"beforeblur":case"afterblur":j=Cl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=rg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=vg;break;case sd:case od:case ld:j=og;break;case ad:j=wg;break;case"scroll":j=tg;break;case"wheel":j=Eg;break;case"copy":case"cut":case"paste":j=ag;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Bc}var B=(n&4)!==0,Ne=!B&&e==="scroll",k=B?P!==null?P+"Capture":null:P;B=[];for(var w=T,N;w!==null;){N=w;var A=N.stateNode;if(N.tag===5&&A!==null&&(N=A,k!==null&&(A=Zr(w,k),A!=null&&B.push(vi(w,A,N)))),Ne)break;w=w.return}0<B.length&&(P=new j(P,U,null,s,R),D.push({event:P,listeners:B}))}}if((n&7)===0){e:{if(P=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",P&&s!==rl&&(U=s.relatedTarget||s.fromElement)&&(Bn(U)||U[Jt]))break e;if((j||P)&&(P=R.window===R?R:(P=R.ownerDocument)?P.defaultView||P.parentWindow:window,j?(U=s.relatedTarget||s.toElement,j=T,U=U?Bn(U):null,U!==null&&(Ne=Un(U),U!==Ne||U.tag!==5&&U.tag!==6)&&(U=null)):(j=null,U=T),j!==U)){if(B=bc,A="onMouseLeave",k="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(B=Bc,A="onPointerLeave",k="onPointerEnter",w="pointer"),Ne=j==null?P:wr(j),N=U==null?P:wr(U),P=new B(A,w+"leave",j,s,R),P.target=Ne,P.relatedTarget=N,A=null,Bn(R)===T&&(B=new B(k,w+"enter",U,s,R),B.target=N,B.relatedTarget=Ne,A=B),Ne=A,j&&U)t:{for(B=j,k=U,w=0,N=B;N;N=vr(N))w++;for(N=0,A=k;A;A=vr(A))N++;for(;0<w-N;)B=vr(B),w--;for(;0<N-w;)k=vr(k),N--;for(;w--;){if(B===k||k!==null&&B===k.alternate)break t;B=vr(B),k=vr(k)}B=null}else B=null;j!==null&&pd(D,P,j,B,!1),U!==null&&Ne!==null&&pd(D,Ne,U,B,!0)}}e:{if(P=T?wr(T):window,j=P.nodeName&&P.nodeName.toLowerCase(),j==="select"||j==="input"&&P.type==="file")var W=Pg;else if(Qc(P))if(Kc)W=Mg;else{W=Dg;var H=Rg}else(j=P.nodeName)&&j.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(W=Ag);if(W&&(W=W(e,T))){Yc(D,W,s,R);break e}H&&H(e,P,T),e==="focusout"&&(H=P._wrapperState)&&H.controlled&&P.type==="number"&&Jo(P,"number",P.value)}switch(H=T?wr(T):window,e){case"focusin":(Qc(H)||H.contentEditable==="true")&&(gr=H,Tl=T,mi=null);break;case"focusout":mi=Tl=gr=null;break;case"mousedown":Il=!0;break;case"contextmenu":case"mouseup":case"dragend":Il=!1,rd(D,s,R);break;case"selectionchange":if(Fg)break;case"keydown":case"keyup":rd(D,s,R)}var $;if(Sl)e:{switch(e){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else mr?$c(e,s)&&(Y="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Y="onCompositionStart");Y&&(Wc&&s.locale!=="ko"&&(mr||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&mr&&($=jc()):(_n=R,_l="value"in _n?_n.value:_n.textContent,mr=!0)),H=Rs(T,Y),0<H.length&&(Y=new Uc(Y,e,null,s,R),D.push({event:Y,listeners:H}),$?Y.data=$:($=Gc(s),$!==null&&(Y.data=$)))),($=kg?Ng(e,s):xg(e,s))&&(T=Rs(T,"onBeforeInput"),0<T.length&&(R=new Uc("onBeforeInput","beforeinput",null,s,R),D.push({event:R,listeners:T}),R.data=$))}hd(D,n)})}function vi(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Rs(e,n){for(var s=n+"Capture",l=[];e!==null;){var u=e,d=u.stateNode;u.tag===5&&d!==null&&(u=d,d=Zr(e,s),d!=null&&l.unshift(vi(e,d,u)),d=Zr(e,n),d!=null&&l.push(vi(e,d,u))),e=e.return}return l}function vr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pd(e,n,s,l,u){for(var d=n._reactName,f=[];s!==null&&s!==l;){var _=s,y=_.alternate,T=_.stateNode;if(y!==null&&y===l)break;_.tag===5&&T!==null&&(_=T,u?(y=Zr(s,d),y!=null&&f.unshift(vi(s,y,_))):u||(y=Zr(s,d),y!=null&&f.push(vi(s,y,_)))),s=s.return}f.length!==0&&e.push({event:n,listeners:f})}var Ug=/\r\n?/g,Bg=/\u0000|\uFFFD/g;function md(e){return(typeof e=="string"?e:""+e).replace(Ug,`
`).replace(Bg,"")}function Ds(e,n,s){if(n=md(n),md(e)!==n&&s)throw Error(r(425))}function As(){}var Ol=null,Ll=null;function Fl(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var jl=typeof setTimeout=="function"?setTimeout:void 0,Wg=typeof clearTimeout=="function"?clearTimeout:void 0,gd=typeof Promise=="function"?Promise:void 0,Vg=typeof queueMicrotask=="function"?queueMicrotask:typeof gd<"u"?function(e){return gd.resolve(null).then(e).catch(Hg)}:jl;function Hg(e){setTimeout(function(){throw e})}function zl(e,n){var s=n,l=0;do{var u=s.nextSibling;if(e.removeChild(s),u&&u.nodeType===8)if(s=u.data,s==="/$"){if(l===0){e.removeChild(u),ai(n);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=u}while(s);ai(n)}function yn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function _d(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var yr=Math.random().toString(36).slice(2),Qt="__reactFiber$"+yr,yi="__reactProps$"+yr,Jt="__reactContainer$"+yr,bl="__reactEvents$"+yr,$g="__reactListeners$"+yr,Gg="__reactHandles$"+yr;function Bn(e){var n=e[Qt];if(n)return n;for(var s=e.parentNode;s;){if(n=s[Jt]||s[Qt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=_d(e);e!==null;){if(s=e[Qt])return s;e=_d(e)}return n}e=s,s=e.parentNode}return null}function wi(e){return e=e[Qt]||e[Jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Ms(e){return e[yi]||null}var Ul=[],Cr=-1;function wn(e){return{current:e}}function _e(e){0>Cr||(e.current=Ul[Cr],Ul[Cr]=null,Cr--)}function he(e,n){Cr++,Ul[Cr]=e.current,e.current=n}var Cn={},Xe=wn(Cn),at=wn(!1),Wn=Cn;function Er(e,n){var s=e.type.contextTypes;if(!s)return Cn;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var u={},d;for(d in s)u[d]=n[d];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=u),u}function ut(e){return e=e.childContextTypes,e!=null}function Os(){_e(at),_e(Xe)}function vd(e,n,s){if(Xe.current!==Cn)throw Error(r(168));he(Xe,n),he(at,s)}function yd(e,n,s){var l=e.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var u in l)if(!(u in n))throw Error(r(108,se(e)||"Unknown",u));return z({},s,l)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cn,Wn=Xe.current,he(Xe,e),he(at,at.current),!0}function wd(e,n,s){var l=e.stateNode;if(!l)throw Error(r(169));s?(e=yd(e,n,Wn),l.__reactInternalMemoizedMergedChildContext=e,_e(at),_e(Xe),he(Xe,e)):_e(at),he(at,s)}var Zt=null,Fs=!1,Bl=!1;function Cd(e){Zt===null?Zt=[e]:Zt.push(e)}function Qg(e){Fs=!0,Cd(e)}function En(){if(!Bl&&Zt!==null){Bl=!0;var e=0,n=ue;try{var s=Zt;for(ue=1;e<s.length;e++){var l=s[e];do l=l(!0);while(l!==null)}Zt=null,Fs=!1}catch(u){throw Zt!==null&&(Zt=Zt.slice(e+1)),Sc(ul,En),u}finally{ue=n,Bl=!1}}return null}var Sr=[],kr=0,js=null,zs=0,kt=[],Nt=0,Vn=null,en=1,tn="";function Hn(e,n){Sr[kr++]=zs,Sr[kr++]=js,js=e,zs=n}function Ed(e,n,s){kt[Nt++]=en,kt[Nt++]=tn,kt[Nt++]=Vn,Vn=e;var l=en;e=tn;var u=32-At(l)-1;l&=~(1<<u),s+=1;var d=32-At(n)+u;if(30<d){var f=u-u%5;d=(l&(1<<f)-1).toString(32),l>>=f,u-=f,en=1<<32-At(n)+u|s<<u|l,tn=d+e}else en=1<<d|s<<u|l,tn=e}function Wl(e){e.return!==null&&(Hn(e,1),Ed(e,1,0))}function Vl(e){for(;e===js;)js=Sr[--kr],Sr[kr]=null,zs=Sr[--kr],Sr[kr]=null;for(;e===Vn;)Vn=kt[--Nt],kt[Nt]=null,tn=kt[--Nt],kt[Nt]=null,en=kt[--Nt],kt[Nt]=null}var Ct=null,Et=null,ye=!1,Ot=null;function Sd(e,n){var s=Pt(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function kd(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Ct=e,Et=yn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Ct=e,Et=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=Vn!==null?{id:en,overflow:tn}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Pt(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,Ct=e,Et=null,!0):!1;default:return!1}}function Hl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $l(e){if(ye){var n=Et;if(n){var s=n;if(!kd(e,n)){if(Hl(e))throw Error(r(418));n=yn(s.nextSibling);var l=Ct;n&&kd(e,n)?Sd(l,s):(e.flags=e.flags&-4097|2,ye=!1,Ct=e)}}else{if(Hl(e))throw Error(r(418));e.flags=e.flags&-4097|2,ye=!1,Ct=e}}}function Nd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ct=e}function bs(e){if(e!==Ct)return!1;if(!ye)return Nd(e),ye=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Fl(e.type,e.memoizedProps)),n&&(n=Et)){if(Hl(e))throw xd(),Error(r(418));for(;n;)Sd(e,n),n=yn(n.nextSibling)}if(Nd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){Et=yn(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}Et=null}}else Et=Ct?yn(e.stateNode.nextSibling):null;return!0}function xd(){for(var e=Et;e;)e=yn(e.nextSibling)}function Nr(){Et=Ct=null,ye=!1}function Gl(e){Ot===null?Ot=[e]:Ot.push(e)}var Yg=xe.ReactCurrentBatchConfig;function Ci(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(r(309));var l=s.stateNode}if(!l)throw Error(r(147,e));var u=l,d=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===d?n.ref:(n=function(f){var _=u.refs;f===null?delete _[d]:_[d]=f},n._stringRef=d,n)}if(typeof e!="string")throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function Us(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Td(e){var n=e._init;return n(e._payload)}function Id(e){function n(k,w){if(e){var N=k.deletions;N===null?(k.deletions=[w],k.flags|=16):N.push(w)}}function s(k,w){if(!e)return null;for(;w!==null;)n(k,w),w=w.sibling;return null}function l(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function u(k,w){return k=Rn(k,w),k.index=0,k.sibling=null,k}function d(k,w,N){return k.index=N,e?(N=k.alternate,N!==null?(N=N.index,N<w?(k.flags|=2,w):N):(k.flags|=2,w)):(k.flags|=1048576,w)}function f(k){return e&&k.alternate===null&&(k.flags|=2),k}function _(k,w,N,A){return w===null||w.tag!==6?(w=ja(N,k.mode,A),w.return=k,w):(w=u(w,N),w.return=k,w)}function y(k,w,N,A){var W=N.type;return W===qe?R(k,w,N.props.children,A,N.key):w!==null&&(w.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===$e&&Td(W)===w.type)?(A=u(w,N.props),A.ref=Ci(k,w,N),A.return=k,A):(A=co(N.type,N.key,N.props,null,k.mode,A),A.ref=Ci(k,w,N),A.return=k,A)}function T(k,w,N,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=za(N,k.mode,A),w.return=k,w):(w=u(w,N.children||[]),w.return=k,w)}function R(k,w,N,A,W){return w===null||w.tag!==7?(w=Jn(N,k.mode,A,W),w.return=k,w):(w=u(w,N),w.return=k,w)}function D(k,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ja(""+w,k.mode,N),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _t:return N=co(w.type,w.key,w.props,null,k.mode,N),N.ref=Ci(k,null,w),N.return=k,N;case He:return w=za(w,k.mode,N),w.return=k,w;case $e:var A=w._init;return D(k,A(w._payload),N)}if(qr(w)||G(w))return w=Jn(w,k.mode,N,null),w.return=k,w;Us(k,w)}return null}function P(k,w,N,A){var W=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return W!==null?null:_(k,w,""+N,A);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case _t:return N.key===W?y(k,w,N,A):null;case He:return N.key===W?T(k,w,N,A):null;case $e:return W=N._init,P(k,w,W(N._payload),A)}if(qr(N)||G(N))return W!==null?null:R(k,w,N,A,null);Us(k,N)}return null}function j(k,w,N,A,W){if(typeof A=="string"&&A!==""||typeof A=="number")return k=k.get(N)||null,_(w,k,""+A,W);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case _t:return k=k.get(A.key===null?N:A.key)||null,y(w,k,A,W);case He:return k=k.get(A.key===null?N:A.key)||null,T(w,k,A,W);case $e:var H=A._init;return j(k,w,N,H(A._payload),W)}if(qr(A)||G(A))return k=k.get(N)||null,R(w,k,A,W,null);Us(w,A)}return null}function U(k,w,N,A){for(var W=null,H=null,$=w,Y=w=0,je=null;$!==null&&Y<N.length;Y++){$.index>Y?(je=$,$=null):je=$.sibling;var oe=P(k,$,N[Y],A);if(oe===null){$===null&&($=je);break}e&&$&&oe.alternate===null&&n(k,$),w=d(oe,w,Y),H===null?W=oe:H.sibling=oe,H=oe,$=je}if(Y===N.length)return s(k,$),ye&&Hn(k,Y),W;if($===null){for(;Y<N.length;Y++)$=D(k,N[Y],A),$!==null&&(w=d($,w,Y),H===null?W=$:H.sibling=$,H=$);return ye&&Hn(k,Y),W}for($=l(k,$);Y<N.length;Y++)je=j($,k,Y,N[Y],A),je!==null&&(e&&je.alternate!==null&&$.delete(je.key===null?Y:je.key),w=d(je,w,Y),H===null?W=je:H.sibling=je,H=je);return e&&$.forEach(function(Dn){return n(k,Dn)}),ye&&Hn(k,Y),W}function B(k,w,N,A){var W=G(N);if(typeof W!="function")throw Error(r(150));if(N=W.call(N),N==null)throw Error(r(151));for(var H=W=null,$=w,Y=w=0,je=null,oe=N.next();$!==null&&!oe.done;Y++,oe=N.next()){$.index>Y?(je=$,$=null):je=$.sibling;var Dn=P(k,$,oe.value,A);if(Dn===null){$===null&&($=je);break}e&&$&&Dn.alternate===null&&n(k,$),w=d(Dn,w,Y),H===null?W=Dn:H.sibling=Dn,H=Dn,$=je}if(oe.done)return s(k,$),ye&&Hn(k,Y),W;if($===null){for(;!oe.done;Y++,oe=N.next())oe=D(k,oe.value,A),oe!==null&&(w=d(oe,w,Y),H===null?W=oe:H.sibling=oe,H=oe);return ye&&Hn(k,Y),W}for($=l(k,$);!oe.done;Y++,oe=N.next())oe=j($,k,Y,oe.value,A),oe!==null&&(e&&oe.alternate!==null&&$.delete(oe.key===null?Y:oe.key),w=d(oe,w,Y),H===null?W=oe:H.sibling=oe,H=oe);return e&&$.forEach(function(T_){return n(k,T_)}),ye&&Hn(k,Y),W}function Ne(k,w,N,A){if(typeof N=="object"&&N!==null&&N.type===qe&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case _t:e:{for(var W=N.key,H=w;H!==null;){if(H.key===W){if(W=N.type,W===qe){if(H.tag===7){s(k,H.sibling),w=u(H,N.props.children),w.return=k,k=w;break e}}else if(H.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===$e&&Td(W)===H.type){s(k,H.sibling),w=u(H,N.props),w.ref=Ci(k,H,N),w.return=k,k=w;break e}s(k,H);break}else n(k,H);H=H.sibling}N.type===qe?(w=Jn(N.props.children,k.mode,A,N.key),w.return=k,k=w):(A=co(N.type,N.key,N.props,null,k.mode,A),A.ref=Ci(k,w,N),A.return=k,k=A)}return f(k);case He:e:{for(H=N.key;w!==null;){if(w.key===H)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){s(k,w.sibling),w=u(w,N.children||[]),w.return=k,k=w;break e}else{s(k,w);break}else n(k,w);w=w.sibling}w=za(N,k.mode,A),w.return=k,k=w}return f(k);case $e:return H=N._init,Ne(k,w,H(N._payload),A)}if(qr(N))return U(k,w,N,A);if(G(N))return B(k,w,N,A);Us(k,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(s(k,w.sibling),w=u(w,N),w.return=k,k=w):(s(k,w),w=ja(N,k.mode,A),w.return=k,k=w),f(k)):s(k,w)}return Ne}var xr=Id(!0),Pd=Id(!1),Bs=wn(null),Ws=null,Tr=null,Ql=null;function Yl(){Ql=Tr=Ws=null}function Kl(e){var n=Bs.current;_e(Bs),e._currentValue=n}function ql(e,n,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===s)break;e=e.return}}function Ir(e,n){Ws=e,Ql=Tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(ct=!0),e.firstContext=null)}function xt(e){var n=e._currentValue;if(Ql!==e)if(e={context:e,memoizedValue:n,next:null},Tr===null){if(Ws===null)throw Error(r(308));Tr=e,Ws.dependencies={lanes:0,firstContext:e}}else Tr=Tr.next=e;return n}var $n=null;function Xl(e){$n===null?$n=[e]:$n.push(e)}function Rd(e,n,s,l){var u=n.interleaved;return u===null?(s.next=s,Xl(n)):(s.next=u.next,u.next=s),n.interleaved=s,nn(e,l)}function nn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Sn=!1;function Jl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function kn(e,n,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ie&2)!==0){var u=l.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),l.pending=n,nn(e,s)}return u=l.interleaved,u===null?(n.next=n,Xl(l)):(n.next=u.next,u.next=n),l.interleaved=n,nn(e,s)}function Vs(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,hl(e,s)}}function Ad(e,n){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var u=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var f={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};d===null?u=d=f:d=d.next=f,s=s.next}while(s!==null);d===null?u=d=n:d=d.next=n}else u=d=n;s={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:l.shared,effects:l.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Hs(e,n,s,l){var u=e.updateQueue;Sn=!1;var d=u.firstBaseUpdate,f=u.lastBaseUpdate,_=u.shared.pending;if(_!==null){u.shared.pending=null;var y=_,T=y.next;y.next=null,f===null?d=T:f.next=T,f=y;var R=e.alternate;R!==null&&(R=R.updateQueue,_=R.lastBaseUpdate,_!==f&&(_===null?R.firstBaseUpdate=T:_.next=T,R.lastBaseUpdate=y))}if(d!==null){var D=u.baseState;f=0,R=T=y=null,_=d;do{var P=_.lane,j=_.eventTime;if((l&P)===P){R!==null&&(R=R.next={eventTime:j,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var U=e,B=_;switch(P=n,j=s,B.tag){case 1:if(U=B.payload,typeof U=="function"){D=U.call(j,D,P);break e}D=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=B.payload,P=typeof U=="function"?U.call(j,D,P):U,P==null)break e;D=z({},D,P);break e;case 2:Sn=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,P=u.effects,P===null?u.effects=[_]:P.push(_))}else j={eventTime:j,lane:P,tag:_.tag,payload:_.payload,callback:_.callback,next:null},R===null?(T=R=j,y=D):R=R.next=j,f|=P;if(_=_.next,_===null){if(_=u.shared.pending,_===null)break;P=_,_=P.next,P.next=null,u.lastBaseUpdate=P,u.shared.pending=null}}while(!0);if(R===null&&(y=D),u.baseState=y,u.firstBaseUpdate=T,u.lastBaseUpdate=R,n=u.shared.interleaved,n!==null){u=n;do f|=u.lane,u=u.next;while(u!==n)}else d===null&&(u.shared.lanes=0);Yn|=f,e.lanes=f,e.memoizedState=D}}function Md(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var l=e[n],u=l.callback;if(u!==null){if(l.callback=null,l=s,typeof u!="function")throw Error(r(191,u));u.call(l)}}}var Ei={},Yt=wn(Ei),Si=wn(Ei),ki=wn(Ei);function Gn(e){if(e===Ei)throw Error(r(174));return e}function Zl(e,n){switch(he(ki,n),he(Si,e),he(Yt,Ei),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:el(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=el(n,e)}_e(Yt),he(Yt,n)}function Pr(){_e(Yt),_e(Si),_e(ki)}function Od(e){Gn(ki.current);var n=Gn(Yt.current),s=el(n,e.type);n!==s&&(he(Si,e),he(Yt,s))}function ea(e){Si.current===e&&(_e(Yt),_e(Si))}var we=wn(0);function $s(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var Gs=xe.ReactCurrentDispatcher,ra=xe.ReactCurrentBatchConfig,Qn=0,Ce=null,Pe=null,Le=null,Qs=!1,Ni=!1,xi=0,Kg=0;function Je(){throw Error(r(321))}function ia(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Mt(e[s],n[s]))return!1;return!0}function sa(e,n,s,l,u,d){if(Qn=d,Ce=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Gs.current=e===null||e.memoizedState===null?Zg:e_,e=s(l,u),Ni){d=0;do{if(Ni=!1,xi=0,25<=d)throw Error(r(301));d+=1,Le=Pe=null,n.updateQueue=null,Gs.current=t_,e=s(l,u)}while(Ni)}if(Gs.current=qs,n=Pe!==null&&Pe.next!==null,Qn=0,Le=Pe=Ce=null,Qs=!1,n)throw Error(r(300));return e}function oa(){var e=xi!==0;return xi=0,e}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Ce.memoizedState=Le=e:Le=Le.next=e,Le}function Tt(){if(Pe===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var n=Le===null?Ce.memoizedState:Le.next;if(n!==null)Le=n,Pe=e;else{if(e===null)throw Error(r(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Le===null?Ce.memoizedState=Le=e:Le=Le.next=e}return Le}function Ti(e,n){return typeof n=="function"?n(e):n}function la(e){var n=Tt(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var l=Pe,u=l.baseQueue,d=s.pending;if(d!==null){if(u!==null){var f=u.next;u.next=d.next,d.next=f}l.baseQueue=u=d,s.pending=null}if(u!==null){d=u.next,l=l.baseState;var _=f=null,y=null,T=d;do{var R=T.lane;if((Qn&R)===R)y!==null&&(y=y.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),l=T.hasEagerState?T.eagerState:e(l,T.action);else{var D={lane:R,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};y===null?(_=y=D,f=l):y=y.next=D,Ce.lanes|=R,Yn|=R}T=T.next}while(T!==null&&T!==d);y===null?f=l:y.next=_,Mt(l,n.memoizedState)||(ct=!0),n.memoizedState=l,n.baseState=f,n.baseQueue=y,s.lastRenderedState=l}if(e=s.interleaved,e!==null){u=e;do d=u.lane,Ce.lanes|=d,Yn|=d,u=u.next;while(u!==e)}else u===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function aa(e){var n=Tt(),s=n.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var l=s.dispatch,u=s.pending,d=n.memoizedState;if(u!==null){s.pending=null;var f=u=u.next;do d=e(d,f.action),f=f.next;while(f!==u);Mt(d,n.memoizedState)||(ct=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),s.lastRenderedState=d}return[d,l]}function Ld(){}function Fd(e,n){var s=Ce,l=Tt(),u=n(),d=!Mt(l.memoizedState,u);if(d&&(l.memoizedState=u,ct=!0),l=l.queue,ua(bd.bind(null,s,l,e),[e]),l.getSnapshot!==n||d||Le!==null&&Le.memoizedState.tag&1){if(s.flags|=2048,Ii(9,zd.bind(null,s,l,u,n),void 0,null),Fe===null)throw Error(r(349));(Qn&30)!==0||jd(s,n,u)}return u}function jd(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Ce.updateQueue,n===null?(n={lastEffect:null,stores:null},Ce.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function zd(e,n,s,l){n.value=s,n.getSnapshot=l,Ud(n)&&Bd(e)}function bd(e,n,s){return s(function(){Ud(n)&&Bd(e)})}function Ud(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Mt(e,s)}catch{return!0}}function Bd(e){var n=nn(e,1);n!==null&&zt(n,e,1,-1)}function Wd(e){var n=Kt();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:e},n.queue=e,e=e.dispatch=Jg.bind(null,Ce,e),[n.memoizedState,e]}function Ii(e,n,s,l){return e={tag:e,create:n,destroy:s,deps:l,next:null},n=Ce.updateQueue,n===null?(n={lastEffect:null,stores:null},Ce.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,n.lastEffect=e)),e}function Vd(){return Tt().memoizedState}function Ys(e,n,s,l){var u=Kt();Ce.flags|=e,u.memoizedState=Ii(1|n,s,void 0,l===void 0?null:l)}function Ks(e,n,s,l){var u=Tt();l=l===void 0?null:l;var d=void 0;if(Pe!==null){var f=Pe.memoizedState;if(d=f.destroy,l!==null&&ia(l,f.deps)){u.memoizedState=Ii(n,s,d,l);return}}Ce.flags|=e,u.memoizedState=Ii(1|n,s,d,l)}function Hd(e,n){return Ys(8390656,8,e,n)}function ua(e,n){return Ks(2048,8,e,n)}function $d(e,n){return Ks(4,2,e,n)}function Gd(e,n){return Ks(4,4,e,n)}function Qd(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Yd(e,n,s){return s=s!=null?s.concat([e]):null,Ks(4,4,Qd.bind(null,n,e),s)}function ca(){}function Kd(e,n){var s=Tt();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&ia(n,l[1])?l[0]:(s.memoizedState=[e,n],e)}function qd(e,n){var s=Tt();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&ia(n,l[1])?l[0]:(e=e(),s.memoizedState=[e,n],e)}function Xd(e,n,s){return(Qn&21)===0?(e.baseState&&(e.baseState=!1,ct=!0),e.memoizedState=s):(Mt(s,n)||(s=Tc(),Ce.lanes|=s,Yn|=s,e.baseState=!0),n)}function qg(e,n){var s=ue;ue=s!==0&&4>s?s:4,e(!0);var l=ra.transition;ra.transition={};try{e(!1),n()}finally{ue=s,ra.transition=l}}function Jd(){return Tt().memoizedState}function Xg(e,n,s){var l=In(e);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},Zd(e))eh(n,s);else if(s=Rd(e,n,s,l),s!==null){var u=st();zt(s,e,l,u),th(s,n,l)}}function Jg(e,n,s){var l=In(e),u={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(Zd(e))eh(n,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var f=n.lastRenderedState,_=d(f,s);if(u.hasEagerState=!0,u.eagerState=_,Mt(_,f)){var y=n.interleaved;y===null?(u.next=u,Xl(n)):(u.next=y.next,y.next=u),n.interleaved=u;return}}catch{}s=Rd(e,n,u,l),s!==null&&(u=st(),zt(s,e,l,u),th(s,n,l))}}function Zd(e){var n=e.alternate;return e===Ce||n!==null&&n===Ce}function eh(e,n){Ni=Qs=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function th(e,n,s){if((s&4194240)!==0){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,hl(e,s)}}var qs={readContext:xt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},Zg={readContext:xt,useCallback:function(e,n){return Kt().memoizedState=[e,n===void 0?null:n],e},useContext:xt,useEffect:Hd,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,Ys(4194308,4,Qd.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Ys(4194308,4,e,n)},useInsertionEffect:function(e,n){return Ys(4,2,e,n)},useMemo:function(e,n){var s=Kt();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var l=Kt();return n=s!==void 0?s(n):n,l.memoizedState=l.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=Xg.bind(null,Ce,e),[l.memoizedState,e]},useRef:function(e){var n=Kt();return e={current:e},n.memoizedState=e},useState:Wd,useDebugValue:ca,useDeferredValue:function(e){return Kt().memoizedState=e},useTransition:function(){var e=Wd(!1),n=e[0];return e=qg.bind(null,e[1]),Kt().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var l=Ce,u=Kt();if(ye){if(s===void 0)throw Error(r(407));s=s()}else{if(s=n(),Fe===null)throw Error(r(349));(Qn&30)!==0||jd(l,n,s)}u.memoizedState=s;var d={value:s,getSnapshot:n};return u.queue=d,Hd(bd.bind(null,l,d,e),[e]),l.flags|=2048,Ii(9,zd.bind(null,l,d,s,n),void 0,null),s},useId:function(){var e=Kt(),n=Fe.identifierPrefix;if(ye){var s=tn,l=en;s=(l&~(1<<32-At(l)-1)).toString(32)+s,n=":"+n+"R"+s,s=xi++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=Kg++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},e_={readContext:xt,useCallback:Kd,useContext:xt,useEffect:ua,useImperativeHandle:Yd,useInsertionEffect:$d,useLayoutEffect:Gd,useMemo:qd,useReducer:la,useRef:Vd,useState:function(){return la(Ti)},useDebugValue:ca,useDeferredValue:function(e){var n=Tt();return Xd(n,Pe.memoizedState,e)},useTransition:function(){var e=la(Ti)[0],n=Tt().memoizedState;return[e,n]},useMutableSource:Ld,useSyncExternalStore:Fd,useId:Jd,unstable_isNewReconciler:!1},t_={readContext:xt,useCallback:Kd,useContext:xt,useEffect:ua,useImperativeHandle:Yd,useInsertionEffect:$d,useLayoutEffect:Gd,useMemo:qd,useReducer:aa,useRef:Vd,useState:function(){return aa(Ti)},useDebugValue:ca,useDeferredValue:function(e){var n=Tt();return Pe===null?n.memoizedState=e:Xd(n,Pe.memoizedState,e)},useTransition:function(){var e=aa(Ti)[0],n=Tt().memoizedState;return[e,n]},useMutableSource:Ld,useSyncExternalStore:Fd,useId:Jd,unstable_isNewReconciler:!1};function Lt(e,n){if(e&&e.defaultProps){n=z({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function da(e,n,s,l){n=e.memoizedState,s=s(l,n),s=s==null?n:z({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Xs={isMounted:function(e){return(e=e._reactInternals)?Un(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var l=st(),u=In(e),d=rn(l,u);d.payload=n,s!=null&&(d.callback=s),n=kn(e,d,u),n!==null&&(zt(n,e,u,l),Vs(n,e,u))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var l=st(),u=In(e),d=rn(l,u);d.tag=1,d.payload=n,s!=null&&(d.callback=s),n=kn(e,d,u),n!==null&&(zt(n,e,u,l),Vs(n,e,u))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=st(),l=In(e),u=rn(s,l);u.tag=2,n!=null&&(u.callback=n),n=kn(e,u,l),n!==null&&(zt(n,e,l,s),Vs(n,e,l))}};function nh(e,n,s,l,u,d,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,f):n.prototype&&n.prototype.isPureReactComponent?!pi(s,l)||!pi(u,d):!0}function rh(e,n,s){var l=!1,u=Cn,d=n.contextType;return typeof d=="object"&&d!==null?d=xt(d):(u=ut(n)?Wn:Xe.current,l=n.contextTypes,d=(l=l!=null)?Er(e,u):Cn),n=new n(s,d),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Xs,e.stateNode=n,n._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=d),n}function ih(e,n,s,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==e&&Xs.enqueueReplaceState(n,n.state,null)}function ha(e,n,s,l){var u=e.stateNode;u.props=s,u.state=e.memoizedState,u.refs={},Jl(e);var d=n.contextType;typeof d=="object"&&d!==null?u.context=xt(d):(d=ut(n)?Wn:Xe.current,u.context=Er(e,d)),u.state=e.memoizedState,d=n.getDerivedStateFromProps,typeof d=="function"&&(da(e,n,d,s),u.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(n=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),n!==u.state&&Xs.enqueueReplaceState(u,u.state,null),Hs(e,s,u,l),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Rr(e,n){try{var s="",l=n;do s+=q(l),l=l.return;while(l);var u=s}catch(d){u=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:n,stack:u,digest:null}}function fa(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function pa(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var n_=typeof WeakMap=="function"?WeakMap:Map;function sh(e,n,s){s=rn(-1,s),s.tag=3,s.payload={element:null};var l=n.value;return s.callback=function(){io||(io=!0,Pa=l),pa(e,n)},s}function oh(e,n,s){s=rn(-1,s),s.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var u=n.value;s.payload=function(){return l(u)},s.callback=function(){pa(e,n)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(s.callback=function(){pa(e,n),typeof l!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var f=n.stack;this.componentDidCatch(n.value,{componentStack:f!==null?f:""})}),s}function lh(e,n,s){var l=e.pingCache;if(l===null){l=e.pingCache=new n_;var u=new Set;l.set(n,u)}else u=l.get(n),u===void 0&&(u=new Set,l.set(n,u));u.has(s)||(u.add(s),e=g_.bind(null,e,n,s),n.then(e,e))}function ah(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function uh(e,n,s,l,u){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=rn(-1,1),n.tag=2,kn(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var r_=xe.ReactCurrentOwner,ct=!1;function it(e,n,s,l){n.child=e===null?Pd(n,null,s,l):xr(n,e.child,s,l)}function ch(e,n,s,l,u){s=s.render;var d=n.ref;return Ir(n,u),l=sa(e,n,s,l,d,u),s=oa(),e!==null&&!ct?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,sn(e,n,u)):(ye&&s&&Wl(n),n.flags|=1,it(e,n,l,u),n.child)}function dh(e,n,s,l,u){if(e===null){var d=s.type;return typeof d=="function"&&!Fa(d)&&d.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=d,hh(e,n,d,l,u)):(e=co(s.type,null,l,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,(e.lanes&u)===0){var f=d.memoizedProps;if(s=s.compare,s=s!==null?s:pi,s(f,l)&&e.ref===n.ref)return sn(e,n,u)}return n.flags|=1,e=Rn(d,l),e.ref=n.ref,e.return=n,n.child=e}function hh(e,n,s,l,u){if(e!==null){var d=e.memoizedProps;if(pi(d,l)&&e.ref===n.ref)if(ct=!1,n.pendingProps=l=d,(e.lanes&u)!==0)(e.flags&131072)!==0&&(ct=!0);else return n.lanes=e.lanes,sn(e,n,u)}return ma(e,n,s,l,u)}function fh(e,n,s){var l=n.pendingProps,u=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(Ar,St),St|=s;else{if((s&1073741824)===0)return e=d!==null?d.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,he(Ar,St),St|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=d!==null?d.baseLanes:s,he(Ar,St),St|=l}else d!==null?(l=d.baseLanes|s,n.memoizedState=null):l=s,he(Ar,St),St|=l;return it(e,n,u,s),n.child}function ph(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function ma(e,n,s,l,u){var d=ut(s)?Wn:Xe.current;return d=Er(n,d),Ir(n,u),s=sa(e,n,s,l,d,u),l=oa(),e!==null&&!ct?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,sn(e,n,u)):(ye&&l&&Wl(n),n.flags|=1,it(e,n,s,u),n.child)}function mh(e,n,s,l,u){if(ut(s)){var d=!0;Ls(n)}else d=!1;if(Ir(n,u),n.stateNode===null)Zs(e,n),rh(n,s,l),ha(n,s,l,u),l=!0;else if(e===null){var f=n.stateNode,_=n.memoizedProps;f.props=_;var y=f.context,T=s.contextType;typeof T=="object"&&T!==null?T=xt(T):(T=ut(s)?Wn:Xe.current,T=Er(n,T));var R=s.getDerivedStateFromProps,D=typeof R=="function"||typeof f.getSnapshotBeforeUpdate=="function";D||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==l||y!==T)&&ih(n,f,l,T),Sn=!1;var P=n.memoizedState;f.state=P,Hs(n,l,f,u),y=n.memoizedState,_!==l||P!==y||at.current||Sn?(typeof R=="function"&&(da(n,s,R,l),y=n.memoizedState),(_=Sn||nh(n,s,_,l,P,y,T))?(D||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=y),f.props=l,f.state=y,f.context=T,l=_):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,Dd(e,n),_=n.memoizedProps,T=n.type===n.elementType?_:Lt(n.type,_),f.props=T,D=n.pendingProps,P=f.context,y=s.contextType,typeof y=="object"&&y!==null?y=xt(y):(y=ut(s)?Wn:Xe.current,y=Er(n,y));var j=s.getDerivedStateFromProps;(R=typeof j=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==D||P!==y)&&ih(n,f,l,y),Sn=!1,P=n.memoizedState,f.state=P,Hs(n,l,f,u);var U=n.memoizedState;_!==D||P!==U||at.current||Sn?(typeof j=="function"&&(da(n,s,j,l),U=n.memoizedState),(T=Sn||nh(n,s,T,l,P,U,y)||!1)?(R||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,U,y),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,U,y)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===e.memoizedProps&&P===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&P===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=U),f.props=l,f.state=U,f.context=y,l=T):(typeof f.componentDidUpdate!="function"||_===e.memoizedProps&&P===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&P===e.memoizedState||(n.flags|=1024),l=!1)}return ga(e,n,s,l,d,u)}function ga(e,n,s,l,u,d){ph(e,n);var f=(n.flags&128)!==0;if(!l&&!f)return u&&wd(n,s,!1),sn(e,n,d);l=n.stateNode,r_.current=n;var _=f&&typeof s.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,e!==null&&f?(n.child=xr(n,e.child,null,d),n.child=xr(n,null,_,d)):it(e,n,_,d),n.memoizedState=l.state,u&&wd(n,s,!0),n.child}function gh(e){var n=e.stateNode;n.pendingContext?vd(e,n.pendingContext,n.pendingContext!==n.context):n.context&&vd(e,n.context,!1),Zl(e,n.containerInfo)}function _h(e,n,s,l,u){return Nr(),Gl(u),n.flags|=256,it(e,n,s,l),n.child}var _a={dehydrated:null,treeContext:null,retryLane:0};function va(e){return{baseLanes:e,cachePool:null,transitions:null}}function vh(e,n,s){var l=n.pendingProps,u=we.current,d=!1,f=(n.flags&128)!==0,_;if((_=f)||(_=e!==null&&e.memoizedState===null?!1:(u&2)!==0),_?(d=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),he(we,u&1),e===null)return $l(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(f=l.children,e=l.fallback,d?(l=n.mode,d=n.child,f={mode:"hidden",children:f},(l&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=f):d=ho(f,l,0,null),e=Jn(e,l,s,null),d.return=n,e.return=n,d.sibling=e,n.child=d,n.child.memoizedState=va(s),n.memoizedState=_a,e):ya(n,f));if(u=e.memoizedState,u!==null&&(_=u.dehydrated,_!==null))return i_(e,n,f,l,_,u,s);if(d){d=l.fallback,f=n.mode,u=e.child,_=u.sibling;var y={mode:"hidden",children:l.children};return(f&1)===0&&n.child!==u?(l=n.child,l.childLanes=0,l.pendingProps=y,n.deletions=null):(l=Rn(u,y),l.subtreeFlags=u.subtreeFlags&14680064),_!==null?d=Rn(_,d):(d=Jn(d,f,s,null),d.flags|=2),d.return=n,l.return=n,l.sibling=d,n.child=l,l=d,d=n.child,f=e.child.memoizedState,f=f===null?va(s):{baseLanes:f.baseLanes|s,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=e.childLanes&~s,n.memoizedState=_a,l}return d=e.child,e=d.sibling,l=Rn(d,{mode:"visible",children:l.children}),(n.mode&1)===0&&(l.lanes=s),l.return=n,l.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=l,n.memoizedState=null,l}function ya(e,n){return n=ho({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Js(e,n,s,l){return l!==null&&Gl(l),xr(n,e.child,null,s),e=ya(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function i_(e,n,s,l,u,d,f){if(s)return n.flags&256?(n.flags&=-257,l=fa(Error(r(422))),Js(e,n,f,l)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(d=l.fallback,u=n.mode,l=ho({mode:"visible",children:l.children},u,0,null),d=Jn(d,u,f,null),d.flags|=2,l.return=n,d.return=n,l.sibling=d,n.child=l,(n.mode&1)!==0&&xr(n,e.child,null,f),n.child.memoizedState=va(f),n.memoizedState=_a,d);if((n.mode&1)===0)return Js(e,n,f,null);if(u.data==="$!"){if(l=u.nextSibling&&u.nextSibling.dataset,l)var _=l.dgst;return l=_,d=Error(r(419)),l=fa(d,l,void 0),Js(e,n,f,l)}if(_=(f&e.childLanes)!==0,ct||_){if(l=Fe,l!==null){switch(f&-f){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(l.suspendedLanes|f))!==0?0:u,u!==0&&u!==d.retryLane&&(d.retryLane=u,nn(e,u),zt(l,e,u,-1))}return La(),l=fa(Error(r(421))),Js(e,n,f,l)}return u.data==="$?"?(n.flags|=128,n.child=e.child,n=__.bind(null,e),u._reactRetry=n,null):(e=d.treeContext,Et=yn(u.nextSibling),Ct=n,ye=!0,Ot=null,e!==null&&(kt[Nt++]=en,kt[Nt++]=tn,kt[Nt++]=Vn,en=e.id,tn=e.overflow,Vn=n),n=ya(n,l.children),n.flags|=4096,n)}function yh(e,n,s){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),ql(e.return,n,s)}function wa(e,n,s,l,u){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:u}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=s,d.tailMode=u)}function wh(e,n,s){var l=n.pendingProps,u=l.revealOrder,d=l.tail;if(it(e,n,l.children,s),l=we.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yh(e,s,n);else if(e.tag===19)yh(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(he(we,l),(n.mode&1)===0)n.memoizedState=null;else switch(u){case"forwards":for(s=n.child,u=null;s!==null;)e=s.alternate,e!==null&&$s(e)===null&&(u=s),s=s.sibling;s=u,s===null?(u=n.child,n.child=null):(u=s.sibling,s.sibling=null),wa(n,!1,u,s,d);break;case"backwards":for(s=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&$s(e)===null){n.child=u;break}e=u.sibling,u.sibling=s,s=u,u=e}wa(n,!0,s,null,d);break;case"together":wa(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Zs(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function sn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Yn|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,s=Rn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Rn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function s_(e,n,s){switch(n.tag){case 3:gh(n),Nr();break;case 5:Od(n);break;case 1:ut(n.type)&&Ls(n);break;case 4:Zl(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,u=n.memoizedProps.value;he(Bs,l._currentValue),l._currentValue=u;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(he(we,we.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?vh(e,n,s):(he(we,we.current&1),e=sn(e,n,s),e!==null?e.sibling:null);he(we,we.current&1);break;case 19:if(l=(s&n.childLanes)!==0,(e.flags&128)!==0){if(l)return wh(e,n,s);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),he(we,we.current),l)break;return null;case 22:case 23:return n.lanes=0,fh(e,n,s)}return sn(e,n,s)}var Ch,Ca,Eh,Sh;Ch=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Ca=function(){},Eh=function(e,n,s,l){var u=e.memoizedProps;if(u!==l){e=n.stateNode,Gn(Yt.current);var d=null;switch(s){case"input":u=Kr(e,u),l=Kr(e,l),d=[];break;case"select":u=z({},u,{value:void 0}),l=z({},l,{value:void 0}),d=[];break;case"textarea":u=Zo(e,u),l=Zo(e,l),d=[];break;default:typeof u.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=As)}tl(s,l);var f;s=null;for(T in u)if(!l.hasOwnProperty(T)&&u.hasOwnProperty(T)&&u[T]!=null)if(T==="style"){var _=u[T];for(f in _)_.hasOwnProperty(f)&&(s||(s={}),s[f]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(a.hasOwnProperty(T)?d||(d=[]):(d=d||[]).push(T,null));for(T in l){var y=l[T];if(_=u?.[T],l.hasOwnProperty(T)&&y!==_&&(y!=null||_!=null))if(T==="style")if(_){for(f in _)!_.hasOwnProperty(f)||y&&y.hasOwnProperty(f)||(s||(s={}),s[f]="");for(f in y)y.hasOwnProperty(f)&&_[f]!==y[f]&&(s||(s={}),s[f]=y[f])}else s||(d||(d=[]),d.push(T,s)),s=y;else T==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,_=_?_.__html:void 0,y!=null&&_!==y&&(d=d||[]).push(T,y)):T==="children"?typeof y!="string"&&typeof y!="number"||(d=d||[]).push(T,""+y):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(a.hasOwnProperty(T)?(y!=null&&T==="onScroll"&&ge("scroll",e),d||_===y||(d=[])):(d=d||[]).push(T,y))}s&&(d=d||[]).push("style",s);var T=d;(n.updateQueue=T)&&(n.flags|=4)}},Sh=function(e,n,s,l){s!==l&&(n.flags|=4)};function Pi(e,n){if(!ye)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ze(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(n)for(var u=e.child;u!==null;)s|=u.lanes|u.childLanes,l|=u.subtreeFlags&14680064,l|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)s|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=s,n}function o_(e,n,s){var l=n.pendingProps;switch(Vl(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(n),null;case 1:return ut(n.type)&&Os(),Ze(n),null;case 3:return l=n.stateNode,Pr(),_e(at),_e(Xe),na(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(bs(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ot!==null&&(Aa(Ot),Ot=null))),Ca(e,n),Ze(n),null;case 5:ea(n);var u=Gn(ki.current);if(s=n.type,e!==null&&n.stateNode!=null)Eh(e,n,s,l,u),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(r(166));return Ze(n),null}if(e=Gn(Yt.current),bs(n)){l=n.stateNode,s=n.type;var d=n.memoizedProps;switch(l[Qt]=n,l[yi]=d,e=(n.mode&1)!==0,s){case"dialog":ge("cancel",l),ge("close",l);break;case"iframe":case"object":case"embed":ge("load",l);break;case"video":case"audio":for(u=0;u<gi.length;u++)ge(gi[u],l);break;case"source":ge("error",l);break;case"img":case"image":case"link":ge("error",l),ge("load",l);break;case"details":ge("toggle",l);break;case"input":us(l,d),ge("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!d.multiple},ge("invalid",l);break;case"textarea":oc(l,d),ge("invalid",l)}tl(s,d),u=null;for(var f in d)if(d.hasOwnProperty(f)){var _=d[f];f==="children"?typeof _=="string"?l.textContent!==_&&(d.suppressHydrationWarning!==!0&&Ds(l.textContent,_,e),u=["children",_]):typeof _=="number"&&l.textContent!==""+_&&(d.suppressHydrationWarning!==!0&&Ds(l.textContent,_,e),u=["children",""+_]):a.hasOwnProperty(f)&&_!=null&&f==="onScroll"&&ge("scroll",l)}switch(s){case"input":lr(l),sc(l,d,!0);break;case"textarea":lr(l),ac(l);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(l.onclick=As)}l=u,n.updateQueue=l,l!==null&&(n.flags|=4)}else{f=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uc(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=f.createElement(s,{is:l.is}):(e=f.createElement(s),s==="select"&&(f=e,l.multiple?f.multiple=!0:l.size&&(f.size=l.size))):e=f.createElementNS(e,s),e[Qt]=n,e[yi]=l,Ch(e,n,!1,!1),n.stateNode=e;e:{switch(f=nl(s,l),s){case"dialog":ge("cancel",e),ge("close",e),u=l;break;case"iframe":case"object":case"embed":ge("load",e),u=l;break;case"video":case"audio":for(u=0;u<gi.length;u++)ge(gi[u],e);u=l;break;case"source":ge("error",e),u=l;break;case"img":case"image":case"link":ge("error",e),ge("load",e),u=l;break;case"details":ge("toggle",e),u=l;break;case"input":us(e,l),u=Kr(e,l),ge("invalid",e);break;case"option":u=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},u=z({},l,{value:void 0}),ge("invalid",e);break;case"textarea":oc(e,l),u=Zo(e,l),ge("invalid",e);break;default:u=l}tl(s,u),_=u;for(d in _)if(_.hasOwnProperty(d)){var y=_[d];d==="style"?hc(e,y):d==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&cc(e,y)):d==="children"?typeof y=="string"?(s!=="textarea"||y!=="")&&Xr(e,y):typeof y=="number"&&Xr(e,""+y):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(a.hasOwnProperty(d)?y!=null&&d==="onScroll"&&ge("scroll",e):y!=null&&Ve(e,d,y,f))}switch(s){case"input":lr(e),sc(e,l,!1);break;case"textarea":lr(e),ac(e);break;case"option":l.value!=null&&e.setAttribute("value",""+ae(l.value));break;case"select":e.multiple=!!l.multiple,d=l.value,d!=null?cr(e,!!l.multiple,d,!1):l.defaultValue!=null&&cr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=As)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ze(n),null;case 6:if(e&&n.stateNode!=null)Sh(e,n,e.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(s=Gn(ki.current),Gn(Yt.current),bs(n)){if(l=n.stateNode,s=n.memoizedProps,l[Qt]=n,(d=l.nodeValue!==s)&&(e=Ct,e!==null))switch(e.tag){case 3:Ds(l.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ds(l.nodeValue,s,(e.mode&1)!==0)}d&&(n.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[Qt]=n,n.stateNode=l}return Ze(n),null;case 13:if(_e(we),l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ye&&Et!==null&&(n.mode&1)!==0&&(n.flags&128)===0)xd(),Nr(),n.flags|=98560,d=!1;else if(d=bs(n),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Qt]=n}else Nr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ze(n),d=!1}else Ot!==null&&(Aa(Ot),Ot=null),d=!0;if(!d)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(we.current&1)!==0?Re===0&&(Re=3):La())),n.updateQueue!==null&&(n.flags|=4),Ze(n),null);case 4:return Pr(),Ca(e,n),e===null&&_i(n.stateNode.containerInfo),Ze(n),null;case 10:return Kl(n.type._context),Ze(n),null;case 17:return ut(n.type)&&Os(),Ze(n),null;case 19:if(_e(we),d=n.memoizedState,d===null)return Ze(n),null;if(l=(n.flags&128)!==0,f=d.rendering,f===null)if(l)Pi(d,!1);else{if(Re!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=$s(e),f!==null){for(n.flags|=128,Pi(d,!1),l=f.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=s,s=n.child;s!==null;)d=s,e=l,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,e=f.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return he(we,we.current&1|2),n.child}e=e.sibling}d.tail!==null&&ke()>Mr&&(n.flags|=128,l=!0,Pi(d,!1),n.lanes=4194304)}else{if(!l)if(e=$s(f),e!==null){if(n.flags|=128,l=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Pi(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!ye)return Ze(n),null}else 2*ke()-d.renderingStartTime>Mr&&s!==1073741824&&(n.flags|=128,l=!0,Pi(d,!1),n.lanes=4194304);d.isBackwards?(f.sibling=n.child,n.child=f):(s=d.last,s!==null?s.sibling=f:n.child=f,d.last=f)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=ke(),n.sibling=null,s=we.current,he(we,l?s&1|2:s&1),n):(Ze(n),null);case 22:case 23:return Oa(),l=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(n.flags|=8192),l&&(n.mode&1)!==0?(St&1073741824)!==0&&(Ze(n),n.subtreeFlags&6&&(n.flags|=8192)):Ze(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function l_(e,n){switch(Vl(n),n.tag){case 1:return ut(n.type)&&Os(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Pr(),_e(at),_e(Xe),na(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return ea(n),null;case 13:if(_e(we),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Nr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return _e(we),null;case 4:return Pr(),null;case 10:return Kl(n.type._context),null;case 22:case 23:return Oa(),null;case 24:return null;default:return null}}var eo=!1,et=!1,a_=typeof WeakSet=="function"?WeakSet:Set,b=null;function Dr(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){Ee(e,n,l)}else s.current=null}function Ea(e,n,s){try{s()}catch(l){Ee(e,n,l)}}var kh=!1;function u_(e,n){if(Ol=ws,e=nd(),xl(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var u=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var f=0,_=-1,y=-1,T=0,R=0,D=e,P=null;t:for(;;){for(var j;D!==s||u!==0&&D.nodeType!==3||(_=f+u),D!==d||l!==0&&D.nodeType!==3||(y=f+l),D.nodeType===3&&(f+=D.nodeValue.length),(j=D.firstChild)!==null;)P=D,D=j;for(;;){if(D===e)break t;if(P===s&&++T===u&&(_=f),P===d&&++R===l&&(y=f),(j=D.nextSibling)!==null)break;D=P,P=D.parentNode}D=j}s=_===-1||y===-1?null:{start:_,end:y}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ll={focusedElem:e,selectionRange:s},ws=!1,b=n;b!==null;)if(n=b,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,b=e;else for(;b!==null;){n=b;try{var U=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var B=U.memoizedProps,Ne=U.memoizedState,k=n.stateNode,w=k.getSnapshotBeforeUpdate(n.elementType===n.type?B:Lt(n.type,B),Ne);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=n.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(A){Ee(n,n.return,A)}if(e=n.sibling,e!==null){e.return=n.return,b=e;break}b=n.return}return U=kh,kh=!1,U}function Ri(e,n,s){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&e)===e){var d=u.destroy;u.destroy=void 0,d!==void 0&&Ea(n,s,d)}u=u.next}while(u!==l)}}function to(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var l=s.create;s.destroy=l()}s=s.next}while(s!==n)}}function Sa(e){var n=e.ref;if(n!==null){var s=e.stateNode;e.tag,e=s,typeof n=="function"?n(e):n.current=e}}function Nh(e){var n=e.alternate;n!==null&&(e.alternate=null,Nh(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Qt],delete n[yi],delete n[bl],delete n[$g],delete n[Gg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xh(e){return e.tag===5||e.tag===3||e.tag===4}function Th(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ka(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=As));else if(l!==4&&(e=e.child,e!==null))for(ka(e,n,s),e=e.sibling;e!==null;)ka(e,n,s),e=e.sibling}function Na(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(Na(e,n,s),e=e.sibling;e!==null;)Na(e,n,s),e=e.sibling}var Qe=null,Ft=!1;function Nn(e,n,s){for(s=s.child;s!==null;)Ih(e,n,s),s=s.sibling}function Ih(e,n,s){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ps,s)}catch{}switch(s.tag){case 5:et||Dr(s,n);case 6:var l=Qe,u=Ft;Qe=null,Nn(e,n,s),Qe=l,Ft=u,Qe!==null&&(Ft?(e=Qe,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Qe.removeChild(s.stateNode));break;case 18:Qe!==null&&(Ft?(e=Qe,s=s.stateNode,e.nodeType===8?zl(e.parentNode,s):e.nodeType===1&&zl(e,s),ai(e)):zl(Qe,s.stateNode));break;case 4:l=Qe,u=Ft,Qe=s.stateNode.containerInfo,Ft=!0,Nn(e,n,s),Qe=l,Ft=u;break;case 0:case 11:case 14:case 15:if(!et&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){u=l=l.next;do{var d=u,f=d.destroy;d=d.tag,f!==void 0&&((d&2)!==0||(d&4)!==0)&&Ea(s,n,f),u=u.next}while(u!==l)}Nn(e,n,s);break;case 1:if(!et&&(Dr(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(_){Ee(s,n,_)}Nn(e,n,s);break;case 21:Nn(e,n,s);break;case 22:s.mode&1?(et=(l=et)||s.memoizedState!==null,Nn(e,n,s),et=l):Nn(e,n,s);break;default:Nn(e,n,s)}}function Ph(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new a_),n.forEach(function(l){var u=v_.bind(null,e,l);s.has(l)||(s.add(l),l.then(u,u))})}}function jt(e,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];try{var d=e,f=n,_=f;e:for(;_!==null;){switch(_.tag){case 5:Qe=_.stateNode,Ft=!1;break e;case 3:Qe=_.stateNode.containerInfo,Ft=!0;break e;case 4:Qe=_.stateNode.containerInfo,Ft=!0;break e}_=_.return}if(Qe===null)throw Error(r(160));Ih(d,f,u),Qe=null,Ft=!1;var y=u.alternate;y!==null&&(y.return=null),u.return=null}catch(T){Ee(u,n,T)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Rh(n,e),n=n.sibling}function Rh(e,n){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jt(n,e),qt(e),l&4){try{Ri(3,e,e.return),to(3,e)}catch(B){Ee(e,e.return,B)}try{Ri(5,e,e.return)}catch(B){Ee(e,e.return,B)}}break;case 1:jt(n,e),qt(e),l&512&&s!==null&&Dr(s,s.return);break;case 5:if(jt(n,e),qt(e),l&512&&s!==null&&Dr(s,s.return),e.flags&32){var u=e.stateNode;try{Xr(u,"")}catch(B){Ee(e,e.return,B)}}if(l&4&&(u=e.stateNode,u!=null)){var d=e.memoizedProps,f=s!==null?s.memoizedProps:d,_=e.type,y=e.updateQueue;if(e.updateQueue=null,y!==null)try{_==="input"&&d.type==="radio"&&d.name!=null&&ur(u,d),nl(_,f);var T=nl(_,d);for(f=0;f<y.length;f+=2){var R=y[f],D=y[f+1];R==="style"?hc(u,D):R==="dangerouslySetInnerHTML"?cc(u,D):R==="children"?Xr(u,D):Ve(u,R,D,T)}switch(_){case"input":bn(u,d);break;case"textarea":lc(u,d);break;case"select":var P=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!d.multiple;var j=d.value;j!=null?cr(u,!!d.multiple,j,!1):P!==!!d.multiple&&(d.defaultValue!=null?cr(u,!!d.multiple,d.defaultValue,!0):cr(u,!!d.multiple,d.multiple?[]:"",!1))}u[yi]=d}catch(B){Ee(e,e.return,B)}}break;case 6:if(jt(n,e),qt(e),l&4){if(e.stateNode===null)throw Error(r(162));u=e.stateNode,d=e.memoizedProps;try{u.nodeValue=d}catch(B){Ee(e,e.return,B)}}break;case 3:if(jt(n,e),qt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{ai(n.containerInfo)}catch(B){Ee(e,e.return,B)}break;case 4:jt(n,e),qt(e);break;case 13:jt(n,e),qt(e),u=e.child,u.flags&8192&&(d=u.memoizedState!==null,u.stateNode.isHidden=d,!d||u.alternate!==null&&u.alternate.memoizedState!==null||(Ia=ke())),l&4&&Ph(e);break;case 22:if(R=s!==null&&s.memoizedState!==null,e.mode&1?(et=(T=et)||R,jt(n,e),et=T):jt(n,e),qt(e),l&8192){if(T=e.memoizedState!==null,(e.stateNode.isHidden=T)&&!R&&(e.mode&1)!==0)for(b=e,R=e.child;R!==null;){for(D=b=R;b!==null;){switch(P=b,j=P.child,P.tag){case 0:case 11:case 14:case 15:Ri(4,P,P.return);break;case 1:Dr(P,P.return);var U=P.stateNode;if(typeof U.componentWillUnmount=="function"){l=P,s=P.return;try{n=l,U.props=n.memoizedProps,U.state=n.memoizedState,U.componentWillUnmount()}catch(B){Ee(l,s,B)}}break;case 5:Dr(P,P.return);break;case 22:if(P.memoizedState!==null){Mh(D);continue}}j!==null?(j.return=P,b=j):Mh(D)}R=R.sibling}e:for(R=null,D=e;;){if(D.tag===5){if(R===null){R=D;try{u=D.stateNode,T?(d=u.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(_=D.stateNode,y=D.memoizedProps.style,f=y!=null&&y.hasOwnProperty("display")?y.display:null,_.style.display=dc("display",f))}catch(B){Ee(e,e.return,B)}}}else if(D.tag===6){if(R===null)try{D.stateNode.nodeValue=T?"":D.memoizedProps}catch(B){Ee(e,e.return,B)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===e)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===e)break e;for(;D.sibling===null;){if(D.return===null||D.return===e)break e;R===D&&(R=null),D=D.return}R===D&&(R=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:jt(n,e),qt(e),l&4&&Ph(e);break;case 21:break;default:jt(n,e),qt(e)}}function qt(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(xh(s)){var l=s;break e}s=s.return}throw Error(r(160))}switch(l.tag){case 5:var u=l.stateNode;l.flags&32&&(Xr(u,""),l.flags&=-33);var d=Th(e);Na(e,d,u);break;case 3:case 4:var f=l.stateNode.containerInfo,_=Th(e);ka(e,_,f);break;default:throw Error(r(161))}}catch(y){Ee(e,e.return,y)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function c_(e,n,s){b=e,Dh(e)}function Dh(e,n,s){for(var l=(e.mode&1)!==0;b!==null;){var u=b,d=u.child;if(u.tag===22&&l){var f=u.memoizedState!==null||eo;if(!f){var _=u.alternate,y=_!==null&&_.memoizedState!==null||et;_=eo;var T=et;if(eo=f,(et=y)&&!T)for(b=u;b!==null;)f=b,y=f.child,f.tag===22&&f.memoizedState!==null?Oh(u):y!==null?(y.return=f,b=y):Oh(u);for(;d!==null;)b=d,Dh(d),d=d.sibling;b=u,eo=_,et=T}Ah(e)}else(u.subtreeFlags&8772)!==0&&d!==null?(d.return=u,b=d):Ah(e)}}function Ah(e){for(;b!==null;){var n=b;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:et||to(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!et)if(s===null)l.componentDidMount();else{var u=n.elementType===n.type?s.memoizedProps:Lt(n.type,s.memoizedProps);l.componentDidUpdate(u,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var d=n.updateQueue;d!==null&&Md(n,d,l);break;case 3:var f=n.updateQueue;if(f!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Md(n,f,s)}break;case 5:var _=n.stateNode;if(s===null&&n.flags&4){s=_;var y=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&s.focus();break;case"img":y.src&&(s.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var T=n.alternate;if(T!==null){var R=T.memoizedState;if(R!==null){var D=R.dehydrated;D!==null&&ai(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}et||n.flags&512&&Sa(n)}catch(P){Ee(n,n.return,P)}}if(n===e){b=null;break}if(s=n.sibling,s!==null){s.return=n.return,b=s;break}b=n.return}}function Mh(e){for(;b!==null;){var n=b;if(n===e){b=null;break}var s=n.sibling;if(s!==null){s.return=n.return,b=s;break}b=n.return}}function Oh(e){for(;b!==null;){var n=b;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{to(4,n)}catch(y){Ee(n,s,y)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var u=n.return;try{l.componentDidMount()}catch(y){Ee(n,u,y)}}var d=n.return;try{Sa(n)}catch(y){Ee(n,d,y)}break;case 5:var f=n.return;try{Sa(n)}catch(y){Ee(n,f,y)}}}catch(y){Ee(n,n.return,y)}if(n===e){b=null;break}var _=n.sibling;if(_!==null){_.return=n.return,b=_;break}b=n.return}}var d_=Math.ceil,no=xe.ReactCurrentDispatcher,xa=xe.ReactCurrentOwner,It=xe.ReactCurrentBatchConfig,ie=0,Fe=null,Ie=null,Ye=0,St=0,Ar=wn(0),Re=0,Di=null,Yn=0,ro=0,Ta=0,Ai=null,dt=null,Ia=0,Mr=1/0,on=null,io=!1,Pa=null,xn=null,so=!1,Tn=null,oo=0,Mi=0,Ra=null,lo=-1,ao=0;function st(){return(ie&6)!==0?ke():lo!==-1?lo:lo=ke()}function In(e){return(e.mode&1)===0?1:(ie&2)!==0&&Ye!==0?Ye&-Ye:Yg.transition!==null?(ao===0&&(ao=Tc()),ao):(e=ue,e!==0||(e=window.event,e=e===void 0?16:Fc(e.type)),e)}function zt(e,n,s,l){if(50<Mi)throw Mi=0,Ra=null,Error(r(185));ri(e,s,l),((ie&2)===0||e!==Fe)&&(e===Fe&&((ie&2)===0&&(ro|=s),Re===4&&Pn(e,Ye)),ht(e,l),s===1&&ie===0&&(n.mode&1)===0&&(Mr=ke()+500,Fs&&En()))}function ht(e,n){var s=e.callbackNode;Ym(e,n);var l=_s(e,e===Fe?Ye:0);if(l===0)s!==null&&kc(s),e.callbackNode=null,e.callbackPriority=0;else if(n=l&-l,e.callbackPriority!==n){if(s!=null&&kc(s),n===1)e.tag===0?Qg(Fh.bind(null,e)):Cd(Fh.bind(null,e)),Vg(function(){(ie&6)===0&&En()}),s=null;else{switch(Ic(l)){case 1:s=ul;break;case 4:s=Nc;break;case 16:s=fs;break;case 536870912:s=xc;break;default:s=fs}s=Hh(s,Lh.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Lh(e,n){if(lo=-1,ao=0,(ie&6)!==0)throw Error(r(327));var s=e.callbackNode;if(Or()&&e.callbackNode!==s)return null;var l=_s(e,e===Fe?Ye:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||n)n=uo(e,l);else{n=l;var u=ie;ie|=2;var d=zh();(Fe!==e||Ye!==n)&&(on=null,Mr=ke()+500,qn(e,n));do try{p_();break}catch(_){jh(e,_)}while(!0);Yl(),no.current=d,ie=u,Ie!==null?n=0:(Fe=null,Ye=0,n=Re)}if(n!==0){if(n===2&&(u=cl(e),u!==0&&(l=u,n=Da(e,u))),n===1)throw s=Di,qn(e,0),Pn(e,l),ht(e,ke()),s;if(n===6)Pn(e,l);else{if(u=e.current.alternate,(l&30)===0&&!h_(u)&&(n=uo(e,l),n===2&&(d=cl(e),d!==0&&(l=d,n=Da(e,d))),n===1))throw s=Di,qn(e,0),Pn(e,l),ht(e,ke()),s;switch(e.finishedWork=u,e.finishedLanes=l,n){case 0:case 1:throw Error(r(345));case 2:Xn(e,dt,on);break;case 3:if(Pn(e,l),(l&130023424)===l&&(n=Ia+500-ke(),10<n)){if(_s(e,0)!==0)break;if(u=e.suspendedLanes,(u&l)!==l){st(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=jl(Xn.bind(null,e,dt,on),n);break}Xn(e,dt,on);break;case 4:if(Pn(e,l),(l&4194240)===l)break;for(n=e.eventTimes,u=-1;0<l;){var f=31-At(l);d=1<<f,f=n[f],f>u&&(u=f),l&=~d}if(l=u,l=ke()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*d_(l/1960))-l,10<l){e.timeoutHandle=jl(Xn.bind(null,e,dt,on),l);break}Xn(e,dt,on);break;case 5:Xn(e,dt,on);break;default:throw Error(r(329))}}}return ht(e,ke()),e.callbackNode===s?Lh.bind(null,e):null}function Da(e,n){var s=Ai;return e.current.memoizedState.isDehydrated&&(qn(e,n).flags|=256),e=uo(e,n),e!==2&&(n=dt,dt=s,n!==null&&Aa(n)),e}function Aa(e){dt===null?dt=e:dt.push.apply(dt,e)}function h_(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var u=s[l],d=u.getSnapshot;u=u.value;try{if(!Mt(d(),u))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Pn(e,n){for(n&=~Ta,n&=~ro,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-At(n),l=1<<s;e[s]=-1,n&=~l}}function Fh(e){if((ie&6)!==0)throw Error(r(327));Or();var n=_s(e,0);if((n&1)===0)return ht(e,ke()),null;var s=uo(e,n);if(e.tag!==0&&s===2){var l=cl(e);l!==0&&(n=l,s=Da(e,l))}if(s===1)throw s=Di,qn(e,0),Pn(e,n),ht(e,ke()),s;if(s===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Xn(e,dt,on),ht(e,ke()),null}function Ma(e,n){var s=ie;ie|=1;try{return e(n)}finally{ie=s,ie===0&&(Mr=ke()+500,Fs&&En())}}function Kn(e){Tn!==null&&Tn.tag===0&&(ie&6)===0&&Or();var n=ie;ie|=1;var s=It.transition,l=ue;try{if(It.transition=null,ue=1,e)return e()}finally{ue=l,It.transition=s,ie=n,(ie&6)===0&&En()}}function Oa(){St=Ar.current,_e(Ar)}function qn(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Wg(s)),Ie!==null)for(s=Ie.return;s!==null;){var l=s;switch(Vl(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Os();break;case 3:Pr(),_e(at),_e(Xe),na();break;case 5:ea(l);break;case 4:Pr();break;case 13:_e(we);break;case 19:_e(we);break;case 10:Kl(l.type._context);break;case 22:case 23:Oa()}s=s.return}if(Fe=e,Ie=e=Rn(e.current,null),Ye=St=n,Re=0,Di=null,Ta=ro=Yn=0,dt=Ai=null,$n!==null){for(n=0;n<$n.length;n++)if(s=$n[n],l=s.interleaved,l!==null){s.interleaved=null;var u=l.next,d=s.pending;if(d!==null){var f=d.next;d.next=u,l.next=f}s.pending=l}$n=null}return e}function jh(e,n){do{var s=Ie;try{if(Yl(),Gs.current=qs,Qs){for(var l=Ce.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Qs=!1}if(Qn=0,Le=Pe=Ce=null,Ni=!1,xi=0,xa.current=null,s===null||s.return===null){Re=1,Di=n,Ie=null;break}e:{var d=e,f=s.return,_=s,y=n;if(n=Ye,_.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var T=y,R=_,D=R.tag;if((R.mode&1)===0&&(D===0||D===11||D===15)){var P=R.alternate;P?(R.updateQueue=P.updateQueue,R.memoizedState=P.memoizedState,R.lanes=P.lanes):(R.updateQueue=null,R.memoizedState=null)}var j=ah(f);if(j!==null){j.flags&=-257,uh(j,f,_,d,n),j.mode&1&&lh(d,T,n),n=j,y=T;var U=n.updateQueue;if(U===null){var B=new Set;B.add(y),n.updateQueue=B}else U.add(y);break e}else{if((n&1)===0){lh(d,T,n),La();break e}y=Error(r(426))}}else if(ye&&_.mode&1){var Ne=ah(f);if(Ne!==null){(Ne.flags&65536)===0&&(Ne.flags|=256),uh(Ne,f,_,d,n),Gl(Rr(y,_));break e}}d=y=Rr(y,_),Re!==4&&(Re=2),Ai===null?Ai=[d]:Ai.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,n&=-n,d.lanes|=n;var k=sh(d,y,n);Ad(d,k);break e;case 1:_=y;var w=d.type,N=d.stateNode;if((d.flags&128)===0&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(xn===null||!xn.has(N)))){d.flags|=65536,n&=-n,d.lanes|=n;var A=oh(d,_,n);Ad(d,A);break e}}d=d.return}while(d!==null)}Uh(s)}catch(W){n=W,Ie===s&&s!==null&&(Ie=s=s.return);continue}break}while(!0)}function zh(){var e=no.current;return no.current=qs,e===null?qs:e}function La(){(Re===0||Re===3||Re===2)&&(Re=4),Fe===null||(Yn&268435455)===0&&(ro&268435455)===0||Pn(Fe,Ye)}function uo(e,n){var s=ie;ie|=2;var l=zh();(Fe!==e||Ye!==n)&&(on=null,qn(e,n));do try{f_();break}catch(u){jh(e,u)}while(!0);if(Yl(),ie=s,no.current=l,Ie!==null)throw Error(r(261));return Fe=null,Ye=0,Re}function f_(){for(;Ie!==null;)bh(Ie)}function p_(){for(;Ie!==null&&!bm();)bh(Ie)}function bh(e){var n=Vh(e.alternate,e,St);e.memoizedProps=e.pendingProps,n===null?Uh(e):Ie=n,xa.current=null}function Uh(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=o_(s,n,St),s!==null){Ie=s;return}}else{if(s=l_(s,n),s!==null){s.flags&=32767,Ie=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Re=6,Ie=null;return}}if(n=n.sibling,n!==null){Ie=n;return}Ie=n=e}while(n!==null);Re===0&&(Re=5)}function Xn(e,n,s){var l=ue,u=It.transition;try{It.transition=null,ue=1,m_(e,n,s,l)}finally{It.transition=u,ue=l}return null}function m_(e,n,s,l){do Or();while(Tn!==null);if((ie&6)!==0)throw Error(r(327));s=e.finishedWork;var u=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var d=s.lanes|s.childLanes;if(Km(e,d),e===Fe&&(Ie=Fe=null,Ye=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||so||(so=!0,Hh(fs,function(){return Or(),null})),d=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||d){d=It.transition,It.transition=null;var f=ue;ue=1;var _=ie;ie|=4,xa.current=null,u_(e,s),Rh(s,e),Lg(Ll),ws=!!Ol,Ll=Ol=null,e.current=s,c_(s),Um(),ie=_,ue=f,It.transition=d}else e.current=s;if(so&&(so=!1,Tn=e,oo=u),d=e.pendingLanes,d===0&&(xn=null),Vm(s.stateNode),ht(e,ke()),n!==null)for(l=e.onRecoverableError,s=0;s<n.length;s++)u=n[s],l(u.value,{componentStack:u.stack,digest:u.digest});if(io)throw io=!1,e=Pa,Pa=null,e;return(oo&1)!==0&&e.tag!==0&&Or(),d=e.pendingLanes,(d&1)!==0?e===Ra?Mi++:(Mi=0,Ra=e):Mi=0,En(),null}function Or(){if(Tn!==null){var e=Ic(oo),n=It.transition,s=ue;try{if(It.transition=null,ue=16>e?16:e,Tn===null)var l=!1;else{if(e=Tn,Tn=null,oo=0,(ie&6)!==0)throw Error(r(331));var u=ie;for(ie|=4,b=e.current;b!==null;){var d=b,f=d.child;if((b.flags&16)!==0){var _=d.deletions;if(_!==null){for(var y=0;y<_.length;y++){var T=_[y];for(b=T;b!==null;){var R=b;switch(R.tag){case 0:case 11:case 15:Ri(8,R,d)}var D=R.child;if(D!==null)D.return=R,b=D;else for(;b!==null;){R=b;var P=R.sibling,j=R.return;if(Nh(R),R===T){b=null;break}if(P!==null){P.return=j,b=P;break}b=j}}}var U=d.alternate;if(U!==null){var B=U.child;if(B!==null){U.child=null;do{var Ne=B.sibling;B.sibling=null,B=Ne}while(B!==null)}}b=d}}if((d.subtreeFlags&2064)!==0&&f!==null)f.return=d,b=f;else e:for(;b!==null;){if(d=b,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:Ri(9,d,d.return)}var k=d.sibling;if(k!==null){k.return=d.return,b=k;break e}b=d.return}}var w=e.current;for(b=w;b!==null;){f=b;var N=f.child;if((f.subtreeFlags&2064)!==0&&N!==null)N.return=f,b=N;else e:for(f=w;b!==null;){if(_=b,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:to(9,_)}}catch(W){Ee(_,_.return,W)}if(_===f){b=null;break e}var A=_.sibling;if(A!==null){A.return=_.return,b=A;break e}b=_.return}}if(ie=u,En(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ps,e)}catch{}l=!0}return l}finally{ue=s,It.transition=n}}return!1}function Bh(e,n,s){n=Rr(s,n),n=sh(e,n,1),e=kn(e,n,1),n=st(),e!==null&&(ri(e,1,n),ht(e,n))}function Ee(e,n,s){if(e.tag===3)Bh(e,e,s);else for(;n!==null;){if(n.tag===3){Bh(n,e,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(xn===null||!xn.has(l))){e=Rr(s,e),e=oh(n,e,1),n=kn(n,e,1),e=st(),n!==null&&(ri(n,1,e),ht(n,e));break}}n=n.return}}function g_(e,n,s){var l=e.pingCache;l!==null&&l.delete(n),n=st(),e.pingedLanes|=e.suspendedLanes&s,Fe===e&&(Ye&s)===s&&(Re===4||Re===3&&(Ye&130023424)===Ye&&500>ke()-Ia?qn(e,0):Ta|=s),ht(e,n)}function Wh(e,n){n===0&&((e.mode&1)===0?n=1:(n=gs,gs<<=1,(gs&130023424)===0&&(gs=4194304)));var s=st();e=nn(e,n),e!==null&&(ri(e,n,s),ht(e,s))}function __(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Wh(e,s)}function v_(e,n){var s=0;switch(e.tag){case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(s=u.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(r(314))}l!==null&&l.delete(n),Wh(e,s)}var Vh;Vh=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||at.current)ct=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return ct=!1,s_(e,n,s);ct=(e.flags&131072)!==0}else ct=!1,ye&&(n.flags&1048576)!==0&&Ed(n,zs,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;Zs(e,n),e=n.pendingProps;var u=Er(n,Xe.current);Ir(n,s),u=sa(null,n,l,e,u,s);var d=oa();return n.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ut(l)?(d=!0,Ls(n)):d=!1,n.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Jl(n),u.updater=Xs,n.stateNode=u,u._reactInternals=n,ha(n,l,e,s),n=ga(null,n,l,!0,d,s)):(n.tag=0,ye&&d&&Wl(n),it(null,n,u,s),n=n.child),n;case 16:l=n.elementType;e:{switch(Zs(e,n),e=n.pendingProps,u=l._init,l=u(l._payload),n.type=l,u=n.tag=w_(l),e=Lt(l,e),u){case 0:n=ma(null,n,l,e,s);break e;case 1:n=mh(null,n,l,e,s);break e;case 11:n=ch(null,n,l,e,s);break e;case 14:n=dh(null,n,l,Lt(l.type,e),s);break e}throw Error(r(306,l,""))}return n;case 0:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:Lt(l,u),ma(e,n,l,u,s);case 1:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:Lt(l,u),mh(e,n,l,u,s);case 3:e:{if(gh(n),e===null)throw Error(r(387));l=n.pendingProps,d=n.memoizedState,u=d.element,Dd(e,n),Hs(n,l,null,s);var f=n.memoizedState;if(l=f.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){u=Rr(Error(r(423)),n),n=_h(e,n,l,s,u);break e}else if(l!==u){u=Rr(Error(r(424)),n),n=_h(e,n,l,s,u);break e}else for(Et=yn(n.stateNode.containerInfo.firstChild),Ct=n,ye=!0,Ot=null,s=Pd(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Nr(),l===u){n=sn(e,n,s);break e}it(e,n,l,s)}n=n.child}return n;case 5:return Od(n),e===null&&$l(n),l=n.type,u=n.pendingProps,d=e!==null?e.memoizedProps:null,f=u.children,Fl(l,u)?f=null:d!==null&&Fl(l,d)&&(n.flags|=32),ph(e,n),it(e,n,f,s),n.child;case 6:return e===null&&$l(n),null;case 13:return vh(e,n,s);case 4:return Zl(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=xr(n,null,l,s):it(e,n,l,s),n.child;case 11:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:Lt(l,u),ch(e,n,l,u,s);case 7:return it(e,n,n.pendingProps,s),n.child;case 8:return it(e,n,n.pendingProps.children,s),n.child;case 12:return it(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(l=n.type._context,u=n.pendingProps,d=n.memoizedProps,f=u.value,he(Bs,l._currentValue),l._currentValue=f,d!==null)if(Mt(d.value,f)){if(d.children===u.children&&!at.current){n=sn(e,n,s);break e}}else for(d=n.child,d!==null&&(d.return=n);d!==null;){var _=d.dependencies;if(_!==null){f=d.child;for(var y=_.firstContext;y!==null;){if(y.context===l){if(d.tag===1){y=rn(-1,s&-s),y.tag=2;var T=d.updateQueue;if(T!==null){T=T.shared;var R=T.pending;R===null?y.next=y:(y.next=R.next,R.next=y),T.pending=y}}d.lanes|=s,y=d.alternate,y!==null&&(y.lanes|=s),ql(d.return,s,n),_.lanes|=s;break}y=y.next}}else if(d.tag===10)f=d.type===n.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(r(341));f.lanes|=s,_=f.alternate,_!==null&&(_.lanes|=s),ql(f,s,n),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===n){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}it(e,n,u.children,s),n=n.child}return n;case 9:return u=n.type,l=n.pendingProps.children,Ir(n,s),u=xt(u),l=l(u),n.flags|=1,it(e,n,l,s),n.child;case 14:return l=n.type,u=Lt(l,n.pendingProps),u=Lt(l.type,u),dh(e,n,l,u,s);case 15:return hh(e,n,n.type,n.pendingProps,s);case 17:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:Lt(l,u),Zs(e,n),n.tag=1,ut(l)?(e=!0,Ls(n)):e=!1,Ir(n,s),rh(n,l,u),ha(n,l,u,s),ga(null,n,l,!0,e,s);case 19:return wh(e,n,s);case 22:return fh(e,n,s)}throw Error(r(156,n.tag))};function Hh(e,n){return Sc(e,n)}function y_(e,n,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,n,s,l){return new y_(e,n,s,l)}function Fa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function w_(e){if(typeof e=="function")return Fa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vt)return 11;if(e===yt)return 14}return 2}function Rn(e,n){var s=e.alternate;return s===null?(s=Pt(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function co(e,n,s,l,u,d){var f=2;if(l=e,typeof e=="function")Fa(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case qe:return Jn(s.children,u,d,n);case nt:f=8,u|=8;break;case Ht:return e=Pt(12,s,n,u|2),e.elementType=Ht,e.lanes=d,e;case Te:return e=Pt(13,s,n,u),e.elementType=Te,e.lanes=d,e;case lt:return e=Pt(19,s,n,u),e.elementType=lt,e.lanes=d,e;case me:return ho(s,u,d,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Dt:f=10;break e;case $t:f=9;break e;case vt:f=11;break e;case yt:f=14;break e;case $e:f=16,l=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=Pt(f,s,n,u),n.elementType=e,n.type=l,n.lanes=d,n}function Jn(e,n,s,l){return e=Pt(7,e,l,n),e.lanes=s,e}function ho(e,n,s,l){return e=Pt(22,e,l,n),e.elementType=me,e.lanes=s,e.stateNode={isHidden:!1},e}function ja(e,n,s){return e=Pt(6,e,null,n),e.lanes=s,e}function za(e,n,s){return n=Pt(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function C_(e,n,s,l,u){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dl(0),this.expirationTimes=dl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dl(0),this.identifierPrefix=l,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function ba(e,n,s,l,u,d,f,_,y){return e=new C_(e,n,s,_,y),n===1?(n=1,d===!0&&(n|=8)):n=0,d=Pt(3,null,null,n),e.current=d,d.stateNode=e,d.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jl(d),e}function E_(e,n,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:He,key:l==null?null:""+l,children:e,containerInfo:n,implementation:s}}function $h(e){if(!e)return Cn;e=e._reactInternals;e:{if(Un(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ut(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var s=e.type;if(ut(s))return yd(e,s,n)}return n}function Gh(e,n,s,l,u,d,f,_,y){return e=ba(s,l,!0,e,u,d,f,_,y),e.context=$h(null),s=e.current,l=st(),u=In(s),d=rn(l,u),d.callback=n??null,kn(s,d,u),e.current.lanes=u,ri(e,u,l),ht(e,l),e}function fo(e,n,s,l){var u=n.current,d=st(),f=In(u);return s=$h(s),n.context===null?n.context=s:n.pendingContext=s,n=rn(d,f),n.payload={element:e},l=l===void 0?null:l,l!==null&&(n.callback=l),e=kn(u,n,f),e!==null&&(zt(e,u,f,d),Vs(e,u,f)),f}function po(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function Qh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Ua(e,n){Qh(e,n),(e=e.alternate)&&Qh(e,n)}function S_(){return null}var Yh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ba(e){this._internalRoot=e}mo.prototype.render=Ba.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));fo(e,n,null,null)},mo.prototype.unmount=Ba.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Kn(function(){fo(null,e,null,null)}),n[Jt]=null}};function mo(e){this._internalRoot=e}mo.prototype.unstable_scheduleHydration=function(e){if(e){var n=Dc();e={blockedOn:null,target:e,priority:n};for(var s=0;s<gn.length&&n!==0&&n<gn[s].priority;s++);gn.splice(s,0,e),s===0&&Oc(e)}};function Wa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function go(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Kh(){}function k_(e,n,s,l,u){if(u){if(typeof l=="function"){var d=l;l=function(){var T=po(f);d.call(T)}}var f=Gh(n,l,e,0,null,!1,!1,"",Kh);return e._reactRootContainer=f,e[Jt]=f.current,_i(e.nodeType===8?e.parentNode:e),Kn(),f}for(;u=e.lastChild;)e.removeChild(u);if(typeof l=="function"){var _=l;l=function(){var T=po(y);_.call(T)}}var y=ba(e,0,!1,null,null,!1,!1,"",Kh);return e._reactRootContainer=y,e[Jt]=y.current,_i(e.nodeType===8?e.parentNode:e),Kn(function(){fo(n,y,s,l)}),y}function _o(e,n,s,l,u){var d=s._reactRootContainer;if(d){var f=d;if(typeof u=="function"){var _=u;u=function(){var y=po(f);_.call(y)}}fo(n,f,e,u)}else f=k_(s,n,e,u,l);return po(f)}Pc=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=ni(n.pendingLanes);s!==0&&(hl(n,s|1),ht(n,ke()),(ie&6)===0&&(Mr=ke()+500,En()))}break;case 13:Kn(function(){var l=nn(e,1);if(l!==null){var u=st();zt(l,e,1,u)}}),Ua(e,1)}},fl=function(e){if(e.tag===13){var n=nn(e,134217728);if(n!==null){var s=st();zt(n,e,134217728,s)}Ua(e,134217728)}},Rc=function(e){if(e.tag===13){var n=In(e),s=nn(e,n);if(s!==null){var l=st();zt(s,e,n,l)}Ua(e,n)}},Dc=function(){return ue},Ac=function(e,n){var s=ue;try{return ue=e,n()}finally{ue=s}},sl=function(e,n,s){switch(n){case"input":if(bn(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==e&&l.form===e.form){var u=Ms(l);if(!u)throw Error(r(90));Ge(l),bn(l,u)}}}break;case"textarea":lc(e,s);break;case"select":n=s.value,n!=null&&cr(e,!!s.multiple,n,!1)}},gc=Ma,_c=Kn;var N_={usingClientEntryPoint:!1,Events:[wi,wr,Ms,pc,mc,Ma]},Oi={findFiberByHostInstance:Bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x_={bundleType:Oi.bundleType,version:Oi.version,rendererPackageName:Oi.rendererPackageName,rendererConfig:Oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Cc(e),e===null?null:e.stateNode},findFiberByHostInstance:Oi.findFiberByHostInstance||S_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vo.isDisabled&&vo.supportsFiber)try{ps=vo.inject(x_),Gt=vo}catch{}}return ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N_,ft.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wa(n))throw Error(r(200));return E_(e,n,null,s)},ft.createRoot=function(e,n){if(!Wa(e))throw Error(r(299));var s=!1,l="",u=Yh;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),n=ba(e,1,!1,null,null,s,!1,l,u),e[Jt]=n.current,_i(e.nodeType===8?e.parentNode:e),new Ba(n)},ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Cc(n),e=e===null?null:e.stateNode,e},ft.flushSync=function(e){return Kn(e)},ft.hydrate=function(e,n,s){if(!go(n))throw Error(r(200));return _o(null,e,n,!0,s)},ft.hydrateRoot=function(e,n,s){if(!Wa(e))throw Error(r(405));var l=s!=null&&s.hydratedSources||null,u=!1,d="",f=Yh;if(s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),n=Gh(n,null,e,1,s??null,u,!1,d,f),e[Jt]=n.current,_i(e),l)for(e=0;e<l.length;e++)s=l[e],u=s._getVersion,u=u(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,u]:n.mutableSourceEagerHydrationData.push(s,u);return new mo(n)},ft.render=function(e,n,s){if(!go(n))throw Error(r(200));return _o(null,e,n,!1,s)},ft.unmountComponentAtNode=function(e){if(!go(e))throw Error(r(40));return e._reactRootContainer?(Kn(function(){_o(null,null,e,!1,function(){e._reactRootContainer=null,e[Jt]=null})}),!0):!1},ft.unstable_batchedUpdates=Ma,ft.unstable_renderSubtreeIntoContainer=function(e,n,s,l){if(!go(s))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return _o(e,n,s,!1,l)},ft.version="18.3.1-next-f1338f8080-20240426",ft}var rf;function O_(){if(rf)return $a.exports;rf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),$a.exports=M_(),$a.exports}var sf;function L_(){if(sf)return yo;sf=1;var i=O_();return yo.createRoot=i.createRoot,yo.hydrateRoot=i.hydrateRoot,yo}var F_=L_(),of={};const Jf={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const M=function(i,t){if(!i)throw Hr(t)},Hr=function(i){return new Error("Firebase Database ("+Jf.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};const Zf=function(i){const t=[];let r=0;for(let o=0;o<i.length;o++){let a=i.charCodeAt(o);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&o+1<i.length&&(i.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++o)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},j_=function(i){const t=[];let r=0,o=0;for(;r<i.length;){const a=i[r++];if(a<128)t[o++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[r++];t[o++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[r++],h=i[r++],p=i[r++],m=((a&7)<<18|(c&63)<<12|(h&63)<<6|p&63)-65536;t[o++]=String.fromCharCode(55296+(m>>10)),t[o++]=String.fromCharCode(56320+(m&1023))}else{const c=i[r++],h=i[r++];t[o++]=String.fromCharCode((a&15)<<12|(c&63)<<6|h&63)}}return t.join("")},xu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<i.length;a+=3){const c=i[a],h=a+1<i.length,p=h?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,S=c>>2,C=(c&3)<<4|p>>4;let x=(p&15)<<2|g>>6,L=g&63;m||(L=64,h||(x=64)),o.push(r[S],r[C],r[x],r[L])}return o.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(Zf(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):j_(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<i.length;){const c=r[i.charAt(a++)],p=a<i.length?r[i.charAt(a)]:0;++a;const g=a<i.length?r[i.charAt(a)]:64;++a;const C=a<i.length?r[i.charAt(a)]:64;if(++a,c==null||p==null||g==null||C==null)throw new z_;const x=c<<2|p>>4;if(o.push(x),g!==64){const L=p<<4&240|g>>2;if(o.push(L),C!==64){const O=g<<6&192|C;o.push(O)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class z_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ep=function(i){const t=Zf(i);return xu.encodeByteArray(t,!0)},So=function(i){return ep(i).replace(/\./g,"")},su=function(i){try{return xu.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function b_(i){return tp(void 0,i)}function tp(i,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const r=t;return new Date(r.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return t}for(const r in t)!t.hasOwnProperty(r)||!U_(r)||(i[r]=tp(i[r],t[r]));return i}function U_(i){return i!=="__proto__"}function B_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const W_=()=>B_().__FIREBASE_DEFAULTS__,V_=()=>{if(typeof process>"u"||typeof of>"u")return;const i=of.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},H_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&su(i[1]);return t&&JSON.parse(t)},np=()=>{try{return W_()||V_()||H_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},$_=i=>{var t,r;return(r=(t=np())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[i]},G_=i=>{const t=$_(i);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const o=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),o]:[t.substring(0,r),o]},rp=()=>{var i;return(i=np())===null||i===void 0?void 0:i.config};class Uo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,o)=>{r?this.reject(r):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,o))}}}function Q_(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},o=t||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[So(JSON.stringify(r)),So(JSON.stringify(h)),""].join(".")}function Y_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ip(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Y_())}function K_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function q_(){return Jf.NODE_ADMIN===!0}function X_(){try{return typeof indexedDB=="object"}catch{return!1}}function J_(){return new Promise((i,t)=>{try{let r=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(o),i(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var c;t(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(r){t(r)}})}const Z_="FirebaseError";class ns extends Error{constructor(t,r,o){super(r),this.code=t,this.customData=o,this.name=Z_,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sp.prototype.create)}}class sp{constructor(t,r,o){this.service=t,this.serviceName=r,this.errors=o}create(t,...r){const o=r[0]||{},a=`${this.service}/${t}`,c=this.errors[t],h=c?ev(c,o):"Error",p=`${this.serviceName}: ${h} (${a}).`;return new ns(a,p,o)}}function ev(i,t){return i.replace(tv,(r,o)=>{const a=t[o];return a!=null?String(a):`<${o}?>`})}const tv=/\{\$([^}]+)}/g;function $i(i){return JSON.parse(i)}function De(i){return JSON.stringify(i)}const op=function(i){let t={},r={},o={},a="";try{const c=i.split(".");t=$i(su(c[0])||""),r=$i(su(c[1])||""),a=c[2],o=r.d||{},delete r.d}catch{}return{header:t,claims:r,data:o,signature:a}},nv=function(i){const t=op(i),r=t.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},rv=function(i){const t=op(i).claims;return typeof t=="object"&&t.admin===!0};function dn(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function Ur(i,t){if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}function lf(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function ko(i,t,r){const o={};for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=t.call(r,i[a],a,i));return o}function ou(i,t){if(i===t)return!0;const r=Object.keys(i),o=Object.keys(t);for(const a of r){if(!o.includes(a))return!1;const c=i[a],h=t[a];if(af(c)&&af(h)){if(!ou(c,h))return!1}else if(c!==h)return!1}for(const a of o)if(!r.includes(a))return!1;return!0}function af(i){return i!==null&&typeof i=="object"}function iv(i){const t=[];for(const[r,o]of Object.entries(i))Array.isArray(o)?o.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(o));return t.length?"&"+t.join("&"):""}class sv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,r){r||(r=0);const o=this.W_;if(typeof t=="string")for(let C=0;C<16;C++)o[C]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(let C=0;C<16;C++)o[C]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(let C=16;C<80;C++){const x=o[C-3]^o[C-8]^o[C-14]^o[C-16];o[C]=(x<<1|x>>>31)&4294967295}let a=this.chain_[0],c=this.chain_[1],h=this.chain_[2],p=this.chain_[3],m=this.chain_[4],g,S;for(let C=0;C<80;C++){C<40?C<20?(g=p^c&(h^p),S=1518500249):(g=c^h^p,S=1859775393):C<60?(g=c&h|p&(c|h),S=2400959708):(g=c^h^p,S=3395469782);const x=(a<<5|a>>>27)+g+m+S+o[C]&4294967295;m=p,p=h,h=(c<<30|c>>>2)&4294967295,c=a,a=x}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(t,r){if(t==null)return;r===void 0&&(r=t.length);const o=r-this.blockSize;let a=0;const c=this.buf_;let h=this.inbuf_;for(;a<r;){if(h===0)for(;a<=o;)this.compress_(t,a),a+=this.blockSize;if(typeof t=="string"){for(;a<r;)if(c[h]=t.charCodeAt(a),++h,++a,h===this.blockSize){this.compress_(c),h=0;break}}else for(;a<r;)if(c[h]=t[a],++h,++a,h===this.blockSize){this.compress_(c),h=0;break}}this.inbuf_=h,this.total_+=r}digest(){const t=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=r&255,r/=256;this.compress_(this.buf_);let o=0;for(let a=0;a<5;a++)for(let c=24;c>=0;c-=8)t[o]=this.chain_[a]>>c&255,++o;return t}}function Tu(i,t){return`${i} failed: ${t} argument `}const ov=function(i){const t=[];let r=0;for(let o=0;o<i.length;o++){let a=i.charCodeAt(o);if(a>=55296&&a<=56319){const c=a-55296;o++,M(o<i.length,"Surrogate pair missing trail surrogate.");const h=i.charCodeAt(o)-56320;a=65536+(c<<10)+h}a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):a<65536?(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},Bo=function(i){let t=0;for(let r=0;r<i.length;r++){const o=i.charCodeAt(r);o<128?t++:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,r++):t+=3}return t};function $r(i){return i&&i._delegate?i._delegate:i}class Gi{constructor(t,r,o){this.name=t,this.instanceFactory=r,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Zn="[DEFAULT]";class lv{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const o=new Uo;if(this.instancesDeferred.set(r,o),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const o=this.normalizeInstanceIdentifier(t?.identifier),a=(r=t?.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(uv(t))try{this.getOrInitializeService({instanceIdentifier:Zn})}catch{}for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch{}}}}clearInstance(t=Zn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Zn){return this.instances.has(t)}getOptions(t=Zn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:r});for(const[c,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);o===p&&h.resolve(a)}return a}onInit(t,r){var o;const a=this.normalizeInstanceIdentifier(r),c=(o=this.onInitCallbacks.get(a))!==null&&o!==void 0?o:new Set;c.add(t),this.onInitCallbacks.set(a,c);const h=this.instances.get(a);return h&&t(h,a),()=>{c.delete(t)}}invokeOnInitCallbacks(t,r){const o=this.onInitCallbacks.get(r);if(o)for(const a of o)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:av(t),options:r}),this.instances.set(t,o),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=Zn){return this.component?this.component.multipleInstances?t:Zn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function av(i){return i===Zn?void 0:i}function uv(i){return i.instantiationMode==="EAGER"}class cv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new lv(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}var fe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(fe||(fe={}));const dv={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},hv=fe.INFO,fv={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},pv=(i,t,...r)=>{if(t<i.logLevel)return;const o=new Date().toISOString(),a=fv[t];if(a)console[a](`[${o}]  ${i.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class lp{constructor(t){this.name=t,this._logLevel=hv,this._logHandler=pv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in fe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?dv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...t),this._logHandler(this,fe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...t),this._logHandler(this,fe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...t),this._logHandler(this,fe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...t),this._logHandler(this,fe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...t),this._logHandler(this,fe.ERROR,...t)}}const mv=(i,t)=>t.some(r=>i instanceof r);let uf,cf;function gv(){return uf||(uf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _v(){return cf||(cf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ap=new WeakMap,lu=new WeakMap,up=new WeakMap,Ya=new WeakMap,Iu=new WeakMap;function vv(i){const t=new Promise((r,o)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{r(An(i.result)),a()},h=()=>{o(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",h)});return t.then(r=>{r instanceof IDBCursor&&ap.set(r,i)}).catch(()=>{}),Iu.set(t,i),t}function yv(i){if(lu.has(i))return;const t=new Promise((r,o)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{r(),a()},h=()=>{o(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});lu.set(i,t)}let au={get(i,t,r){if(i instanceof IDBTransaction){if(t==="done")return lu.get(i);if(t==="objectStoreNames")return i.objectStoreNames||up.get(i);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return An(i[t])},set(i,t,r){return i[t]=r,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function wv(i){au=i(au)}function Cv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const o=i.call(Ka(this),t,...r);return up.set(o,t.sort?t.sort():[t]),An(o)}:_v().includes(i)?function(...t){return i.apply(Ka(this),t),An(ap.get(this))}:function(...t){return An(i.apply(Ka(this),t))}}function Ev(i){return typeof i=="function"?Cv(i):(i instanceof IDBTransaction&&yv(i),mv(i,gv())?new Proxy(i,au):i)}function An(i){if(i instanceof IDBRequest)return vv(i);if(Ya.has(i))return Ya.get(i);const t=Ev(i);return t!==i&&(Ya.set(i,t),Iu.set(t,i)),t}const Ka=i=>Iu.get(i);function Sv(i,t,{blocked:r,upgrade:o,blocking:a,terminated:c}={}){const h=indexedDB.open(i,t),p=An(h);return o&&h.addEventListener("upgradeneeded",m=>{o(An(h.result),m.oldVersion,m.newVersion,An(h.transaction),m)}),r&&h.addEventListener("blocked",m=>r(m.oldVersion,m.newVersion,m)),p.then(m=>{c&&m.addEventListener("close",()=>c()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const kv=["get","getKey","getAll","getAllKeys","count"],Nv=["put","add","delete","clear"],qa=new Map;function df(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(qa.get(t))return qa.get(t);const r=t.replace(/FromIndex$/,""),o=t!==r,a=Nv.includes(r);if(!(r in(o?IDBIndex:IDBObjectStore).prototype)||!(a||kv.includes(r)))return;const c=async function(h,...p){const m=this.transaction(h,a?"readwrite":"readonly");let g=m.store;return o&&(g=g.index(p.shift())),(await Promise.all([g[r](...p),a&&m.done]))[0]};return qa.set(t,c),c}wv(i=>({...i,get:(t,r,o)=>df(t,r)||i.get(t,r,o),has:(t,r)=>!!df(t,r)||i.has(t,r)}));class xv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Tv(r)){const o=r.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(r=>r).join(" ")}}function Tv(i){const t=i.getComponent();return t?.type==="VERSION"}const uu="@firebase/app",hf="0.10.13";const un=new lp("@firebase/app"),Iv="@firebase/app-compat",Pv="@firebase/analytics-compat",Rv="@firebase/analytics",Dv="@firebase/app-check-compat",Av="@firebase/app-check",Mv="@firebase/auth",Ov="@firebase/auth-compat",Lv="@firebase/database",Fv="@firebase/data-connect",jv="@firebase/database-compat",zv="@firebase/functions",bv="@firebase/functions-compat",Uv="@firebase/installations",Bv="@firebase/installations-compat",Wv="@firebase/messaging",Vv="@firebase/messaging-compat",Hv="@firebase/performance",$v="@firebase/performance-compat",Gv="@firebase/remote-config",Qv="@firebase/remote-config-compat",Yv="@firebase/storage",Kv="@firebase/storage-compat",qv="@firebase/firestore",Xv="@firebase/vertexai-preview",Jv="@firebase/firestore-compat",Zv="firebase",ey="10.14.1";const cu="[DEFAULT]",ty={[uu]:"fire-core",[Iv]:"fire-core-compat",[Rv]:"fire-analytics",[Pv]:"fire-analytics-compat",[Av]:"fire-app-check",[Dv]:"fire-app-check-compat",[Mv]:"fire-auth",[Ov]:"fire-auth-compat",[Lv]:"fire-rtdb",[Fv]:"fire-data-connect",[jv]:"fire-rtdb-compat",[zv]:"fire-fn",[bv]:"fire-fn-compat",[Uv]:"fire-iid",[Bv]:"fire-iid-compat",[Wv]:"fire-fcm",[Vv]:"fire-fcm-compat",[Hv]:"fire-perf",[$v]:"fire-perf-compat",[Gv]:"fire-rc",[Qv]:"fire-rc-compat",[Yv]:"fire-gcs",[Kv]:"fire-gcs-compat",[qv]:"fire-fst",[Jv]:"fire-fst-compat",[Xv]:"fire-vertex","fire-js":"fire-js",[Zv]:"fire-js-all"};const No=new Map,ny=new Map,du=new Map;function ff(i,t){try{i.container.addComponent(t)}catch(r){un.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,r)}}function xo(i){const t=i.name;if(du.has(t))return un.debug(`There were multiple attempts to register component ${t}.`),!1;du.set(t,i);for(const r of No.values())ff(r,i);for(const r of ny.values())ff(r,i);return!0}function ry(i,t){const r=i.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),i.container.getProvider(t)}const iy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mn=new sp("app","Firebase",iy);class sy{constructor(t,r,o){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mn.create("app-deleted",{appName:this._name})}}const oy=ey;function cp(i,t={}){let r=i;typeof t!="object"&&(t={name:t});const o=Object.assign({name:cu,automaticDataCollectionEnabled:!1},t),a=o.name;if(typeof a!="string"||!a)throw Mn.create("bad-app-name",{appName:String(a)});if(r||(r=rp()),!r)throw Mn.create("no-options");const c=No.get(a);if(c){if(ou(r,c.options)&&ou(o,c.config))return c;throw Mn.create("duplicate-app",{appName:a})}const h=new cv(a);for(const m of du.values())h.addComponent(m);const p=new sy(r,o,h);return No.set(a,p),p}function ly(i=cu){const t=No.get(i);if(!t&&i===cu&&rp())return cp();if(!t)throw Mn.create("no-app",{appName:i});return t}function jr(i,t,r){var o;let a=(o=ty[i])!==null&&o!==void 0?o:i;r&&(a+=`-${r}`);const c=a.match(/\s|\//),h=t.match(/\s|\//);if(c||h){const p=[`Unable to register library "${a}" with version "${t}":`];c&&p.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&h&&p.push("and"),h&&p.push(`version name "${t}" contains illegal characters (whitespace or "/")`),un.warn(p.join(" "));return}xo(new Gi(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}const ay="firebase-heartbeat-database",uy=1,Qi="firebase-heartbeat-store";let Xa=null;function dp(){return Xa||(Xa=Sv(ay,uy,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Qi)}catch(r){console.warn(r)}}}}).catch(i=>{throw Mn.create("idb-open",{originalErrorMessage:i.message})})),Xa}async function cy(i){try{const r=(await dp()).transaction(Qi),o=await r.objectStore(Qi).get(hp(i));return await r.done,o}catch(t){if(t instanceof ns)un.warn(t.message);else{const r=Mn.create("idb-get",{originalErrorMessage:t?.message});un.warn(r.message)}}}async function pf(i,t){try{const o=(await dp()).transaction(Qi,"readwrite");await o.objectStore(Qi).put(t,hp(i)),await o.done}catch(r){if(r instanceof ns)un.warn(r.message);else{const o=Mn.create("idb-set",{originalErrorMessage:r?.message});un.warn(o.message)}}}function hp(i){return`${i.name}!${i.options.appId}`}const dy=1024,hy=720*60*60*1e3;class fy{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new my(r),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=mf();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const p=new Date(h.date).valueOf();return Date.now()-p<=hy}),this._storage.overwrite(this._heartbeatsCache))}catch(o){un.warn(o)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=mf(),{heartbeatsToSend:o,unsentEntries:a}=py(this._heartbeatsCache.heartbeats),c=So(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(r){return un.warn(r),""}}}function mf(){return new Date().toISOString().substring(0,10)}function py(i,t=dy){const r=[];let o=i.slice();for(const a of i){const c=r.find(h=>h.agent===a.agent);if(c){if(c.dates.push(a.date),gf(r)>t){c.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),gf(r)>t){r.pop();break}o=o.slice(1)}return{heartbeatsToSend:r,unsentEntries:o}}class my{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X_()?J_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await cy(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return pf(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return pf(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function gf(i){return So(JSON.stringify({version:2,heartbeats:i})).length}function gy(i){xo(new Gi("platform-logger",t=>new xv(t),"PRIVATE")),xo(new Gi("heartbeat",t=>new fy(t),"PRIVATE")),jr(uu,hf,i),jr(uu,hf,"esm2017"),jr("fire-js","")}gy("");var _y="firebase",vy="10.14.1";jr(_y,vy,"app");var _f={};const vf="@firebase/database",yf="1.0.8";let fp="";function yy(i){fp=i}class wy{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,r){r==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),De(r))}get(t){const r=this.domStorage_.getItem(this.prefixedName_(t));return r==null?null:$i(r)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Cy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,r){r==null?delete this.cache_[t]:this.cache_[t]=r}get(t){return dn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const pp=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new wy(t)}}catch{}return new Cy},tr=pp("localStorage"),Ey=pp("sessionStorage");const zr=new lp("@firebase/database"),Sy=(function(){let i=1;return function(){return i++}})(),mp=function(i){const t=ov(i),r=new sv;r.update(t);const o=r.digest();return xu.encodeByteArray(o)},rs=function(...i){let t="";for(let r=0;r<i.length;r++){const o=i[r];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?t+=rs.apply(null,o):typeof o=="object"?t+=De(o):t+=o,t+=" "}return t};let Ui=null,wf=!0;const ky=function(i,t){M(!0,"Can't turn on custom loggers persistently."),zr.logLevel=fe.VERBOSE,Ui=zr.log.bind(zr)},tt=function(...i){if(wf===!0&&(wf=!1,Ui===null&&Ey.get("logging_enabled")===!0&&ky()),Ui){const t=rs.apply(null,i);Ui(t)}},is=function(i){return function(...t){tt(i,...t)}},hu=function(...i){const t="FIREBASE INTERNAL ERROR: "+rs(...i);zr.error(t)},cn=function(...i){const t=`FIREBASE FATAL ERROR: ${rs(...i)}`;throw zr.error(t),new Error(t)},mt=function(...i){const t="FIREBASE WARNING: "+rs(...i);zr.warn(t)},Ny=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&mt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},gp=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},xy=function(i){if(document.readyState==="complete")i();else{let t=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},Br="[MIN_NAME]",rr="[MAX_NAME]",Gr=function(i,t){if(i===t)return 0;if(i===Br||t===rr)return-1;if(t===Br||i===rr)return 1;{const r=Cf(i),o=Cf(t);return r!==null?o!==null?r-o===0?i.length-t.length:r-o:-1:o!==null?1:i<t?-1:1}},Ty=function(i,t){return i===t?0:i<t?-1:1},Fi=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+De(t))},Pu=function(i){if(typeof i!="object"||i===null)return De(i);const t=[];for(const o in i)t.push(o);t.sort();let r="{";for(let o=0;o<t.length;o++)o!==0&&(r+=","),r+=De(t[o]),r+=":",r+=Pu(i[t[o]]);return r+="}",r},_p=function(i,t){const r=i.length;if(r<=t)return[i];const o=[];for(let a=0;a<r;a+=t)a+t>r?o.push(i.substring(a,r)):o.push(i.substring(a,a+t));return o};function gt(i,t){for(const r in i)i.hasOwnProperty(r)&&t(r,i[r])}const vp=function(i){M(!gp(i),"Invalid JSON number");const t=11,r=52,o=(1<<t-1)-1;let a,c,h,p,m;i===0?(c=0,h=0,a=1/i===-1/0?1:0):(a=i<0,i=Math.abs(i),i>=Math.pow(2,1-o)?(p=Math.min(Math.floor(Math.log(i)/Math.LN2),o),c=p+o,h=Math.round(i*Math.pow(2,r-p)-Math.pow(2,r))):(c=0,h=Math.round(i/Math.pow(2,1-o-r))));const g=[];for(m=r;m;m-=1)g.push(h%2?1:0),h=Math.floor(h/2);for(m=t;m;m-=1)g.push(c%2?1:0),c=Math.floor(c/2);g.push(a?1:0),g.reverse();const S=g.join("");let C="";for(m=0;m<64;m+=8){let x=parseInt(S.substr(m,8),2).toString(16);x.length===1&&(x="0"+x),C=C+x}return C.toLowerCase()},Iy=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Py=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ry(i,t){let r="Unknown Error";i==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?r="Client doesn't have permission to access the desired data.":i==="unavailable"&&(r="The service is unavailable");const o=new Error(i+" at "+t._path.toString()+": "+r);return o.code=i.toUpperCase(),o}const Dy=new RegExp("^-?(0*)\\d{1,10}$"),Ay=-2147483648,My=2147483647,Cf=function(i){if(Dy.test(i)){const t=Number(i);if(t>=Ay&&t<=My)return t}return null},Qr=function(i){try{i()}catch(t){setTimeout(()=>{const r=t.stack||"";throw mt("Exception was thrown by user callback.",r),t},Math.floor(0))}},Oy=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bi=function(i,t){const r=setTimeout(i,t);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};class Ly{constructor(t,r){this.appName_=t,this.appCheckProvider=r,this.appCheck=r?.getImmediate({optional:!0}),this.appCheck||r?.get().then(o=>this.appCheck=o)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((r,o)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){var r;(r=this.appCheckProvider)===null||r===void 0||r.get().then(o=>o.addTokenListener(t))}notifyForInvalidToken(){mt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Fy{constructor(t,r,o){this.appName_=t,this.firebaseOptions_=r,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(a=>this.auth_=a)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(r=>r&&r.code==="auth/token-not-initialized"?(tt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,o)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(r,o):r(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(r=>r.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(r=>r.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mt(t)}}class Eo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Eo.OWNER="owner";const Ru="5",yp="v",wp="s",Cp="r",Ep="f",Sp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kp="ls",Np="p",fu="ac",xp="websocket",Tp="long_polling";class Ip{constructor(t,r,o,a,c=!1,h="",p=!1,m=!1){this.secure=r,this.namespace=o,this.webSocketOnly=a,this.nodeAdmin=c,this.persistenceKey=h,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=m,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tr.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&tr.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${r}`}}function jy(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function Pp(i,t,r){M(typeof t=="string","typeof type must == string"),M(typeof r=="object","typeof params must == object");let o;if(t===xp)o=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===Tp)o=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);jy(i)&&(r.ns=i.namespace);const a=[];return gt(r,(c,h)=>{a.push(c+"="+h)}),o+a.join("&")}class zy{constructor(){this.counters_={}}incrementCounter(t,r=1){dn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=r}get(){return b_(this.counters_)}}const Ja={},Za={};function Du(i){const t=i.toString();return Ja[t]||(Ja[t]=new zy),Ja[t]}function by(i,t){const r=i.toString();return Za[r]||(Za[r]=t()),Za[r]}class Uy{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,r){this.closeAfterResponse=t,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,r){for(this.pendingResponses[t]=r;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<o.length;++a)o[a]&&Qr(()=>{this.onMessage_(o[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Ef="start",By="close",Wy="pLPCommand",Vy="pRTLPCB",Rp="id",Dp="pw",Ap="ser",Hy="cb",$y="seg",Gy="ts",Qy="d",Yy="dframe",Mp=1870,Op=30,Ky=Mp-Op,qy=25e3,Xy=3e4;class Fr{constructor(t,r,o,a,c,h,p){this.connId=t,this.repoInfo=r,this.applicationId=o,this.appCheckToken=a,this.authToken=c,this.transportSessionId=h,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=is(t),this.stats_=Du(r),this.urlFn=m=>(this.appCheckToken&&(m[fu]=this.appCheckToken),Pp(r,Tp,m))}open(t,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new Uy(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Xy)),xy(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Au((...c)=>{const[h,p,m,g,S]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===Ef)this.id=p,this.password=m;else if(h===By)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...c)=>{const[h,p]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(h,p)},()=>{this.onClosed_()},this.urlFn);const o={};o[Ef]="t",o[Ap]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[Hy]=this.scriptTagHolder.uniqueCallbackIdentifier),o[yp]=Ru,this.transportSessionId&&(o[wp]=this.transportSessionId),this.lastSessionId&&(o[kp]=this.lastSessionId),this.applicationId&&(o[Np]=this.applicationId),this.appCheckToken&&(o[fu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Sp.test(location.hostname)&&(o[Cp]=Ep);const a=this.urlFn(o);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fr.forceAllow_=!0}static forceDisallow(){Fr.forceDisallow_=!0}static isAvailable(){return Fr.forceAllow_?!0:!Fr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Iy()&&!Py()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const r=De(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=ep(r),a=_p(o,Ky);for(let c=0;c<a.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[c]),this.curSegmentNum++}addDisconnectPingFrame(t,r){this.myDisconnFrame=document.createElement("iframe");const o={};o[Yy]="t",o[Rp]=t,o[Dp]=r,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const r=De(t).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class Au{constructor(t,r,o,a){this.onDisconnect=o,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Sy(),window[Wy+this.uniqueCallbackIdentifier]=t,window[Vy+this.uniqueCallbackIdentifier]=r,this.myIFrame=Au.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(p){tt("frame writing exception"),p.stack&&tt(p.stack),tt(p)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||tt("No IE domain setting required")}catch{const o=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,r){for(this.myID=t,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[Rp]=this.myID,t[Dp]=this.myPW,t[Ap]=this.currentSerial;let r=this.urlFn(t),o="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Op+o.length<=Mp;){const h=this.pendingSegs.shift();o=o+"&"+$y+a+"="+h.seg+"&"+Gy+a+"="+h.ts+"&"+Qy+a+"="+h.d,a++}return r=r+o,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(t,r,o){this.pendingSegs.push({seg:t,ts:r,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(t,r){this.outstandingRequests.add(r);const o=()=>{this.outstandingRequests.delete(r),this.newRequest_()},a=setTimeout(o,Math.floor(qy)),c=()=>{clearTimeout(a),o()};this.addTag(t,c)}addTag(t,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.onload=o.onreadystatechange=function(){const a=o.readyState;(!a||a==="loaded"||a==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),r())},o.onerror=()=>{tt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}const Jy=16384,Zy=45e3;let To=null;typeof MozWebSocket<"u"?To=MozWebSocket:typeof WebSocket<"u"&&(To=WebSocket);class bt{constructor(t,r,o,a,c,h,p){this.connId=t,this.applicationId=o,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=is(this.connId),this.stats_=Du(r),this.connURL=bt.connectionURL_(r,h,p,a,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,a,c){const h={};return h[yp]=Ru,typeof location<"u"&&location.hostname&&Sp.test(location.hostname)&&(h[Cp]=Ep),r&&(h[wp]=r),o&&(h[kp]=o),a&&(h[fu]=a),c&&(h[Np]=c),Pp(t,xp,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tr.set("previous_websocket_failure",!0);try{let o;q_(),this.mySock=new To(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const a=o.message||o.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const a=o.message||o.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){bt.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(r);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&To!==null&&!bt.forceDisallow_}static previouslyFailed(){return tr.isInMemoryStorage||tr.get("previous_websocket_failure")===!0}markConnectionHealthy(){tr.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=$i(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(M(this.frames===null,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);o!==null&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=De(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=_p(r,Jy);o.length>1&&this.sendString_(String(o.length));for(let a=0;a<o.length;a++)this.sendString_(o[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Zy))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}bt.responsesRequiredToBeHealthy=2;bt.healthyTimeout=3e4;class Yi{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Fr,bt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=bt&&bt.isAvailable();let o=r&&!bt.previouslyFailed();if(t.webSocketOnly&&(r||mt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[bt];else{const a=this.transports_=[];for(const c of Yi.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);Yi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Yi.globalTransportInitialized_=!1;const ew=6e4,tw=5e3,nw=10*1024,rw=100*1024,eu="t",Sf="d",iw="s",kf="r",sw="e",Nf="o",xf="a",Tf="n",If="p",ow="h";class lw{constructor(t,r,o,a,c,h,p,m,g,S){this.id=t,this.repoInfo_=r,this.applicationId_=o,this.appCheckToken_=a,this.authToken_=c,this.onMessage_=h,this.onReady_=p,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=is("c:"+this.id+":"),this.transportManager_=new Yi(r),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,o)},Math.floor(0));const a=t.healthyTimeout||0;a>0&&(this.healthyTimeout_=Bi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rw?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return r=>{t===this.conn_?this.onConnectionLost_(r):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return r=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(r):t===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(t){const r={t:"d",d:t};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(eu in t){const r=t[eu];r===xf?this.upgradeIfSecondaryHealthy_():r===kf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===Nf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const r=Fi("t",t),o=Fi("d",t);if(r==="c")this.onSecondaryControl_(o);else if(r==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:If,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:xf,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Tf,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const r=Fi("t",t),o=Fi("d",t);r==="c"?this.onControl_(o):r==="d"&&this.onDataMessage_(o)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const r=Fi(eu,t);if(Sf in t){const o=t[Sf];if(r===ow){const a=Object.assign({},o);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(r===Tf){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===iw?this.onConnectionShutdown_(o):r===kf?this.onReset_(o):r===sw?hu("Server Error: "+o):r===Nf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):hu("Unknown control packet command: "+r)}}onHandshake_(t){const r=t.ts,o=t.v,a=t.h;this.sessionId=t.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),Ru!==o&&mt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,o),Bi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ew))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,r){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:If,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Lp{put(t,r,o,a){}merge(t,r,o,a){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,r,o){}onDisconnectMerge(t,r,o){}onDisconnectCancel(t,r){}reportStats(t){}}class Fp{constructor(t){this.allowedEvents_=t,this.listeners_={},M(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...r){if(Array.isArray(this.listeners_[t])){const o=[...this.listeners_[t]];for(let a=0;a<o.length;a++)o[a].callback.apply(o[a].context,r)}}on(t,r,o){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:r,context:o});const a=this.getInitialEvent(t);a&&r.apply(o,a)}off(t,r,o){this.validateEventType_(t);const a=this.listeners_[t]||[];for(let c=0;c<a.length;c++)if(a[c].callback===r&&(!o||o===a[c].context)){a.splice(c,1);return}}validateEventType_(t){M(this.allowedEvents_.find(r=>r===t),"Unknown event: "+t)}}class Io extends Fp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ip()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Io}getInitialEvent(t){return M(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}const Pf=32,Rf=768;class de{constructor(t,r){if(r===void 0){this.pieces_=t.split("/");let o=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[o]=this.pieces_[a],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=r}toString(){let t="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(t+="/"+this.pieces_[r]);return t||"/"}}function le(){return new de("")}function ee(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Fn(i){return i.pieces_.length-i.pieceNum_}function pe(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new de(i.pieces_,t)}function jp(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function aw(i){let t="";for(let r=i.pieceNum_;r<i.pieces_.length;r++)i.pieces_[r]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[r])));return t||"/"}function zp(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function bp(i){if(i.pieceNum_>=i.pieces_.length)return null;const t=[];for(let r=i.pieceNum_;r<i.pieces_.length-1;r++)t.push(i.pieces_[r]);return new de(t,0)}function Ae(i,t){const r=[];for(let o=i.pieceNum_;o<i.pieces_.length;o++)r.push(i.pieces_[o]);if(t instanceof de)for(let o=t.pieceNum_;o<t.pieces_.length;o++)r.push(t.pieces_[o]);else{const o=t.split("/");for(let a=0;a<o.length;a++)o[a].length>0&&r.push(o[a])}return new de(r,0)}function ne(i){return i.pieceNum_>=i.pieces_.length}function ot(i,t){const r=ee(i),o=ee(t);if(r===null)return t;if(r===o)return ot(pe(i),pe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function Mu(i,t){if(Fn(i)!==Fn(t))return!1;for(let r=i.pieceNum_,o=t.pieceNum_;r<=i.pieces_.length;r++,o++)if(i.pieces_[r]!==t.pieces_[o])return!1;return!0}function Bt(i,t){let r=i.pieceNum_,o=t.pieceNum_;if(Fn(i)>Fn(t))return!1;for(;r<i.pieces_.length;){if(i.pieces_[r]!==t.pieces_[o])return!1;++r,++o}return!0}class uw{constructor(t,r){this.errorPrefix_=r,this.parts_=zp(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=Bo(this.parts_[o]);Up(this)}}function cw(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=Bo(t),Up(i)}function dw(i){const t=i.parts_.pop();i.byteLength_-=Bo(t),i.parts_.length>0&&(i.byteLength_-=1)}function Up(i){if(i.byteLength_>Rf)throw new Error(i.errorPrefix_+"has a key path longer than "+Rf+" bytes ("+i.byteLength_+").");if(i.parts_.length>Pf)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Pf+") or object contains a cycle "+er(i))}function er(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}class Ou extends Fp{constructor(){super(["visible"]);let t,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const o=!document[t];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new Ou}getInitialEvent(t){return M(t==="visible","Unknown event type: "+t),[this.visible_]}}const ji=1e3,hw=300*1e3,Df=30*1e3,fw=1.3,pw=3e4,mw="server_kill",Af=3;class an extends Lp{constructor(t,r,o,a,c,h,p,m){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=an.nextPersistentConnectionId_++,this.log_=is("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ji,this.maxReconnectDelay_=hw,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ou.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Io.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_(De(c)),M(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[a]=o)}get(t){this.initConnection_();const r=new Uo,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const p=h.d;h.s==="ok"?r.resolve(p):r.reject(p)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),r.promise}listen(t,r,o,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),M(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),M(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:r,query:t,tag:o};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+o+" for "+a);const c={p:o},h="q";t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest(h,c,p=>{const m=p.d,g=p.s;an.warnOnListenWarnings_(m,r),(this.listens.get(o)&&this.listens.get(o).get(a))===t&&(this.log_("listen response",p),g!=="ok"&&this.removeListen_(o,a),t.onComplete&&t.onComplete(g,m))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&dn(t,"w")){const o=Ur(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();mt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||rv(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Df)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=nv(t)?"auth":"gauth",o={cred:t};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(r,o,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+a),M(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,a)&&this.connected_&&this.sendUnlisten_(o,a,t._queryObject,r)}sendUnlisten_(t,r,o,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t},h="n";a&&(c.q=o,c.t=a),this.sendRequest(h,c)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,a){const c={p:r,d:o};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,o,a){this.putInternal("p",t,r,o,a)}merge(t,r,o,a){this.putInternal("m",t,r,o,a)}putInternal(t,r,o,a,c){this.initConnection_();const h={p:r,d:o};c!==void 0&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{if(o.s!=="ok"){const c=o.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+De(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):hu("Unrecognized action received from server: "+De(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){M(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ji,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ji,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pw&&(this.reconnectDelay_=ji),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fw)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+an.nextConnectionId_++,c=this.lastSessionId;let h=!1,p=null;const m=function(){p?p.close():(h=!0,o())},g=function(C){M(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(C)};this.realtime_={close:m,sendRequest:g};const S=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[C,x]=await Promise.all([this.authTokenProvider_.getToken(S),this.appCheckTokenProvider_.getToken(S)]);h?tt("getToken() completed but was canceled"):(tt("getToken() completed. Creating connection."),this.authToken_=C&&C.accessToken,this.appCheckToken_=x&&x.token,p=new lw(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,o,L=>{mt(L+" ("+this.repoInfo_.toString()+")"),this.interrupt(mw)},c))}catch(C){this.log_("Failed to get token: "+C),h||(this.repoInfo_.nodeAdmin&&mt(C),m())}}}interrupt(t){tt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){tt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],lf(this.interruptReasons_)&&(this.reconnectDelay_=ji,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;r?o=r.map(c=>Pu(c)).join("$"):o="default";const a=this.removeListen_(t,o);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const o=new de(t).toString();let a;if(this.listens.has(o)){const c=this.listens.get(o);a=c.get(r),c.delete(r),c.size===0&&this.listens.delete(o)}else a=void 0;return a}onAuthRevoked_(t,r){tt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Af&&(this.reconnectDelay_=Df,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){tt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Af&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+fp.replace(/\./g,"-")]=1,ip()?t["framework.cordova"]=1:K_()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Io.getInstance().currentlyOnline();return lf(this.interruptReasons_)&&t}}an.nextPersistentConnectionId_=0;an.nextConnectionId_=0;class te{constructor(t,r){this.name=t,this.node=r}static Wrap(t,r){return new te(t,r)}}class Wo{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,r){const o=new te(Br,t),a=new te(Br,r);return this.compare(o,a)!==0}minPost(){return te.MIN}}let wo;class Bp extends Wo{static get __EMPTY_NODE(){return wo}static set __EMPTY_NODE(t){wo=t}compare(t,r){return Gr(t.name,r.name)}isDefinedOn(t){throw Hr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,r){return!1}minPost(){return te.MIN}maxPost(){return new te(rr,wo)}makePost(t,r){return M(typeof t=="string","KeyIndex indexValue must always be a string."),new te(t,wo)}toString(){return".key"}}const br=new Bp;class Co{constructor(t,r,o,a,c=null){this.isReverse_=a,this.resultGenerator_=c,this.nodeStack_=[];let h=1;for(;!t.isEmpty();)if(t=t,h=r?o(t.key,r):1,a&&(h*=-1),h<0)this.isReverse_?t=t.left:t=t.right;else if(h===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(t.key,t.value):r={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class be{constructor(t,r,o,a,c){this.key=t,this.value=r,this.color=o??be.RED,this.left=a??pt.EMPTY_NODE,this.right=c??pt.EMPTY_NODE}copy(t,r,o,a,c){return new be(t??this.key,r??this.value,o??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let a=this;const c=o(t,a.key);return c<0?a=a.copy(null,null,null,a.left.insert(t,r,o),null):c===0?a=a.copy(null,r,null,null,null):a=a.copy(null,null,null,null,a.right.insert(t,r,o)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return pt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,a;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),r(t,o.key)===0){if(o.right.isEmpty())return pt.EMPTY_NODE;a=o.right.min_(),o=o.copy(a.key,a.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,be.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}be.RED=!0;be.BLACK=!1;class gw{copy(t,r,o,a,c){return this}insert(t,r,o){return new be(t,r,null)}remove(t,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class pt{constructor(t,r=pt.EMPTY_NODE){this.comparator_=t,this.root_=r}insert(t,r){return new pt(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,be.BLACK,null,null))}remove(t){return new pt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,be.BLACK,null,null))}get(t){let r,o=this.root_;for(;!o.isEmpty();){if(r=this.comparator_(t,o.key),r===0)return o.value;r<0?o=o.left:r>0&&(o=o.right)}return null}getPredecessorKey(t){let r,o=this.root_,a=null;for(;!o.isEmpty();)if(r=this.comparator_(t,o.key),r===0){if(o.left.isEmpty())return a?a.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else r<0?o=o.left:r>0&&(a=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Co(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,r){return new Co(this.root_,t,this.comparator_,!1,r)}getReverseIteratorFrom(t,r){return new Co(this.root_,t,this.comparator_,!0,r)}getReverseIterator(t){return new Co(this.root_,null,this.comparator_,!0,t)}}pt.EMPTY_NODE=new gw;function _w(i,t){return Gr(i.name,t.name)}function Lu(i,t){return Gr(i,t)}let pu;function vw(i){pu=i}const Wp=function(i){return typeof i=="number"?"number:"+vp(i):"string:"+i},Vp=function(i){if(i.isLeafNode()){const t=i.val();M(typeof t=="string"||typeof t=="number"||typeof t=="object"&&dn(t,".sv"),"Priority must be a string or number.")}else M(i===pu||i.isEmpty(),"priority of unexpected type.");M(i===pu||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Mf;class ze{constructor(t,r=ze.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,M(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Vp(this.priorityNode_)}static set __childrenNodeConstructor(t){Mf=t}static get __childrenNodeConstructor(){return Mf}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new ze(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:ze.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ne(t)?this:ee(t)===".priority"?this.priorityNode_:ze.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:ze.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=ee(t);return o===null?r:r.isEmpty()&&o!==".priority"?this:(M(o!==".priority"||Fn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,ze.__childrenNodeConstructor.EMPTY_NODE.updateChild(pe(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Wp(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",r==="number"?t+=vp(this.value_):t+=this.value_,this.lazyHash_=mp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===ze.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ze.__childrenNodeConstructor?-1:(M(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,a=ze.VALUE_TYPE_ORDER.indexOf(r),c=ze.VALUE_TYPE_ORDER.indexOf(o);return M(a>=0,"Unknown leaf type: "+r),M(c>=0,"Unknown leaf type: "+o),a===c?o==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}ze.VALUE_TYPE_ORDER=["object","boolean","number","string"];let Hp,$p;function yw(i){Hp=i}function ww(i){$p=i}class Cw extends Wo{compare(t,r){const o=t.node.getPriority(),a=r.node.getPriority(),c=o.compareTo(a);return c===0?Gr(t.name,r.name):c}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,r){return!t.getPriority().equals(r.getPriority())}minPost(){return te.MIN}maxPost(){return new te(rr,new ze("[PRIORITY-POST]",$p))}makePost(t,r){const o=Hp(t);return new te(r,new ze("[PRIORITY-POST]",o))}toString(){return".priority"}}const Se=new Cw;const Ew=Math.log(2);class Sw{constructor(t){const r=c=>parseInt(Math.log(c)/Ew,10),o=c=>parseInt(Array(c+1).join("1"),2);this.count=r(t+1),this.current_=this.count-1;const a=o(this.count);this.bits_=t+1&a}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Po=function(i,t,r,o){i.sort(t);const a=function(m,g){const S=g-m;let C,x;if(S===0)return null;if(S===1)return C=i[m],x=r?r(C):C,new be(x,C.node,be.BLACK,null,null);{const L=parseInt(S/2,10)+m,O=a(m,L),V=a(L+1,g);return C=i[L],x=r?r(C):C,new be(x,C.node,be.BLACK,O,V)}},c=function(m){let g=null,S=null,C=i.length;const x=function(O,V){const K=C-O,Oe=C;C-=O;const We=a(K+1,Oe),Ve=i[K],xe=r?r(Ve):Ve;L(new be(xe,Ve.node,V,null,We))},L=function(O){g?(g.left=O,g=O):(S=O,g=O)};for(let O=0;O<m.count;++O){const V=m.nextBitIsOne(),K=Math.pow(2,m.count-(O+1));V?x(K,be.BLACK):(x(K,be.BLACK),x(K,be.RED))}return S},h=new Sw(i.length),p=c(h);return new pt(o||t,p)};let tu;const Lr={};class ln{constructor(t,r){this.indexes_=t,this.indexSet_=r}static get Default(){return M(Lr&&Se,"ChildrenNode.ts has not been loaded"),tu=tu||new ln({".priority":Lr},{".priority":Se}),tu}get(t){const r=Ur(this.indexes_,t);if(!r)throw new Error("No index defined for "+t);return r instanceof pt?r:null}hasIndex(t){return dn(this.indexSet_,t.toString())}addIndex(t,r){M(t!==br,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let a=!1;const c=r.getIterator(te.Wrap);let h=c.getNext();for(;h;)a=a||t.isDefinedOn(h.node),o.push(h),h=c.getNext();let p;a?p=Po(o,t.getCompare()):p=Lr;const m=t.toString(),g=Object.assign({},this.indexSet_);g[m]=t;const S=Object.assign({},this.indexes_);return S[m]=p,new ln(S,g)}addToIndexes(t,r){const o=ko(this.indexes_,(a,c)=>{const h=Ur(this.indexSet_,c);if(M(h,"Missing index implementation for "+c),a===Lr)if(h.isDefinedOn(t.node)){const p=[],m=r.getIterator(te.Wrap);let g=m.getNext();for(;g;)g.name!==t.name&&p.push(g),g=m.getNext();return p.push(t),Po(p,h.getCompare())}else return Lr;else{const p=r.get(t.name);let m=a;return p&&(m=m.remove(new te(t.name,p))),m.insert(t,t.node)}});return new ln(o,this.indexSet_)}removeFromIndexes(t,r){const o=ko(this.indexes_,a=>{if(a===Lr)return a;{const c=r.get(t.name);return c?a.remove(new te(t.name,c)):a}});return new ln(o,this.indexSet_)}}let zi;class Q{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&Vp(this.priorityNode_),this.children_.isEmpty()&&M(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return zi||(zi=new Q(new pt(Lu),null,ln.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zi}updatePriority(t){return this.children_.isEmpty()?this:new Q(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const r=this.children_.get(t);return r===null?zi:r}}getChild(t){const r=ee(t);return r===null?this:this.getImmediateChild(r).getChild(pe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(M(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{const o=new te(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(o,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(o,this.children_));const h=a.isEmpty()?zi:this.priorityNode_;return new Q(a,h,c)}}updateChild(t,r){const o=ee(t);if(o===null)return r;{M(ee(t)!==".priority"||Fn(t)===1,".priority must be the last token in a path");const a=this.getImmediateChild(o).updateChild(pe(t),r);return this.updateImmediateChild(o,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,a=0,c=!0;if(this.forEachChild(Se,(h,p)=>{r[h]=p.val(t),o++,c&&Q.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*o){const h=[];for(const p in r)h[p]=r[p];return h}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Wp(this.getPriority().val())+":"),this.forEachChild(Se,(r,o)=>{const a=o.hash();a!==""&&(t+=":"+r+":"+a)}),this.lazyHash_=t===""?"":mp(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const a=this.resolveIndex_(o);if(a){const c=a.getPredecessorKey(new te(t,r));return c?c.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new te(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new te(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,te.Wrap);let c=a.peek();for(;c!=null&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,te.Wrap);let c=a.peek();for(;c!=null&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ss?-1:0}withIndex(t){if(t===br||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new Q(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===br||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const o=this.getIterator(Se),a=r.getIterator(Se);let c=o.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=o.getNext(),h=a.getNext()}return c===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===br?null:this.indexMap_.get(t.toString())}}Q.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class kw extends Q{constructor(){super(new pt(Lu),Q.EMPTY_NODE,ln.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Q.EMPTY_NODE}isEmpty(){return!1}}const ss=new kw;Object.defineProperties(te,{MIN:{value:new te(Br,Q.EMPTY_NODE)},MAX:{value:new te(rr,ss)}});Bp.__EMPTY_NODE=Q.EMPTY_NODE;ze.__childrenNodeConstructor=Q;vw(ss);ww(ss);const Nw=!0;function Ue(i,t=null){if(i===null)return Q.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),M(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const r=i;return new ze(r,Ue(t))}if(!(i instanceof Array)&&Nw){const r=[];let o=!1;if(gt(i,(h,p)=>{if(h.substring(0,1)!=="."){const m=Ue(p);m.isEmpty()||(o=o||!m.getPriority().isEmpty(),r.push(new te(h,m)))}}),r.length===0)return Q.EMPTY_NODE;const c=Po(r,_w,h=>h.name,Lu);if(o){const h=Po(r,Se.getCompare());return new Q(c,Ue(t),new ln({".priority":h},{".priority":Se}))}else return new Q(c,Ue(t),ln.Default)}else{let r=Q.EMPTY_NODE;return gt(i,(o,a)=>{if(dn(i,o)&&o.substring(0,1)!=="."){const c=Ue(a);(c.isLeafNode()||!c.isEmpty())&&(r=r.updateImmediateChild(o,c))}}),r.updatePriority(Ue(t))}}yw(Ue);class xw extends Wo{constructor(t){super(),this.indexPath_=t,M(!ne(t)&&ee(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,r){const o=this.extractChild(t.node),a=this.extractChild(r.node),c=o.compareTo(a);return c===0?Gr(t.name,r.name):c}makePost(t,r){const o=Ue(t),a=Q.EMPTY_NODE.updateChild(this.indexPath_,o);return new te(r,a)}maxPost(){const t=Q.EMPTY_NODE.updateChild(this.indexPath_,ss);return new te(rr,t)}toString(){return zp(this.indexPath_,0).join("/")}}class Tw extends Wo{compare(t,r){const o=t.node.compareTo(r.node);return o===0?Gr(t.name,r.name):o}isDefinedOn(t){return!0}indexedValueChanged(t,r){return!t.equals(r)}minPost(){return te.MIN}maxPost(){return te.MAX}makePost(t,r){const o=Ue(t);return new te(r,o)}toString(){return".value"}}const Iw=new Tw;function Gp(i){return{type:"value",snapshotNode:i}}function Wr(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function Ki(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function qi(i,t,r){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:r}}function Pw(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}class Fu{constructor(t){this.index_=t}updateChild(t,r,o,a,c,h){M(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=t.getImmediateChild(r);return p.getChild(a).equals(o.getChild(a))&&p.isEmpty()===o.isEmpty()||(h!=null&&(o.isEmpty()?t.hasChild(r)?h.trackChildChange(Ki(r,p)):M(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?h.trackChildChange(Wr(r,o)):h.trackChildChange(qi(r,o,p))),t.isLeafNode()&&o.isEmpty())?t:t.updateImmediateChild(r,o).withIndex(this.index_)}updateFullNode(t,r,o){return o!=null&&(t.isLeafNode()||t.forEachChild(Se,(a,c)=>{r.hasChild(a)||o.trackChildChange(Ki(a,c))}),r.isLeafNode()||r.forEachChild(Se,(a,c)=>{if(t.hasChild(a)){const h=t.getImmediateChild(a);h.equals(c)||o.trackChildChange(qi(a,c,h))}else o.trackChildChange(Wr(a,c))})),r.withIndex(this.index_)}updatePriority(t,r){return t.isEmpty()?Q.EMPTY_NODE:t.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Xi{constructor(t){this.indexedFilter_=new Fu(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Xi.getStartPost_(t),this.endPost_=Xi.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,o=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return r&&o}updateChild(t,r,o,a,c,h){return this.matches(new te(r,o))||(o=Q.EMPTY_NODE),this.indexedFilter_.updateChild(t,r,o,a,c,h)}updateFullNode(t,r,o){r.isLeafNode()&&(r=Q.EMPTY_NODE);let a=r.withIndex(this.index_);a=a.updatePriority(Q.EMPTY_NODE);const c=this;return r.forEachChild(Se,(h,p)=>{c.matches(new te(h,p))||(a=a.updateImmediateChild(h,Q.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,a,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const r=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),r)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const r=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),r)}else return t.getIndex().maxPost()}}class Rw{constructor(t){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=r=>{const o=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new Xi(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,r,o,a,c,h){return this.rangedFilter_.matches(new te(r,o))||(o=Q.EMPTY_NODE),t.getImmediateChild(r).equals(o)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,r,o,a,c,h):this.fullLimitUpdateChild_(t,r,o,c,h)}updateFullNode(t,r,o){let a;if(r.isLeafNode()||r.isEmpty())a=Q.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){a=Q.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;c.hasNext()&&h<this.limit_;){const p=c.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))a=a.updateImmediateChild(p.name,p.node),h++;else break;else continue}}else{a=r.withIndex(this.index_),a=a.updatePriority(Q.EMPTY_NODE);let c;this.reverse_?c=a.getReverseIterator(this.index_):c=a.getIterator(this.index_);let h=0;for(;c.hasNext();){const p=c.getNext();h<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?h++:a=a.updateImmediateChild(p.name,Q.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,a,o)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,r,o,a,c){let h;if(this.reverse_){const C=this.index_.getCompare();h=(x,L)=>C(L,x)}else h=this.index_.getCompare();const p=t;M(p.numChildren()===this.limit_,"");const m=new te(r,o),g=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),S=this.rangedFilter_.matches(m);if(p.hasChild(r)){const C=p.getImmediateChild(r);let x=a.getChildAfterChild(this.index_,g,this.reverse_);for(;x!=null&&(x.name===r||p.hasChild(x.name));)x=a.getChildAfterChild(this.index_,x,this.reverse_);const L=x==null?1:h(x,m);if(S&&!o.isEmpty()&&L>=0)return c?.trackChildChange(qi(r,o,C)),p.updateImmediateChild(r,o);{c?.trackChildChange(Ki(r,C));const V=p.updateImmediateChild(r,Q.EMPTY_NODE);return x!=null&&this.rangedFilter_.matches(x)?(c?.trackChildChange(Wr(x.name,x.node)),V.updateImmediateChild(x.name,x.node)):V}}else return o.isEmpty()?t:S&&h(g,m)>=0?(c!=null&&(c.trackChildChange(Ki(g.name,g.node)),c.trackChildChange(Wr(r,o))),p.updateImmediateChild(r,o).updateImmediateChild(g.name,Q.EMPTY_NODE)):t}}class ju{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Se}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return M(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return M(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Br}hasEnd(){return this.endSet_}getIndexEndValue(){return M(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return M(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:rr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return M(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Se}copy(){const t=new ju;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Dw(i){return i.loadsAllData()?new Fu(i.getIndex()):i.hasLimit()?new Rw(i):new Xi(i)}function Of(i){const t={};if(i.isDefault())return t;let r;if(i.index_===Se?r="$priority":i.index_===Iw?r="$value":i.index_===br?r="$key":(M(i.index_ instanceof xw,"Unrecognized index type!"),r=i.index_.toString()),t.orderBy=De(r),i.startSet_){const o=i.startAfterSet_?"startAfter":"startAt";t[o]=De(i.indexStartValue_),i.startNameSet_&&(t[o]+=","+De(i.indexStartName_))}if(i.endSet_){const o=i.endBeforeSet_?"endBefore":"endAt";t[o]=De(i.indexEndValue_),i.endNameSet_&&(t[o]+=","+De(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function Lf(i){const t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let r=i.viewFrom_;r===""&&(i.isViewFromLeft()?r="l":r="r"),t.vf=r}return i.index_!==Se&&(t.i=i.index_.toString()),t}class Ro extends Lp{constructor(t,r,o,a){super(),this.repoInfo_=t,this.onDataUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.log_=is("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,r){return r!==void 0?"tag$"+r:(M(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,r,o,a){const c=t._path.toString();this.log_("Listen called for "+c+" "+t._queryIdentifier);const h=Ro.getListenId_(t,o),p={};this.listens_[h]=p;const m=Of(t._queryParams);this.restRequest_(c+".json",m,(g,S)=>{let C=S;if(g===404&&(C=null,g=null),g===null&&this.onDataUpdate_(c,C,!1,o),Ur(this.listens_,h)===p){let x;g?g===401?x="permission_denied":x="rest_error:"+g:x="ok",a(x,null)}})}unlisten(t,r){const o=Ro.getListenId_(t,r);delete this.listens_[o]}get(t){const r=Of(t._queryParams),o=t._path.toString(),a=new Uo;return this.restRequest_(o+".json",r,(c,h)=>{let p=h;c===404&&(p=null,c=null),c===null?(this.onDataUpdate_(o,p,!1,null),a.resolve(p)):a.reject(new Error(p))}),a.promise}refreshAuthToken(t){}restRequest_(t,r={},o){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,c])=>{a&&a.accessToken&&(r.auth=a.accessToken),c&&c.token&&(r.ac=c.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+iv(r);this.log_("Sending REST request for "+h);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(o&&p.readyState===4){this.log_("REST Response for "+h+" received. status:",p.status,"response:",p.responseText);let m=null;if(p.status>=200&&p.status<300){try{m=$i(p.responseText)}catch{mt("Failed to parse JSON response for "+h+": "+p.responseText)}o(null,m)}else p.status!==401&&p.status!==404&&mt("Got unsuccessful REST response for "+h+" Status: "+p.status),o(p.status);o=null}},p.open("GET",h,!0),p.send()})}}class Aw{constructor(){this.rootNode_=Q.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,r){this.rootNode_=this.rootNode_.updateChild(t,r)}}function Do(){return{value:null,children:new Map}}function Qp(i,t,r){if(ne(t))i.value=r,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,r);else{const o=ee(t);i.children.has(o)||i.children.set(o,Do());const a=i.children.get(o);t=pe(t),Qp(a,t,r)}}function mu(i,t,r){i.value!==null?r(t,i.value):Mw(i,(o,a)=>{const c=new de(t.toString()+"/"+o);mu(a,c,r)})}function Mw(i,t){i.children.forEach((r,o)=>{t(o,r)})}class Ow{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),r=Object.assign({},t);return this.last_&&gt(this.last_,(o,a)=>{r[o]=r[o]-a}),this.last_=t,r}}const Ff=10*1e3,Lw=30*1e3,Fw=300*1e3;class jw{constructor(t,r){this.server_=r,this.statsToReport_={},this.statsListener_=new Ow(t);const o=Ff+(Lw-Ff)*Math.random();Bi(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const t=this.statsListener_.get(),r={};let o=!1;gt(t,(a,c)=>{c>0&&dn(this.statsToReport_,a)&&(r[a]=c,o=!0)}),o&&this.server_.reportStats(r),Bi(this.reportStats_.bind(this),Math.floor(Math.random()*2*Fw))}}var Wt;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Wt||(Wt={}));function Yp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function bu(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class Ao{constructor(t,r,o){this.path=t,this.affectedTree=r,this.revert=o,this.type=Wt.ACK_USER_WRITE,this.source=Yp()}operationForChild(t){if(ne(this.path)){if(this.affectedTree.value!=null)return M(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new de(t));return new Ao(le(),r,this.revert)}}else return M(ee(this.path)===t,"operationForChild called for unrelated child."),new Ao(pe(this.path),this.affectedTree,this.revert)}}class Ji{constructor(t,r){this.source=t,this.path=r,this.type=Wt.LISTEN_COMPLETE}operationForChild(t){return ne(this.path)?new Ji(this.source,le()):new Ji(this.source,pe(this.path))}}class ir{constructor(t,r,o){this.source=t,this.path=r,this.snap=o,this.type=Wt.OVERWRITE}operationForChild(t){return ne(this.path)?new ir(this.source,le(),this.snap.getImmediateChild(t)):new ir(this.source,pe(this.path),this.snap)}}class Zi{constructor(t,r,o){this.source=t,this.path=r,this.children=o,this.type=Wt.MERGE}operationForChild(t){if(ne(this.path)){const r=this.children.subtree(new de(t));return r.isEmpty()?null:r.value?new ir(this.source,le(),r.value):new Zi(this.source,le(),r)}else return M(ee(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Zi(this.source,pe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class jn{constructor(t,r,o){this.node_=t,this.fullyInitialized_=r,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ne(t))return this.isFullyInitialized()&&!this.filtered_;const r=ee(t);return this.isCompleteForChild(r)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class zw{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function bw(i,t,r,o){const a=[],c=[];return t.forEach(h=>{h.type==="child_changed"&&i.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&c.push(Pw(h.childName,h.snapshotNode))}),bi(i,a,"child_removed",t,o,r),bi(i,a,"child_added",t,o,r),bi(i,a,"child_moved",c,o,r),bi(i,a,"child_changed",t,o,r),bi(i,a,"value",t,o,r),a}function bi(i,t,r,o,a,c){const h=o.filter(p=>p.type===r);h.sort((p,m)=>Bw(i,p,m)),h.forEach(p=>{const m=Uw(i,p,c);a.forEach(g=>{g.respondsTo(p.type)&&t.push(g.createEvent(m,i.query_))})})}function Uw(i,t,r){return t.type==="value"||t.type==="child_removed"||(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function Bw(i,t,r){if(t.childName==null||r.childName==null)throw Hr("Should only compare child_ events.");const o=new te(t.childName,t.snapshotNode),a=new te(r.childName,r.snapshotNode);return i.index_.compare(o,a)}function Vo(i,t){return{eventCache:i,serverCache:t}}function Wi(i,t,r,o){return Vo(new jn(t,r,o),i.serverCache)}function Kp(i,t,r,o){return Vo(i.eventCache,new jn(t,r,o))}function Mo(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function sr(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let nu;const Ww=()=>(nu||(nu=new pt(Ty)),nu);class ve{constructor(t,r=Ww()){this.value=t,this.children=r}static fromObject(t){let r=new ve(null);return gt(t,(o,a)=>{r=r.set(new de(o),a)}),r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,r){if(this.value!=null&&r(this.value))return{path:le(),value:this.value};if(ne(t))return null;{const o=ee(t),a=this.children.get(o);if(a!==null){const c=a.findRootMostMatchingPathAndValue(pe(t),r);return c!=null?{path:Ae(new de(o),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ne(t))return this;{const r=ee(t),o=this.children.get(r);return o!==null?o.subtree(pe(t)):new ve(null)}}set(t,r){if(ne(t))return new ve(r,this.children);{const o=ee(t),c=(this.children.get(o)||new ve(null)).set(pe(t),r),h=this.children.insert(o,c);return new ve(this.value,h)}}remove(t){if(ne(t))return this.children.isEmpty()?new ve(null):new ve(null,this.children);{const r=ee(t),o=this.children.get(r);if(o){const a=o.remove(pe(t));let c;return a.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,a),this.value===null&&c.isEmpty()?new ve(null):new ve(this.value,c)}else return this}}get(t){if(ne(t))return this.value;{const r=ee(t),o=this.children.get(r);return o?o.get(pe(t)):null}}setTree(t,r){if(ne(t))return r;{const o=ee(t),c=(this.children.get(o)||new ve(null)).setTree(pe(t),r);let h;return c.isEmpty()?h=this.children.remove(o):h=this.children.insert(o,c),new ve(this.value,h)}}fold(t){return this.fold_(le(),t)}fold_(t,r){const o={};return this.children.inorderTraversal((a,c)=>{o[a]=c.fold_(Ae(t,a),r)}),r(t,this.value,o)}findOnPath(t,r){return this.findOnPath_(t,le(),r)}findOnPath_(t,r,o){const a=this.value?o(r,this.value):!1;if(a)return a;if(ne(t))return null;{const c=ee(t),h=this.children.get(c);return h?h.findOnPath_(pe(t),Ae(r,c),o):null}}foreachOnPath(t,r){return this.foreachOnPath_(t,le(),r)}foreachOnPath_(t,r,o){if(ne(t))return this;{this.value&&o(r,this.value);const a=ee(t),c=this.children.get(a);return c?c.foreachOnPath_(pe(t),Ae(r,a),o):new ve(null)}}foreach(t){this.foreach_(le(),t)}foreach_(t,r){this.children.inorderTraversal((o,a)=>{a.foreach_(Ae(t,o),r)}),this.value&&r(t,this.value)}foreachChild(t){this.children.inorderTraversal((r,o)=>{o.value&&t(r,o.value)})}}class Vt{constructor(t){this.writeTree_=t}static empty(){return new Vt(new ve(null))}}function Vi(i,t,r){if(ne(t))return new Vt(new ve(r));{const o=i.writeTree_.findRootMostValueAndPath(t);if(o!=null){const a=o.path;let c=o.value;const h=ot(a,t);return c=c.updateChild(h,r),new Vt(i.writeTree_.set(a,c))}else{const a=new ve(r),c=i.writeTree_.setTree(t,a);return new Vt(c)}}}function jf(i,t,r){let o=i;return gt(r,(a,c)=>{o=Vi(o,Ae(t,a),c)}),o}function zf(i,t){if(ne(t))return Vt.empty();{const r=i.writeTree_.setTree(t,new ve(null));return new Vt(r)}}function gu(i,t){return or(i,t)!=null}function or(i,t){const r=i.writeTree_.findRootMostValueAndPath(t);return r!=null?i.writeTree_.get(r.path).getChild(ot(r.path,t)):null}function bf(i){const t=[],r=i.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(Se,(o,a)=>{t.push(new te(o,a))}):i.writeTree_.children.inorderTraversal((o,a)=>{a.value!=null&&t.push(new te(o,a.value))}),t}function On(i,t){if(ne(t))return i;{const r=or(i,t);return r!=null?new Vt(new ve(r)):new Vt(i.writeTree_.subtree(t))}}function _u(i){return i.writeTree_.isEmpty()}function Vr(i,t){return qp(le(),i.writeTree_,t)}function qp(i,t,r){if(t.value!=null)return r.updateChild(i,t.value);{let o=null;return t.children.inorderTraversal((a,c)=>{a===".priority"?(M(c.value!==null,"Priority writes must always be leaf nodes"),o=c.value):r=qp(Ae(i,a),c,r)}),!r.getChild(i).isEmpty()&&o!==null&&(r=r.updateChild(Ae(i,".priority"),o)),r}}function Ho(i,t){return em(t,i)}function Vw(i,t,r,o,a){M(o>i.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),i.allWrites.push({path:t,snap:r,writeId:o,visible:a}),a&&(i.visibleWrites=Vi(i.visibleWrites,t,r)),i.lastWriteId=o}function Hw(i,t){for(let r=0;r<i.allWrites.length;r++){const o=i.allWrites[r];if(o.writeId===t)return o}return null}function $w(i,t){const r=i.allWrites.findIndex(p=>p.writeId===t);M(r>=0,"removeWrite called with nonexistent writeId.");const o=i.allWrites[r];i.allWrites.splice(r,1);let a=o.visible,c=!1,h=i.allWrites.length-1;for(;a&&h>=0;){const p=i.allWrites[h];p.visible&&(h>=r&&Gw(p,o.path)?a=!1:Bt(o.path,p.path)&&(c=!0)),h--}if(a){if(c)return Qw(i),!0;if(o.snap)i.visibleWrites=zf(i.visibleWrites,o.path);else{const p=o.children;gt(p,m=>{i.visibleWrites=zf(i.visibleWrites,Ae(o.path,m))})}return!0}else return!1}function Gw(i,t){if(i.snap)return Bt(i.path,t);for(const r in i.children)if(i.children.hasOwnProperty(r)&&Bt(Ae(i.path,r),t))return!0;return!1}function Qw(i){i.visibleWrites=Xp(i.allWrites,Yw,le()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function Yw(i){return i.visible}function Xp(i,t,r){let o=Vt.empty();for(let a=0;a<i.length;++a){const c=i[a];if(t(c)){const h=c.path;let p;if(c.snap)Bt(r,h)?(p=ot(r,h),o=Vi(o,p,c.snap)):Bt(h,r)&&(p=ot(h,r),o=Vi(o,le(),c.snap.getChild(p)));else if(c.children){if(Bt(r,h))p=ot(r,h),o=jf(o,p,c.children);else if(Bt(h,r))if(p=ot(h,r),ne(p))o=jf(o,le(),c.children);else{const m=Ur(c.children,ee(p));if(m){const g=m.getChild(pe(p));o=Vi(o,le(),g)}}}else throw Hr("WriteRecord should have .snap or .children")}}return o}function Jp(i,t,r,o,a){if(!o&&!a){const c=or(i.visibleWrites,t);if(c!=null)return c;{const h=On(i.visibleWrites,t);if(_u(h))return r;if(r==null&&!gu(h,le()))return null;{const p=r||Q.EMPTY_NODE;return Vr(h,p)}}}else{const c=On(i.visibleWrites,t);if(!a&&_u(c))return r;if(!a&&r==null&&!gu(c,le()))return null;{const h=function(g){return(g.visible||a)&&(!o||!~o.indexOf(g.writeId))&&(Bt(g.path,t)||Bt(t,g.path))},p=Xp(i.allWrites,h,t),m=r||Q.EMPTY_NODE;return Vr(p,m)}}}function Kw(i,t,r){let o=Q.EMPTY_NODE;const a=or(i.visibleWrites,t);if(a)return a.isLeafNode()||a.forEachChild(Se,(c,h)=>{o=o.updateImmediateChild(c,h)}),o;if(r){const c=On(i.visibleWrites,t);return r.forEachChild(Se,(h,p)=>{const m=Vr(On(c,new de(h)),p);o=o.updateImmediateChild(h,m)}),bf(c).forEach(h=>{o=o.updateImmediateChild(h.name,h.node)}),o}else{const c=On(i.visibleWrites,t);return bf(c).forEach(h=>{o=o.updateImmediateChild(h.name,h.node)}),o}}function qw(i,t,r,o,a){M(o||a,"Either existingEventSnap or existingServerSnap must exist");const c=Ae(t,r);if(gu(i.visibleWrites,c))return null;{const h=On(i.visibleWrites,c);return _u(h)?a.getChild(r):Vr(h,a.getChild(r))}}function Xw(i,t,r,o){const a=Ae(t,r),c=or(i.visibleWrites,a);if(c!=null)return c;if(o.isCompleteForChild(r)){const h=On(i.visibleWrites,a);return Vr(h,o.getNode().getImmediateChild(r))}else return null}function Jw(i,t){return or(i.visibleWrites,t)}function Zw(i,t,r,o,a,c,h){let p;const m=On(i.visibleWrites,t),g=or(m,le());if(g!=null)p=g;else if(r!=null)p=Vr(m,r);else return[];if(p=p.withIndex(h),!p.isEmpty()&&!p.isLeafNode()){const S=[],C=h.getCompare(),x=c?p.getReverseIteratorFrom(o,h):p.getIteratorFrom(o,h);let L=x.getNext();for(;L&&S.length<a;)C(L,o)!==0&&S.push(L),L=x.getNext();return S}else return[]}function e0(){return{visibleWrites:Vt.empty(),allWrites:[],lastWriteId:-1}}function Oo(i,t,r,o){return Jp(i.writeTree,i.treePath,t,r,o)}function Uu(i,t){return Kw(i.writeTree,i.treePath,t)}function Uf(i,t,r,o){return qw(i.writeTree,i.treePath,t,r,o)}function Lo(i,t){return Jw(i.writeTree,Ae(i.treePath,t))}function t0(i,t,r,o,a,c){return Zw(i.writeTree,i.treePath,t,r,o,a,c)}function Bu(i,t,r){return Xw(i.writeTree,i.treePath,t,r)}function Zp(i,t){return em(Ae(i.treePath,t),i.writeTree)}function em(i,t){return{treePath:i,writeTree:t}}class n0{constructor(){this.changeMap=new Map}trackChildChange(t){const r=t.type,o=t.childName;M(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),M(o!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(o);if(a){const c=a.type;if(r==="child_added"&&c==="child_removed")this.changeMap.set(o,qi(o,t.snapshotNode,a.snapshotNode));else if(r==="child_removed"&&c==="child_added")this.changeMap.delete(o);else if(r==="child_removed"&&c==="child_changed")this.changeMap.set(o,Ki(o,a.oldSnap));else if(r==="child_changed"&&c==="child_added")this.changeMap.set(o,Wr(o,t.snapshotNode));else if(r==="child_changed"&&c==="child_changed")this.changeMap.set(o,qi(o,t.snapshotNode,a.oldSnap));else throw Hr("Illegal combination of changes: "+t+" occurred after "+a)}else this.changeMap.set(o,t)}getChanges(){return Array.from(this.changeMap.values())}}class r0{getCompleteChild(t){return null}getChildAfterChild(t,r,o){return null}}const tm=new r0;class Wu{constructor(t,r,o=null){this.writes_=t,this.viewCache_=r,this.optCompleteServerCache_=o}getCompleteChild(t){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(t))return r.getNode().getImmediateChild(t);{const o=this.optCompleteServerCache_!=null?new jn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Bu(this.writes_,t,o)}}getChildAfterChild(t,r,o){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:sr(this.viewCache_),c=t0(this.writes_,a,r,1,o,t);return c.length===0?null:c[0]}}function i0(i){return{filter:i}}function s0(i,t){M(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),M(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function o0(i,t,r,o,a){const c=new n0;let h,p;if(r.type===Wt.OVERWRITE){const g=r;g.source.fromUser?h=vu(i,t,g.path,g.snap,o,a,c):(M(g.source.fromServer,"Unknown source."),p=g.source.tagged||t.serverCache.isFiltered()&&!ne(g.path),h=Fo(i,t,g.path,g.snap,o,a,p,c))}else if(r.type===Wt.MERGE){const g=r;g.source.fromUser?h=a0(i,t,g.path,g.children,o,a,c):(M(g.source.fromServer,"Unknown source."),p=g.source.tagged||t.serverCache.isFiltered(),h=yu(i,t,g.path,g.children,o,a,p,c))}else if(r.type===Wt.ACK_USER_WRITE){const g=r;g.revert?h=d0(i,t,g.path,o,a,c):h=u0(i,t,g.path,g.affectedTree,o,a,c)}else if(r.type===Wt.LISTEN_COMPLETE)h=c0(i,t,r.path,o,c);else throw Hr("Unknown operation type: "+r.type);const m=c.getChanges();return l0(t,h,m),{viewCache:h,changes:m}}function l0(i,t,r){const o=t.eventCache;if(o.isFullyInitialized()){const a=o.getNode().isLeafNode()||o.getNode().isEmpty(),c=Mo(i);(r.length>0||!i.eventCache.isFullyInitialized()||a&&!o.getNode().equals(c)||!o.getNode().getPriority().equals(c.getPriority()))&&r.push(Gp(Mo(t)))}}function nm(i,t,r,o,a,c){const h=t.eventCache;if(Lo(o,r)!=null)return t;{let p,m;if(ne(r))if(M(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const g=sr(t),S=g instanceof Q?g:Q.EMPTY_NODE,C=Uu(o,S);p=i.filter.updateFullNode(t.eventCache.getNode(),C,c)}else{const g=Oo(o,sr(t));p=i.filter.updateFullNode(t.eventCache.getNode(),g,c)}else{const g=ee(r);if(g===".priority"){M(Fn(r)===1,"Can't have a priority with additional path components");const S=h.getNode();m=t.serverCache.getNode();const C=Uf(o,r,S,m);C!=null?p=i.filter.updatePriority(S,C):p=h.getNode()}else{const S=pe(r);let C;if(h.isCompleteForChild(g)){m=t.serverCache.getNode();const x=Uf(o,r,h.getNode(),m);x!=null?C=h.getNode().getImmediateChild(g).updateChild(S,x):C=h.getNode().getImmediateChild(g)}else C=Bu(o,g,t.serverCache);C!=null?p=i.filter.updateChild(h.getNode(),g,C,S,a,c):p=h.getNode()}}return Wi(t,p,h.isFullyInitialized()||ne(r),i.filter.filtersNodes())}}function Fo(i,t,r,o,a,c,h,p){const m=t.serverCache;let g;const S=h?i.filter:i.filter.getIndexedFilter();if(ne(r))g=S.updateFullNode(m.getNode(),o,null);else if(S.filtersNodes()&&!m.isFiltered()){const L=m.getNode().updateChild(r,o);g=S.updateFullNode(m.getNode(),L,null)}else{const L=ee(r);if(!m.isCompleteForPath(r)&&Fn(r)>1)return t;const O=pe(r),K=m.getNode().getImmediateChild(L).updateChild(O,o);L===".priority"?g=S.updatePriority(m.getNode(),K):g=S.updateChild(m.getNode(),L,K,O,tm,null)}const C=Kp(t,g,m.isFullyInitialized()||ne(r),S.filtersNodes()),x=new Wu(a,C,c);return nm(i,C,r,a,x,p)}function vu(i,t,r,o,a,c,h){const p=t.eventCache;let m,g;const S=new Wu(a,t,c);if(ne(r))g=i.filter.updateFullNode(t.eventCache.getNode(),o,h),m=Wi(t,g,!0,i.filter.filtersNodes());else{const C=ee(r);if(C===".priority")g=i.filter.updatePriority(t.eventCache.getNode(),o),m=Wi(t,g,p.isFullyInitialized(),p.isFiltered());else{const x=pe(r),L=p.getNode().getImmediateChild(C);let O;if(ne(x))O=o;else{const V=S.getCompleteChild(C);V!=null?jp(x)===".priority"&&V.getChild(bp(x)).isEmpty()?O=V:O=V.updateChild(x,o):O=Q.EMPTY_NODE}if(L.equals(O))m=t;else{const V=i.filter.updateChild(p.getNode(),C,O,x,S,h);m=Wi(t,V,p.isFullyInitialized(),i.filter.filtersNodes())}}}return m}function Bf(i,t){return i.eventCache.isCompleteForChild(t)}function a0(i,t,r,o,a,c,h){let p=t;return o.foreach((m,g)=>{const S=Ae(r,m);Bf(t,ee(S))&&(p=vu(i,p,S,g,a,c,h))}),o.foreach((m,g)=>{const S=Ae(r,m);Bf(t,ee(S))||(p=vu(i,p,S,g,a,c,h))}),p}function Wf(i,t,r){return r.foreach((o,a)=>{t=t.updateChild(o,a)}),t}function yu(i,t,r,o,a,c,h,p){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let m=t,g;ne(r)?g=o:g=new ve(null).setTree(r,o);const S=t.serverCache.getNode();return g.children.inorderTraversal((C,x)=>{if(S.hasChild(C)){const L=t.serverCache.getNode().getImmediateChild(C),O=Wf(i,L,x);m=Fo(i,m,new de(C),O,a,c,h,p)}}),g.children.inorderTraversal((C,x)=>{const L=!t.serverCache.isCompleteForChild(C)&&x.value===null;if(!S.hasChild(C)&&!L){const O=t.serverCache.getNode().getImmediateChild(C),V=Wf(i,O,x);m=Fo(i,m,new de(C),V,a,c,h,p)}}),m}function u0(i,t,r,o,a,c,h){if(Lo(a,r)!=null)return t;const p=t.serverCache.isFiltered(),m=t.serverCache;if(o.value!=null){if(ne(r)&&m.isFullyInitialized()||m.isCompleteForPath(r))return Fo(i,t,r,m.getNode().getChild(r),a,c,p,h);if(ne(r)){let g=new ve(null);return m.getNode().forEachChild(br,(S,C)=>{g=g.set(new de(S),C)}),yu(i,t,r,g,a,c,p,h)}else return t}else{let g=new ve(null);return o.foreach((S,C)=>{const x=Ae(r,S);m.isCompleteForPath(x)&&(g=g.set(S,m.getNode().getChild(x)))}),yu(i,t,r,g,a,c,p,h)}}function c0(i,t,r,o,a){const c=t.serverCache,h=Kp(t,c.getNode(),c.isFullyInitialized()||ne(r),c.isFiltered());return nm(i,h,r,o,tm,a)}function d0(i,t,r,o,a,c){let h;if(Lo(o,r)!=null)return t;{const p=new Wu(o,t,a),m=t.eventCache.getNode();let g;if(ne(r)||ee(r)===".priority"){let S;if(t.serverCache.isFullyInitialized())S=Oo(o,sr(t));else{const C=t.serverCache.getNode();M(C instanceof Q,"serverChildren would be complete if leaf node"),S=Uu(o,C)}S=S,g=i.filter.updateFullNode(m,S,c)}else{const S=ee(r);let C=Bu(o,S,t.serverCache);C==null&&t.serverCache.isCompleteForChild(S)&&(C=m.getImmediateChild(S)),C!=null?g=i.filter.updateChild(m,S,C,pe(r),p,c):t.eventCache.getNode().hasChild(S)?g=i.filter.updateChild(m,S,Q.EMPTY_NODE,pe(r),p,c):g=m,g.isEmpty()&&t.serverCache.isFullyInitialized()&&(h=Oo(o,sr(t)),h.isLeafNode()&&(g=i.filter.updateFullNode(g,h,c)))}return h=t.serverCache.isFullyInitialized()||Lo(o,le())!=null,Wi(t,g,h,i.filter.filtersNodes())}}class h0{constructor(t,r){this.query_=t,this.eventRegistrations_=[];const o=this.query_._queryParams,a=new Fu(o.getIndex()),c=Dw(o);this.processor_=i0(c);const h=r.serverCache,p=r.eventCache,m=a.updateFullNode(Q.EMPTY_NODE,h.getNode(),null),g=c.updateFullNode(Q.EMPTY_NODE,p.getNode(),null),S=new jn(m,h.isFullyInitialized(),a.filtersNodes()),C=new jn(g,p.isFullyInitialized(),c.filtersNodes());this.viewCache_=Vo(C,S),this.eventGenerator_=new zw(this.query_)}get query(){return this.query_}}function f0(i){return i.viewCache_.serverCache.getNode()}function p0(i){return Mo(i.viewCache_)}function m0(i,t){const r=sr(i.viewCache_);return r&&(i.query._queryParams.loadsAllData()||!ne(t)&&!r.getImmediateChild(ee(t)).isEmpty())?r.getChild(t):null}function Vf(i){return i.eventRegistrations_.length===0}function g0(i,t){i.eventRegistrations_.push(t)}function Hf(i,t,r){const o=[];if(r){M(t==null,"A cancel should cancel all event registrations.");const a=i.query._path;i.eventRegistrations_.forEach(c=>{const h=c.createCancelEvent(r,a);h&&o.push(h)})}if(t){let a=[];for(let c=0;c<i.eventRegistrations_.length;++c){const h=i.eventRegistrations_[c];if(!h.matches(t))a.push(h);else if(t.hasAnyCallback()){a=a.concat(i.eventRegistrations_.slice(c+1));break}}i.eventRegistrations_=a}else i.eventRegistrations_=[];return o}function $f(i,t,r,o){t.type===Wt.MERGE&&t.source.queryId!==null&&(M(sr(i.viewCache_),"We should always have a full cache before handling merges"),M(Mo(i.viewCache_),"Missing event cache, even though we have a server cache"));const a=i.viewCache_,c=o0(i.processor_,a,t,r,o);return s0(i.processor_,c.viewCache),M(c.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,rm(i,c.changes,c.viewCache.eventCache.getNode(),null)}function _0(i,t){const r=i.viewCache_.eventCache,o=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(Se,(c,h)=>{o.push(Wr(c,h))}),r.isFullyInitialized()&&o.push(Gp(r.getNode())),rm(i,o,r.getNode(),t)}function rm(i,t,r,o){const a=o?[o]:i.eventRegistrations_;return bw(i.eventGenerator_,t,r,a)}let jo;class im{constructor(){this.views=new Map}}function v0(i){M(!jo,"__referenceConstructor has already been defined"),jo=i}function y0(){return M(jo,"Reference.ts has not been loaded"),jo}function w0(i){return i.views.size===0}function Vu(i,t,r,o){const a=t.source.queryId;if(a!==null){const c=i.views.get(a);return M(c!=null,"SyncTree gave us an op for an invalid query."),$f(c,t,r,o)}else{let c=[];for(const h of i.views.values())c=c.concat($f(h,t,r,o));return c}}function sm(i,t,r,o,a){const c=t._queryIdentifier,h=i.views.get(c);if(!h){let p=Oo(r,a?o:null),m=!1;p?m=!0:o instanceof Q?(p=Uu(r,o),m=!1):(p=Q.EMPTY_NODE,m=!1);const g=Vo(new jn(p,m,!1),new jn(o,a,!1));return new h0(t,g)}return h}function C0(i,t,r,o,a,c){const h=sm(i,t,o,a,c);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,h),g0(h,r),_0(h,r)}function E0(i,t,r,o){const a=t._queryIdentifier,c=[];let h=[];const p=zn(i);if(a==="default")for(const[m,g]of i.views.entries())h=h.concat(Hf(g,r,o)),Vf(g)&&(i.views.delete(m),g.query._queryParams.loadsAllData()||c.push(g.query));else{const m=i.views.get(a);m&&(h=h.concat(Hf(m,r,o)),Vf(m)&&(i.views.delete(a),m.query._queryParams.loadsAllData()||c.push(m.query)))}return p&&!zn(i)&&c.push(new(y0())(t._repo,t._path)),{removed:c,events:h}}function om(i){const t=[];for(const r of i.views.values())r.query._queryParams.loadsAllData()||t.push(r);return t}function Ln(i,t){let r=null;for(const o of i.views.values())r=r||m0(o,t);return r}function lm(i,t){if(t._queryParams.loadsAllData())return $o(i);{const o=t._queryIdentifier;return i.views.get(o)}}function am(i,t){return lm(i,t)!=null}function zn(i){return $o(i)!=null}function $o(i){for(const t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let zo;function S0(i){M(!zo,"__referenceConstructor has already been defined"),zo=i}function k0(){return M(zo,"Reference.ts has not been loaded"),zo}let N0=1;class Gf{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ve(null),this.pendingWriteTree_=e0(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function um(i,t,r,o,a){return Vw(i.pendingWriteTree_,t,r,o,a),a?ls(i,new ir(Yp(),t,r)):[]}function nr(i,t,r=!1){const o=Hw(i.pendingWriteTree_,t);if($w(i.pendingWriteTree_,t)){let c=new ve(null);return o.snap!=null?c=c.set(le(),!0):gt(o.children,h=>{c=c.set(new de(h),!0)}),ls(i,new Ao(o.path,c,r))}else return[]}function os(i,t,r){return ls(i,new ir(zu(),t,r))}function x0(i,t,r){const o=ve.fromObject(r);return ls(i,new Zi(zu(),t,o))}function T0(i,t){return ls(i,new Ji(zu(),t))}function I0(i,t,r){const o=$u(i,r);if(o){const a=Gu(o),c=a.path,h=a.queryId,p=ot(c,t),m=new Ji(bu(h),p);return Qu(i,c,m)}else return[]}function bo(i,t,r,o,a=!1){const c=t._path,h=i.syncPointTree_.get(c);let p=[];if(h&&(t._queryIdentifier==="default"||am(h,t))){const m=E0(h,t,r,o);w0(h)&&(i.syncPointTree_=i.syncPointTree_.remove(c));const g=m.removed;if(p=m.events,!a){const S=g.findIndex(x=>x._queryParams.loadsAllData())!==-1,C=i.syncPointTree_.findOnPath(c,(x,L)=>zn(L));if(S&&!C){const x=i.syncPointTree_.subtree(c);if(!x.isEmpty()){const L=D0(x);for(let O=0;O<L.length;++O){const V=L[O],K=V.query,Oe=fm(i,V);i.listenProvider_.startListening(Hi(K),es(i,K),Oe.hashFn,Oe.onComplete)}}}!C&&g.length>0&&!o&&(S?i.listenProvider_.stopListening(Hi(t),null):g.forEach(x=>{const L=i.queryToTagMap.get(Go(x));i.listenProvider_.stopListening(Hi(x),L)}))}A0(i,g)}return p}function cm(i,t,r,o){const a=$u(i,o);if(a!=null){const c=Gu(a),h=c.path,p=c.queryId,m=ot(h,t),g=new ir(bu(p),m,r);return Qu(i,h,g)}else return[]}function P0(i,t,r,o){const a=$u(i,o);if(a){const c=Gu(a),h=c.path,p=c.queryId,m=ot(h,t),g=ve.fromObject(r),S=new Zi(bu(p),m,g);return Qu(i,h,S)}else return[]}function wu(i,t,r,o=!1){const a=t._path;let c=null,h=!1;i.syncPointTree_.foreachOnPath(a,(x,L)=>{const O=ot(x,a);c=c||Ln(L,O),h=h||zn(L)});let p=i.syncPointTree_.get(a);p?(h=h||zn(p),c=c||Ln(p,le())):(p=new im,i.syncPointTree_=i.syncPointTree_.set(a,p));let m;c!=null?m=!0:(m=!1,c=Q.EMPTY_NODE,i.syncPointTree_.subtree(a).foreachChild((L,O)=>{const V=Ln(O,le());V&&(c=c.updateImmediateChild(L,V))}));const g=am(p,t);if(!g&&!t._queryParams.loadsAllData()){const x=Go(t);M(!i.queryToTagMap.has(x),"View does not exist, but we have a tag");const L=M0();i.queryToTagMap.set(x,L),i.tagToQueryMap.set(L,x)}const S=Ho(i.pendingWriteTree_,a);let C=C0(p,t,r,S,c,m);if(!g&&!h&&!o){const x=lm(p,t);C=C.concat(O0(i,t,x))}return C}function Hu(i,t,r){const a=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(t,(h,p)=>{const m=ot(h,t),g=Ln(p,m);if(g)return g});return Jp(a,t,c,r,!0)}function R0(i,t){const r=t._path;let o=null;i.syncPointTree_.foreachOnPath(r,(g,S)=>{const C=ot(g,r);o=o||Ln(S,C)});let a=i.syncPointTree_.get(r);a?o=o||Ln(a,le()):(a=new im,i.syncPointTree_=i.syncPointTree_.set(r,a));const c=o!=null,h=c?new jn(o,!0,!1):null,p=Ho(i.pendingWriteTree_,t._path),m=sm(a,t,p,c?h.getNode():Q.EMPTY_NODE,c);return p0(m)}function ls(i,t){return dm(t,i.syncPointTree_,null,Ho(i.pendingWriteTree_,le()))}function dm(i,t,r,o){if(ne(i.path))return hm(i,t,r,o);{const a=t.get(le());r==null&&a!=null&&(r=Ln(a,le()));let c=[];const h=ee(i.path),p=i.operationForChild(h),m=t.children.get(h);if(m&&p){const g=r?r.getImmediateChild(h):null,S=Zp(o,h);c=c.concat(dm(p,m,g,S))}return a&&(c=c.concat(Vu(a,i,o,r))),c}}function hm(i,t,r,o){const a=t.get(le());r==null&&a!=null&&(r=Ln(a,le()));let c=[];return t.children.inorderTraversal((h,p)=>{const m=r?r.getImmediateChild(h):null,g=Zp(o,h),S=i.operationForChild(h);S&&(c=c.concat(hm(S,p,m,g)))}),a&&(c=c.concat(Vu(a,i,o,r))),c}function fm(i,t){const r=t.query,o=es(i,r);return{hashFn:()=>(f0(t)||Q.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return o?I0(i,r._path,o):T0(i,r._path);{const c=Ry(a,r);return bo(i,r,null,c)}}}}function es(i,t){const r=Go(t);return i.queryToTagMap.get(r)}function Go(i){return i._path.toString()+"$"+i._queryIdentifier}function $u(i,t){return i.tagToQueryMap.get(t)}function Gu(i){const t=i.indexOf("$");return M(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new de(i.substr(0,t))}}function Qu(i,t,r){const o=i.syncPointTree_.get(t);M(o,"Missing sync point for query tag that we're tracking");const a=Ho(i.pendingWriteTree_,t);return Vu(o,r,a,null)}function D0(i){return i.fold((t,r,o)=>{if(r&&zn(r))return[$o(r)];{let a=[];return r&&(a=om(r)),gt(o,(c,h)=>{a=a.concat(h)}),a}})}function Hi(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(k0())(i._repo,i._path):i}function A0(i,t){for(let r=0;r<t.length;++r){const o=t[r];if(!o._queryParams.loadsAllData()){const a=Go(o),c=i.queryToTagMap.get(a);i.queryToTagMap.delete(a),i.tagToQueryMap.delete(c)}}}function M0(){return N0++}function O0(i,t,r){const o=t._path,a=es(i,t),c=fm(i,r),h=i.listenProvider_.startListening(Hi(t),a,c.hashFn,c.onComplete),p=i.syncPointTree_.subtree(o);if(a)M(!zn(p.value),"If we're adding a query, it shouldn't be shadowed");else{const m=p.fold((g,S,C)=>{if(!ne(g)&&S&&zn(S))return[$o(S).query];{let x=[];return S&&(x=x.concat(om(S).map(L=>L.query))),gt(C,(L,O)=>{x=x.concat(O)}),x}});for(let g=0;g<m.length;++g){const S=m[g];i.listenProvider_.stopListening(Hi(S),es(i,S))}}return h}class Yu{constructor(t){this.node_=t}getImmediateChild(t){const r=this.node_.getImmediateChild(t);return new Yu(r)}node(){return this.node_}}class Ku{constructor(t,r){this.syncTree_=t,this.path_=r}getImmediateChild(t){const r=Ae(this.path_,t);return new Ku(this.syncTree_,r)}node(){return Hu(this.syncTree_,this.path_)}}const L0=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},Qf=function(i,t,r){if(!i||typeof i!="object")return i;if(M(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return F0(i[".sv"],t,r);if(typeof i[".sv"]=="object")return j0(i[".sv"],t);M(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},F0=function(i,t,r){if(i==="timestamp")return r.timestamp;M(!1,"Unexpected server value: "+i)},j0=function(i,t,r){i.hasOwnProperty("increment")||M(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const o=i.increment;typeof o!="number"&&M(!1,"Unexpected increment value: "+o);const a=t.node();if(M(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return o;const h=a.getValue();return typeof h!="number"?o:h+o},z0=function(i,t,r,o){return qu(t,new Ku(r,i),o)},pm=function(i,t,r){return qu(i,new Yu(t),r)};function qu(i,t,r){const o=i.getPriority().val(),a=Qf(o,t.getImmediateChild(".priority"),r);let c;if(i.isLeafNode()){const h=i,p=Qf(h.getValue(),t,r);return p!==h.getValue()||a!==h.getPriority().val()?new ze(p,Ue(a)):i}else{const h=i;return c=h,a!==h.getPriority().val()&&(c=c.updatePriority(new ze(a))),h.forEachChild(Se,(p,m)=>{const g=qu(m,t.getImmediateChild(p),r);g!==m&&(c=c.updateImmediateChild(p,g))}),c}}class Xu{constructor(t="",r=null,o={children:{},childCount:0}){this.name=t,this.parent=r,this.node=o}}function Ju(i,t){let r=t instanceof de?t:new de(t),o=i,a=ee(r);for(;a!==null;){const c=Ur(o.node.children,a)||{children:{},childCount:0};o=new Xu(a,o,c),r=pe(r),a=ee(r)}return o}function Yr(i){return i.node.value}function mm(i,t){i.node.value=t,Cu(i)}function gm(i){return i.node.childCount>0}function b0(i){return Yr(i)===void 0&&!gm(i)}function Qo(i,t){gt(i.node.children,(r,o)=>{t(new Xu(r,i,o))})}function _m(i,t,r,o){r&&t(i),Qo(i,a=>{_m(a,t,!0)})}function U0(i,t,r){let o=i.parent;for(;o!==null;){if(t(o))return!0;o=o.parent}return!1}function as(i){return new de(i.parent===null?i.name:as(i.parent)+"/"+i.name)}function Cu(i){i.parent!==null&&B0(i.parent,i.name,i)}function B0(i,t,r){const o=b0(r),a=dn(i.node.children,t);o&&a?(delete i.node.children[t],i.node.childCount--,Cu(i)):!o&&!a&&(i.node.children[t]=r.node,i.node.childCount++,Cu(i))}const W0=/[\[\].#$\/\u0000-\u001F\u007F]/,V0=/[\[\].#$\u0000-\u001F\u007F]/,ru=10*1024*1024,vm=function(i){return typeof i=="string"&&i.length!==0&&!W0.test(i)},ym=function(i){return typeof i=="string"&&i.length!==0&&!V0.test(i)},H0=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ym(i)},$0=function(i,t,r,o){Zu(Tu(i,"value"),t,r)},Zu=function(i,t,r){const o=r instanceof de?new uw(r,i):r;if(t===void 0)throw new Error(i+"contains undefined "+er(o));if(typeof t=="function")throw new Error(i+"contains a function "+er(o)+" with contents = "+t.toString());if(gp(t))throw new Error(i+"contains "+t.toString()+" "+er(o));if(typeof t=="string"&&t.length>ru/3&&Bo(t)>ru)throw new Error(i+"contains a string greater than "+ru+" utf8 bytes "+er(o)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let a=!1,c=!1;if(gt(t,(h,p)=>{if(h===".value")a=!0;else if(h!==".priority"&&h!==".sv"&&(c=!0,!vm(h)))throw new Error(i+" contains an invalid key ("+h+") "+er(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cw(o,h),Zu(i,p,o),dw(o)}),a&&c)throw new Error(i+' contains ".value" child '+er(o)+" in addition to actual children.")}},wm=function(i,t,r,o){if(!ym(r))throw new Error(Tu(i,t)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},G0=function(i,t,r,o){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),wm(i,t,r)},Q0=function(i,t){if(ee(t)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},Y0=function(i,t){const r=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!vm(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!H0(r))throw new Error(Tu(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class K0{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ec(i,t){let r=null;for(let o=0;o<t.length;o++){const a=t[o],c=a.getPath();r!==null&&!Mu(c,r.path)&&(i.eventLists_.push(r),r=null),r===null&&(r={events:[],path:c}),r.events.push(a)}r&&i.eventLists_.push(r)}function Cm(i,t,r){ec(i,r),Em(i,o=>Mu(o,t))}function Xt(i,t,r){ec(i,r),Em(i,o=>Bt(o,t)||Bt(t,o))}function Em(i,t){i.recursionDepth_++;let r=!0;for(let o=0;o<i.eventLists_.length;o++){const a=i.eventLists_[o];if(a){const c=a.path;t(c)?(q0(i.eventLists_[o]),i.eventLists_[o]=null):r=!1}}r&&(i.eventLists_=[]),i.recursionDepth_--}function q0(i){for(let t=0;t<i.events.length;t++){const r=i.events[t];if(r!==null){i.events[t]=null;const o=r.getEventRunner();Ui&&tt("event: "+r.toString()),Qr(o)}}}const X0="repo_interrupt",J0=25;class Z0{constructor(t,r,o,a){this.repoInfo_=t,this.forceRestClient_=r,this.authTokenProvider_=o,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new K0,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Do(),this.transactionQueueTree_=new Xu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function eC(i,t,r){if(i.stats_=Du(i.repoInfo_),i.forceRestClient_||Oy())i.server_=new Ro(i.repoInfo_,(o,a,c,h)=>{Yf(i,o,a,c,h)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>Kf(i,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{De(r)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}i.persistentConnection_=new an(i.repoInfo_,t,(o,a,c,h)=>{Yf(i,o,a,c,h)},o=>{Kf(i,o)},o=>{nC(i,o)},i.authTokenProvider_,i.appCheckProvider_,r),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(o=>{i.server_.refreshAuthToken(o)}),i.appCheckProvider_.addTokenChangeListener(o=>{i.server_.refreshAppCheckToken(o.token)}),i.statsReporter_=by(i.repoInfo_,()=>new jw(i.stats_,i.server_)),i.infoData_=new Aw,i.infoSyncTree_=new Gf({startListening:(o,a,c,h)=>{let p=[];const m=i.infoData_.getNode(o._path);return m.isEmpty()||(p=os(i.infoSyncTree_,o._path,m),setTimeout(()=>{h("ok")},0)),p},stopListening:()=>{}}),nc(i,"connected",!1),i.serverSyncTree_=new Gf({startListening:(o,a,c,h)=>(i.server_.listen(o,c,a,(p,m)=>{const g=h(p,m);Xt(i.eventQueue_,o._path,g)}),[]),stopListening:(o,a)=>{i.server_.unlisten(o,a)}})}function tC(i){const r=i.infoData_.getNode(new de(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function tc(i){return L0({timestamp:tC(i)})}function Yf(i,t,r,o,a){i.dataUpdateCount++;const c=new de(t);r=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,r):r;let h=[];if(a)if(o){const m=ko(r,g=>Ue(g));h=P0(i.serverSyncTree_,c,m,a)}else{const m=Ue(r);h=cm(i.serverSyncTree_,c,m,a)}else if(o){const m=ko(r,g=>Ue(g));h=x0(i.serverSyncTree_,c,m)}else{const m=Ue(r);h=os(i.serverSyncTree_,c,m)}let p=c;h.length>0&&(p=Ko(i,c)),Xt(i.eventQueue_,p,h)}function Kf(i,t){nc(i,"connected",t),t===!1&&sC(i)}function nC(i,t){gt(t,(r,o)=>{nc(i,r,o)})}function nc(i,t,r){const o=new de("/.info/"+t),a=Ue(r);i.infoData_.updateSnapshot(o,a);const c=os(i.infoSyncTree_,o,a);Xt(i.eventQueue_,o,c)}function Sm(i){return i.nextWriteId_++}function rC(i,t,r){const o=R0(i.serverSyncTree_,t);return o!=null?Promise.resolve(o):i.server_.get(t).then(a=>{const c=Ue(a).withIndex(t._queryParams.getIndex());wu(i.serverSyncTree_,t,r,!0);let h;if(t._queryParams.loadsAllData())h=os(i.serverSyncTree_,t._path,c);else{const p=es(i.serverSyncTree_,t);h=cm(i.serverSyncTree_,t._path,c,p)}return Xt(i.eventQueue_,t._path,h),bo(i.serverSyncTree_,t,r,null,!0),c},a=>(Yo(i,"get for query "+De(t)+" failed: "+a),Promise.reject(new Error(a))))}function iC(i,t,r,o,a){Yo(i,"set",{path:t.toString(),value:r,priority:o});const c=tc(i),h=Ue(r,o),p=Hu(i.serverSyncTree_,t),m=pm(h,p,c),g=Sm(i),S=um(i.serverSyncTree_,t,m,g,!0);ec(i.eventQueue_,S),i.server_.put(t.toString(),h.val(!0),(x,L)=>{const O=x==="ok";O||mt("set at "+t+" failed: "+x);const V=nr(i.serverSyncTree_,g,!O);Xt(i.eventQueue_,t,V),uC(i,a,x,L)});const C=Im(i,t);Ko(i,C),Xt(i.eventQueue_,C,[])}function sC(i){Yo(i,"onDisconnectEvents");const t=tc(i),r=Do();mu(i.onDisconnect_,le(),(a,c)=>{const h=z0(a,c,i.serverSyncTree_,t);Qp(r,a,h)});let o=[];mu(r,le(),(a,c)=>{o=o.concat(os(i.serverSyncTree_,a,c));const h=Im(i,a);Ko(i,h)}),i.onDisconnect_=Do(),Xt(i.eventQueue_,le(),o)}function oC(i,t,r){let o;ee(t._path)===".info"?o=wu(i.infoSyncTree_,t,r):o=wu(i.serverSyncTree_,t,r),Cm(i.eventQueue_,t._path,o)}function lC(i,t,r){let o;ee(t._path)===".info"?o=bo(i.infoSyncTree_,t,r):o=bo(i.serverSyncTree_,t,r),Cm(i.eventQueue_,t._path,o)}function aC(i){i.persistentConnection_&&i.persistentConnection_.interrupt(X0)}function Yo(i,...t){let r="";i.persistentConnection_&&(r=i.persistentConnection_.id+":"),tt(r,...t)}function uC(i,t,r,o){t&&Qr(()=>{if(r==="ok")t(null);else{const a=(r||"error").toUpperCase();let c=a;o&&(c+=": "+o);const h=new Error(c);h.code=a,t(h)}})}function km(i,t,r){return Hu(i.serverSyncTree_,t,r)||Q.EMPTY_NODE}function rc(i,t=i.transactionQueueTree_){if(t||qo(i,t),Yr(t)){const r=xm(i,t);M(r.length>0,"Sending zero length transaction queue"),r.every(a=>a.status===0)&&cC(i,as(t),r)}else gm(t)&&Qo(t,r=>{rc(i,r)})}function cC(i,t,r){const o=r.map(g=>g.currentWriteId),a=km(i,t,o);let c=a;const h=a.hash();for(let g=0;g<r.length;g++){const S=r[g];M(S.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const C=ot(t,S.path);c=c.updateChild(C,S.currentOutputSnapshotRaw)}const p=c.val(!0),m=t;i.server_.put(m.toString(),p,g=>{Yo(i,"transaction put response",{path:m.toString(),status:g});let S=[];if(g==="ok"){const C=[];for(let x=0;x<r.length;x++)r[x].status=2,S=S.concat(nr(i.serverSyncTree_,r[x].currentWriteId)),r[x].onComplete&&C.push(()=>r[x].onComplete(null,!0,r[x].currentOutputSnapshotResolved)),r[x].unwatcher();qo(i,Ju(i.transactionQueueTree_,t)),rc(i,i.transactionQueueTree_),Xt(i.eventQueue_,t,S);for(let x=0;x<C.length;x++)Qr(C[x])}else{if(g==="datastale")for(let C=0;C<r.length;C++)r[C].status===3?r[C].status=4:r[C].status=0;else{mt("transaction at "+m.toString()+" failed: "+g);for(let C=0;C<r.length;C++)r[C].status=4,r[C].abortReason=g}Ko(i,t)}},h)}function Ko(i,t){const r=Nm(i,t),o=as(r),a=xm(i,r);return dC(i,a,o),o}function dC(i,t,r){if(t.length===0)return;const o=[];let a=[];const h=t.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<t.length;p++){const m=t[p],g=ot(r,m.path);let S=!1,C;if(M(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)S=!0,C=m.abortReason,a=a.concat(nr(i.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=J0)S=!0,C="maxretry",a=a.concat(nr(i.serverSyncTree_,m.currentWriteId,!0));else{const x=km(i,m.path,h);m.currentInputSnapshot=x;const L=t[p].update(x.val());if(L!==void 0){Zu("transaction failed: Data returned ",L,m.path);let O=Ue(L);typeof L=="object"&&L!=null&&dn(L,".priority")||(O=O.updatePriority(x.getPriority()));const K=m.currentWriteId,Oe=tc(i),We=pm(O,x,Oe);m.currentOutputSnapshotRaw=O,m.currentOutputSnapshotResolved=We,m.currentWriteId=Sm(i),h.splice(h.indexOf(K),1),a=a.concat(um(i.serverSyncTree_,m.path,We,m.currentWriteId,m.applyLocally)),a=a.concat(nr(i.serverSyncTree_,K,!0))}else S=!0,C="nodata",a=a.concat(nr(i.serverSyncTree_,m.currentWriteId,!0))}Xt(i.eventQueue_,r,a),a=[],S&&(t[p].status=2,(function(x){setTimeout(x,Math.floor(0))})(t[p].unwatcher),t[p].onComplete&&(C==="nodata"?o.push(()=>t[p].onComplete(null,!1,t[p].currentInputSnapshot)):o.push(()=>t[p].onComplete(new Error(C),!1,null))))}qo(i,i.transactionQueueTree_);for(let p=0;p<o.length;p++)Qr(o[p]);rc(i,i.transactionQueueTree_)}function Nm(i,t){let r,o=i.transactionQueueTree_;for(r=ee(t);r!==null&&Yr(o)===void 0;)o=Ju(o,r),t=pe(t),r=ee(t);return o}function xm(i,t){const r=[];return Tm(i,t,r),r.sort((o,a)=>o.order-a.order),r}function Tm(i,t,r){const o=Yr(t);if(o)for(let a=0;a<o.length;a++)r.push(o[a]);Qo(t,a=>{Tm(i,a,r)})}function qo(i,t){const r=Yr(t);if(r){let o=0;for(let a=0;a<r.length;a++)r[a].status!==2&&(r[o]=r[a],o++);r.length=o,mm(t,r.length>0?r:void 0)}Qo(t,o=>{qo(i,o)})}function Im(i,t){const r=as(Nm(i,t)),o=Ju(i.transactionQueueTree_,t);return U0(o,a=>{iu(i,a)}),iu(i,o),_m(o,a=>{iu(i,a)}),r}function iu(i,t){const r=Yr(t);if(r){const o=[];let a=[],c=-1;for(let h=0;h<r.length;h++)r[h].status===3||(r[h].status===1?(M(c===h-1,"All SENT items should be at beginning of queue."),c=h,r[h].status=3,r[h].abortReason="set"):(M(r[h].status===0,"Unexpected transaction status in abort"),r[h].unwatcher(),a=a.concat(nr(i.serverSyncTree_,r[h].currentWriteId,!0)),r[h].onComplete&&o.push(r[h].onComplete.bind(null,new Error("set"),!1,null))));c===-1?mm(t,void 0):r.length=c+1,Xt(i.eventQueue_,as(t),a);for(let h=0;h<o.length;h++)Qr(o[h])}}function hC(i){let t="";const r=i.split("/");for(let o=0;o<r.length;o++)if(r[o].length>0){let a=r[o];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}t+="/"+a}return t}function fC(i){const t={};i.charAt(0)==="?"&&(i=i.substring(1));for(const r of i.split("&")){if(r.length===0)continue;const o=r.split("=");o.length===2?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):mt(`Invalid query segment '${r}' in query '${i}'`)}return t}const qf=function(i,t){const r=pC(i),o=r.namespace;r.domain==="firebase.com"&&cn(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&r.domain!=="localhost"&&cn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||Ny();const a=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new Ip(r.host,r.secure,o,a,t,"",o!==r.subdomain),path:new de(r.pathString)}},pC=function(i){let t="",r="",o="",a="",c="",h=!0,p="https",m=443;if(typeof i=="string"){let g=i.indexOf("//");g>=0&&(p=i.substring(0,g-1),i=i.substring(g+2));let S=i.indexOf("/");S===-1&&(S=i.length);let C=i.indexOf("?");C===-1&&(C=i.length),t=i.substring(0,Math.min(S,C)),S<C&&(a=hC(i.substring(S,C)));const x=fC(i.substring(Math.min(i.length,C)));g=t.indexOf(":"),g>=0?(h=p==="https"||p==="wss",m=parseInt(t.substring(g+1),10)):g=t.length;const L=t.slice(0,g);if(L.toLowerCase()==="localhost")r="localhost";else if(L.split(".").length<=2)r=L;else{const O=t.indexOf(".");o=t.substring(0,O).toLowerCase(),r=t.substring(O+1),c=o}"ns"in x&&(c=x.ns)}return{host:t,port:m,domain:r,subdomain:o,secure:h,scheme:p,pathString:a,namespace:c}};class mC{constructor(t,r,o,a){this.eventType=t,this.eventRegistration=r,this.snapshot=o,this.prevName=a}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+De(this.snapshot.exportVal())}}class gC{constructor(t,r,o){this.eventRegistration=t,this.error=r,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Pm{constructor(t,r){this.snapshotCallback=t,this.cancelCallback=r}onValue(t,r){this.snapshotCallback.call(null,t,r)}onCancel(t){return M(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class ic{constructor(t,r,o,a){this._repo=t,this._path=r,this._queryParams=o,this._orderByCalled=a}get key(){return ne(this._path)?null:jp(this._path)}get ref(){return new hn(this._repo,this._path)}get _queryIdentifier(){const t=Lf(this._queryParams),r=Pu(t);return r==="{}"?"default":r}get _queryObject(){return Lf(this._queryParams)}isEqual(t){if(t=$r(t),!(t instanceof ic))return!1;const r=this._repo===t._repo,o=Mu(this._path,t._path),a=this._queryIdentifier===t._queryIdentifier;return r&&o&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+aw(this._path)}}class hn extends ic{constructor(t,r){super(t,r,new ju,!1)}get parent(){const t=bp(this._path);return t===null?null:new hn(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class ts{constructor(t,r,o){this._node=t,this.ref=r,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const r=new de(t),o=Eu(this.ref,t);return new ts(this._node.getChild(r),o,Se)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,a)=>t(new ts(a,Eu(this.ref,o),Se)))}hasChild(t){const r=new de(t);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function _C(i,t){return i=$r(i),i._checkNotDeleted("ref"),t!==void 0?Eu(i._root,t):i._root}function Eu(i,t){return i=$r(i),ee(i._path)===null?G0("child","path",t):wm("child","path",t),new hn(i._repo,Ae(i._path,t))}function Be(i,t){i=$r(i),Q0("set",i._path),$0("set",t,i._path);const r=new Uo;return iC(i._repo,i._path,t,null,r.wrapCallback(()=>{})),r.promise}function Ke(i){i=$r(i);const t=new Pm(()=>{}),r=new Xo(t);return rC(i._repo,i,r).then(o=>new ts(o,new hn(i._repo,i._path),i._queryParams.getIndex()))}class Xo{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,r){const o=r._queryParams.getIndex();return new mC("value",this,new ts(t.snapshotNode,new hn(r._repo,r._path),o))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,r){return this.callbackContext.hasCancelCallback?new gC(this,t,r):null}matches(t){return t instanceof Xo?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function vC(i,t,r,o,a){const c=new Pm(r,void 0),h=new Xo(c);return oC(i._repo,i,h),()=>lC(i._repo,i,h)}function yC(i,t,r,o){return vC(i,"value",t)}v0(hn);S0(hn);const wC="FIREBASE_DATABASE_EMULATOR_HOST",Su={};let CC=!1;function EC(i,t,r,o){i.repoInfo_=new Ip(`${t}:${r}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),o&&(i.authTokenProvider_=o)}function SC(i,t,r,o,a){let c=o||i.options.databaseURL;c===void 0&&(i.options.projectId||cn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tt("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let h=qf(c,a),p=h.repoInfo,m;typeof process<"u"&&_f&&(m=_f[wC]),m?(c=`http://${m}?ns=${p.namespace}`,h=qf(c,a),p=h.repoInfo):h.repoInfo.secure;const g=new Fy(i.name,i.options,t);Y0("Invalid Firebase Database URL",h),ne(h.path)||cn("Database URL must point to the root of a Firebase Database (not including a child path).");const S=NC(p,i,g,new Ly(i.name,r));return new xC(S,i)}function kC(i,t){const r=Su[t];(!r||r[i.key]!==i)&&cn(`Database ${t}(${i.repoInfo_}) has already been deleted.`),aC(i),delete r[i.key]}function NC(i,t,r,o){let a=Su[t.name];a||(a={},Su[t.name]=a);let c=a[i.toURLString()];return c&&cn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new Z0(i,CC,r,o),a[i.toURLString()]=c,c}class xC{constructor(t,r){this._repoInternal=t,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(eC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new hn(this._repo,le())),this._rootInternal}_delete(){return this._rootInternal!==null&&(kC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&cn("Cannot call "+t+" on a deleted database.")}}function TC(i=ly(),t){const r=ry(i,"database").getImmediate({identifier:t});if(!r._instanceStarted){const o=G_("database");o&&IC(r,...o)}return r}function IC(i,t,r,o={}){i=$r(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&cn("Cannot call useEmulator() after instance has already been initialized.");const a=i._repoInternal;let c;if(a.repoInfo_.nodeAdmin)o.mockUserToken&&cn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Eo(Eo.OWNER);else if(o.mockUserToken){const h=typeof o.mockUserToken=="string"?o.mockUserToken:Q_(o.mockUserToken,i.app.options.projectId);c=new Eo(h)}EC(a,t,r,c)}function PC(i){yy(oy),xo(new Gi("database",(t,{instanceIdentifier:r})=>{const o=t.getProvider("app").getImmediate(),a=t.getProvider("auth-internal"),c=t.getProvider("app-check-internal");return SC(o,a,c,r)},"PUBLIC").setMultipleInstances(!0)),jr(vf,yf,i),jr(vf,yf,"esm2017")}an.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};an.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};PC();const RC=[{type:"Action",title:"skullduggery",description:"gain 2 gold",count:4},{type:"Action",title:"hard labour",cost:"2 damage",description:"gain 3 gold",count:4},{type:"Action",title:"meditation",description:"gain 3 mana",count:4},{type:"Action",title:"mugging",description:"fight another player, winner takes 4 gold from loser, loser takes 2 damage",count:2},{type:"Action",title:"duel",description:"fight another player, loser takes 4 damage",count:2},{type:"Action",title:"lay low",description:"Reaction: ignore the effects of an action card played by another player",count:2},{type:"Action",title:"sneaky stab",description:"Reaction: add 2 to strength",count:4},{type:"Action",title:"scout",description:"discard up to 2 adventures from the row and replace them",count:3},{type:"Action",title:"maintenance",description:"discard all damage markers from 1 weapon",count:3},{type:"Action",title:"scavenging",description:"take a card from the discard pile",count:2},{type:"Action",title:"sabotage",description:"Reaction: play at the start of another players turn; they cannot claim adventures this turn, and they take 1 damage",count:2},{type:"Item",title:"rogue's cowl",cost:"7 Gold",description:"draw an extra card at start of turn",count:1},{type:"Item",title:"Thief's tools",cost:"6 Gold",description:"once per turn after you play an action card (not a reaction), return it to your hand",count:1},{type:"Item",title:"wizard's robe",cost:"5 Gold",description:"you may gain 1 mana at start of turn",count:1},{type:"Item",title:"looking glass",cost:"1 Gold",description:"on your turn you may look at the top card of the adventure deck",count:1},{type:"Item",title:"Berzerker Pelts",cost:"3 Gold",description:"Your strength is doubled. Damage you take is doubled",count:1},{type:"Item",title:"magic crystal",cost:"2 Gold",description:"+2 max mana",count:3},{type:"Item",title:"arcane amulet",cost:"6 Gold",description:"+4 max mana",count:2},{type:"Item",title:"belt of strength",cost:"2 Gold",description:"+1 strength",count:2},{type:"Item",title:"leather jerkin",cost:"2 Gold",description:"+2 max hp",count:2},{type:"Item",title:"full plate",cost:"6 Gold",description:"+4 max hp",count:2},{type:"Item",victoryPoints:10,title:"crown of nobility",cost:"25 Gold",description:"10 Victory Points. Cannot be played for free or transmuted",count:1},{type:"Item",title:"potion of rejuvination",cost:"4 Gold",description:"if you would die, discard damage equal to half your max hp (rounded down) instead, and discard this item",count:2},{type:"Item - Weapon",title:"dagger",cost:"2 Gold",description:"3 strength",durability:2,count:3},{type:"Item - Weapon",title:"masterwork dagger",cost:"3 Gold",description:"3 strength",durability:4,count:1},{type:"Item - Weapon",title:"sword",cost:"4 Gold",description:"5 strength",durability:2,count:2},{type:"Item - Weapon",title:"great axe",cost:"5 Gold",description:"8 strength, double handed",durability:2,count:2},{type:"Item - Weapon",title:"battle axe",cost:"6 Gold",description:"7 strength",durability:2,count:2},{type:"Item - Weapon",title:"bastard sword",cost:"8 Gold",description:"9 strength",durability:2,count:2},{type:"Item - Weapon",title:"world slayer",cost:"10 Gold",description:"12 strength",durability:2,count:1},{type:"Spell",title:"fireball",cost:"3 Mana",description:"add 6 to strength",count:4},{type:"Spell",title:"counterspell",cost:"3 Mana",description:"Reaction: counter a spell or scroll",count:4},{type:"Spell",title:"turn to rust",cost:"3 Mana",description:"destroy a weapon that has at least 1 damage on it",count:2},{type:"Spell",title:"zap",cost:"3 Mana",description:"deal 3 damage to a player",count:2},{type:"Spell",title:"animate dead",cost:"4 Mana",description:"take up to 2 cards from the discard pile",count:2},{type:"Spell",title:"destruction",cost:"X Mana",description:"destroy an item. mana costs is equal to the target's gold cost",count:2},{type:"Spell",title:"reincarnation",cost:"5 Mana",description:"Reaction: play when you die. remove all damage and ignore all usual effects of death",count:1},{type:"Spell",title:"god mode",cost:"6 Mana",description:"claim any adventure without comparing strength or paying it's costs",count:1},{type:"Spell",title:"power word: death",cost:"8 Mana",description:"deal damage to a player equal to their maximum hp. this spell cannot be countered",count:1},{type:"Spell - Scroll",title:"cone of frost",cost:"2 Mana",description:"Reaction: add 3 to strength",count:4},{type:"Spell - Scroll",title:"life drain",cost:"2 Mana",description:"deal 1 damage to another player and remove 1 damage from yourself",count:2},{type:"Spell - Scroll",title:"healing hands",cost:"2 Mana",description:"remove 3 damage",count:2},{type:"Spell - Scroll",title:"transmute",cost:"2 Mana",description:"discard an item from hand to receive gold equal to half it's cost (rounded down), or discard an item from your inventory for it's full cost",count:2},{type:"Spell - Scroll",title:"prismatic ray",cost:"4 Mana",description:"Reaction: add 5 to strength",count:2},{type:"Spell - Scroll",title:"divination",cost:"2 Mana",description:"draw 2 cards",count:2},{title:"Shuffle",description:"shuffle the discard pile (along with this card) into the main deck, then draw a card to replace this one",count:1}],DC=[{type:"Adventure",victoryPoints:1,title:"The Sunken Catacombs",cost:"Discard 2 cards, 2 Damage",description:"1 Victory Point, take 2 from discard pile",count:2},{type:"Adventure",victoryPoints:0,title:"An Audience with the King",cost:"15 Gold, Discard 3 cards",description:"6 Victory Point",count:1},{type:"Adventure",victoryPoints:0,title:"Gross Swamp",cost:"3 Damage",description:"3 Gold, Draw 1 card",count:3},{type:"Adventure",victoryPoints:1,title:"Arcane Library",cost:"Discard 2 cards",description:"1 Victory Point, Draw 2 Cards, 5 Mana",count:3},{type:"Adventure",victoryPoints:3,title:"labyrinth",cost:"3 Strength, Discard 6 cards",description:"3 Victory Points, play 1 item from hand for free",count:1},{type:"Adventure",victoryPoints:1,title:"journey through the enchanted forest",cost:"4 Strength",description:"1 Victory Points, 2 Gold, 3 Mana",count:3},{type:"Adventure",victoryPoints:1,title:"goblin nest",cost:"4 Strength",description:"1 Victory Points, 3 Gold",count:3},{type:"Adventure",victoryPoints:1,title:"abandoned town",cost:"3 Strength",description:"1 Victory Points, 1 Gold, draw 2 cards",count:3},{type:"Adventure",victoryPoints:2,title:"orc camp",cost:"5 Strength",description:"2 Victory Points, 3 Gold",count:3},{type:"Adventure",victoryPoints:2,title:"troll cave",cost:"6 Strength",description:"2 Victory Points, 5 Gold",count:2},{type:"Adventure",victoryPoints:2,title:"undead tomb",cost:"6 Strength",description:"take 1 damage, 2 Victory Points, 2 Gold, take 1 card from discard pile",count:2},{type:"Adventure",victoryPoints:2,title:"ogre mound",cost:"7 Strength",description:"2 Victory Points, 6 Gold",count:2},{type:"Adventure",victoryPoints:3,title:"witch's lair",cost:"7 Strength, 2 Damage",description:"3 Victory Points, 2 Gold, 6 Mana",count:1},{type:"Adventure",victoryPoints:3,title:"mage's tower",cost:"8 Strength, 3 Mana",description:"3 Victory Points, draw 3 cards",count:1},{type:"Adventure",victoryPoints:4,title:"battle the lich",cost:"10 Strength, 2 Mana, 3 Damage",description:"4 Victory Points, take 2 cards from discard pile",count:1},{type:"Adventure",victoryPoints:6,title:"dragon hoard",cost:"15 Strength",description:"6 Victory Points, 12 Gold",count:1},{type:"Adventure",victoryPoints:10,title:"Slay the Ancient Evil",cost:"22 Strength",description:"10 Victory Points",count:1},{type:"Adventure",victoryPoints:3,title:"battle of the 12 clans",cost:"8 Strength",description:"3 Victory Points, 3 Gold, all other players take 2 damage",count:1}],Xf=[{type:"Character",title:"Warrior",stats:`Strength: 4
Max Health: 11
Mana: 0`,ability:"You take -1 damage from enemy spells and actions",count:1},{type:"Character",title:"Rogue",stats:`Strength: 2
Max Health: 9
Mana: 2`,ability:"You may perform 3 actions per turn",count:1},{type:"Character",title:"Wizard",stats:`Strength: 1
Max Health: 7
Mana: 3`,ability:"The first time you play a spell (not a reaction) each turn, draw a card",count:1},{type:"Character",title:"Fighter",stats:`Strength: 3
Max Health: 10
Mana: 1`,ability:"+3 Strength when using 2 weapons at once",count:1},{type:"Character",title:"Arcanist",stats:`Strength: 1
Max Health: 8
Mana: 4`,ability:"you only have to discard mana down to your limit (and suffer mana burn) at the end of your turn",count:1},{type:"Character",title:"Ranger",stats:`Strength: 1
Max Health: 8
Mana: 3`,ability:"All your weapons have +1 durability",count:1}];function AC(){const i=[];return RC.forEach((t,r)=>{for(let o=0;o<t.count;o++)i.push({...t,id:`card-${r}-${o}-${Date.now()}`})}),i}function MC(){const i=[];return DC.forEach((t,r)=>{for(let o=0;o<t.count;o++)i.push({...t,id:`card-${r}-${o}-${Date.now()}`})}),i}function ku(i){const t=[...i];for(let r=t.length-1;r>0;r--){const o=Math.floor(Math.random()*(r+1));[t[r],t[o]]=[t[o],t[r]]}return t}function OC(){const i=Math.floor(Math.random()*Xf.length);return{...Xf[i],id:`character-${i}-${Date.now()}`}}const LC={apiKey:"AIzaSyAm8uZMkpR9mNsWetQ4Amn9oskeLn2YFUk",authDomain:"gametester-36468.firebaseapp.com",databaseURL:"https://gametester-36468-default-rtdb.europe-west1.firebasedatabase.app",projectId:"gametester-36468",storageBucket:"gametester-36468.firebasestorage.app",messagingSenderId:"40537010714",appId:"1:40537010714:web:68c8c0e0a573ebcc6817a3"},FC=cp(LC),jC=TC(FC),zC="game1";function Me(){return _C(jC,`games/${zC}`)}function bC(i){const t=Me();return yC(t,o=>{i(o.val())})}async function UC(){const i=ku(AC()),t=ku(MC()),r={deck:i,hands:{player1:[],player2:[]},inventories:{player1:[],player2:[]},characters:{player1:null,player2:null},currentCard:null,discardPile:[],adventureDeck:t,adventureRow:[],adventurePiles:{player1:[],player2:[]},resources:{player1:{damage:0,gold:0,mana:0},player2:{damage:0,gold:0,mana:0}},cardDamage:{},currentTurn:"player1"};await Be(Me(),r)}async function BC(i,t,r){const o=Me(),c=(await Ke(o)).val();if(!c)return;const h=c.resources?.[i]?.[t]??0,p=Math.max(0,h+r);await Be(o,{...c,resources:{...c.resources,[i]:{...c.resources?.[i],[t]:p}}})}async function WC(i){const t=Me(),o=(await Ke(t)).val();if(!o||o.deck.length===0)return;const[a,...c]=o.deck,h=[...o.hands?.[i]||[],a];await Be(t,{...o,deck:c,hands:{...o.hands,[i]:h}})}async function VC(i,t){const r=Me(),a=(await Ke(r)).val();if(!a)return;const c=a.hands?.[i]||[],h=c.findIndex(C=>C.id===t);if(h===-1)return;const[p]=c.splice(h,1),m=[...c],g=a.discardPile||[],S=a.currentCard?[...g,a.currentCard]:g;await Be(r,{...a,hands:{...a.hands,[i]:m},currentCard:p,discardPile:S})}async function HC(i,t){const r=Me(),a=(await Ke(r)).val();if(!a)return;const c=a.discardPile||[],h=c.findIndex(S=>S.id===t);if(h===-1)return;const[p]=c.splice(h,1),m=[...c],g=[...a.hands?.[i]||[],p];await Be(r,{...a,hands:{...a.hands,[i]:g},discardPile:m})}async function $C(i){const t=Me(),o=(await Ke(t)).val();if(!o||!o.currentCard)return;const a=[...o.hands?.[i]||[],o.currentCard];await Be(t,{...o,hands:{...o.hands,[i]:a},currentCard:null})}async function Rm(i,t){const r=Me(),a=(await Ke(r)).val();if(!a)return;const c=a.hands?.[i]||[],h=c.findIndex(S=>S.id===t);if(h===-1)return;const[p]=c.splice(h,1),m=[...c],g=[...a.discardPile||[],p];await Be(r,{...a,hands:{...a.hands,[i]:m},discardPile:g})}async function GC(){const i=Me(),r=(await Ke(i)).val();if(!r||!r.currentCard)return;const o=[...r.discardPile||[],r.currentCard];await Be(i,{...r,currentCard:null,discardPile:o})}async function QC(){const i=Me(),r=(await Ke(i)).val();if(!r||!r.adventureDeck||r.adventureDeck.length===0)return;const[o,...a]=r.adventureDeck,c=[...r.adventureRow||[],o];await Be(i,{...r,adventureDeck:a,adventureRow:c})}async function YC(i){const t=Me(),o=(await Ke(t)).val();if(!o||!o.adventureRow||o.adventureRow.length<=0)return;const a=o.adventureRow.findIndex(m=>m.id===i);if(a===-1)return;const[c]=o.adventureRow.splice(a,1),h=[...o.adventureRow],p=[...o.adventureDeck||[],c];await Be(t,{...o,adventureRow:h,adventureDeck:p})}async function KC(i,t){const r=Me(),a=(await Ke(r)).val();if(!a||!a.adventurePiles[i]||a.adventurePiles[i].length<=0)return;const c=a.adventurePiles[i].findIndex(g=>g.id===t);if(c===-1)return;const[h]=a.adventurePiles[i].splice(c,1),p=[...a.adventurePiles[i]],m=[...a.adventureDeck||[],h];await Be(r,{...a,adventureDeck:m,adventurePiles:{...a.adventurePiles||{},[i]:p}})}async function qC(i,t){const r=Me(),a=(await Ke(r)).val();if(!a)return;const c=a.adventureRow||[],h=c.findIndex(S=>S.id===t);if(h===-1)return;const[p]=c.splice(h,1),m=[...c],g=[...a.adventurePiles?.[i]||[],p];await Be(r,{...a,adventureRow:m,adventurePiles:{...a.adventurePiles,[i]:g}})}async function XC(){const i=Me(),r=(await Ke(i)).val();if(!r)return;const o=r.discardPile||[];if(o.length===0)return;const a=r.deck||[],c=ku([...a,...o]);await Be(i,{...r,deck:c,discardPile:[]})}async function JC(i,t){const r=Me(),a=(await Ke(r)).val();if(!a)return;const c=a.hands?.[i]||[],h=c.findIndex(S=>S.id===t);if(h===-1)return;const[p]=c.splice(h,1),m=[...c],g=[...a.inventories?.[i]||[],p];await Be(r,{...a,hands:{...a.hands,[i]:m},inventories:{...a.inventories,[i]:g}})}async function Dm(i,t){const r=Me(),a=(await Ke(r)).val();if(!a)return;const c=a.inventories?.[i]||[],h=c.findIndex(S=>S.id===t);if(h===-1)return;const[p]=c.splice(h,1),m=[...c],g=[...a.discardPile||[],p];await Be(r,{...a,inventories:{...a.inventories,[i]:m},discardPile:g})}async function ZC(i){const t=Me(),o=(await Ke(t)).val();if(!o)return;const a=OC();await Be(t,{...o,characters:{...o.characters,[i]:a}})}async function eE(i,t){const r=Me(),a=(await Ke(r)).val();if(!a)return;const c=a.cardDamage?.[i]??0,h=Math.max(0,c+t);await Be(r,{...a,cardDamage:{...a.cardDamage,[i]:h}})}async function tE(){const i=Me(),r=(await Ke(i)).val();if(!r)return;const o=r.currentTurn==="player1"?"player2":"player1";await Be(i,{...r,currentTurn:o})}function Ut({card:i,onPlay:t,onTake:r,onDiscard:o,onMoveToInventory:a,cardDamage:c}){const h=c?.[i.id]??0,p=m=>{eE(i.id,m)};return v.jsxs("div",{className:"card",children:[v.jsxs("div",{className:"card-header",children:[v.jsx("span",{className:"card-title",children:i.title}),i.type&&v.jsx("span",{className:"card-type",children:i.type})]}),i.cost&&v.jsx("div",{className:"card-cost-container",children:v.jsx("span",{className:"card-cost",children:i.cost})}),v.jsx("div",{className:"card-description",children:i.description}),i.durability&&v.jsxs("div",{className:"card-durability",children:[v.jsx("span",{className:"durability-label",children:"Durability:"}),v.jsxs("div",{className:"durability-tracker",children:[v.jsx("button",{className:"durability-btn",onClick:()=>p(-1),disabled:h<=0,children:"-"}),v.jsxs("span",{className:"durability-value",children:[v.jsx("span",{className:h>0?"damage-taken":"",children:h}),v.jsx("span",{className:"durability-separator",children:"/"}),v.jsx("span",{children:i.durability})]}),v.jsx("button",{className:"durability-btn",onClick:()=>p(1),children:"+"})]})]}),v.jsxs("div",{className:"card-actions",children:[t&&v.jsx("button",{className:"play-button",onClick:t,children:"Play"}),r&&v.jsx("button",{className:"take-button",onClick:r,children:"Take"}),a&&v.jsx("button",{className:"inventory-button",onClick:a,children:"To Inventory"}),o&&v.jsx("button",{className:"discard-button",onClick:o,children:"Discard"})]})]})}function nE({playerId:i,cards:t,deckEmpty:r,resources:o,cardDamage:a}){const c=i==="player1"?"Player 1":"Player 2",h=()=>{WC(i)},p=O=>{VC(i,O)},m=O=>{Rm(i,O)},g=O=>{JC(i,O)},S=(O,V)=>{BC(i,O,V)},C=o?.damage??0,x=o?.gold??0,L=o?.mana??0;return v.jsxs("div",{className:"hand",children:[v.jsxs("div",{className:"hand-header",children:[v.jsxs("div",{className:"hand-title",children:[v.jsxs("h2",{children:[c,"'s Hand"]}),v.jsxs("span",{className:"card-count",children:["(",t.length," cards)"]})]}),v.jsxs("div",{className:"resources",children:[v.jsxs("div",{className:"resource damage-resource",children:[v.jsx("button",{className:"resource-btn",onClick:()=>S("damage",-1),children:"-"}),v.jsx("span",{className:"resource-value",children:C}),v.jsx("button",{className:"resource-btn",onClick:()=>S("damage",1),children:"+"}),v.jsx("span",{className:"resource-label",children:"Damage"})]}),v.jsxs("div",{className:"resource gold-resource",children:[v.jsx("button",{className:"resource-btn",onClick:()=>S("gold",-1),children:"-"}),v.jsx("span",{className:"resource-value",children:x}),v.jsx("button",{className:"resource-btn",onClick:()=>S("gold",1),children:"+"}),v.jsx("span",{className:"resource-label",children:"Gold"})]}),v.jsxs("div",{className:"resource mana-resource",children:[v.jsx("button",{className:"resource-btn",onClick:()=>S("mana",-1),children:"-"}),v.jsx("span",{className:"resource-value",children:L}),v.jsx("button",{className:"resource-btn",onClick:()=>S("mana",1),children:"+"}),v.jsx("span",{className:"resource-label",children:"Mana"})]})]})]}),v.jsx("button",{className:"draw-button",onClick:h,disabled:r,children:"Draw Card"}),v.jsx("div",{className:"cards-container",children:t.length===0?v.jsx("p",{className:"empty-hand",children:"No cards in hand"}):t.map(O=>v.jsx(Ut,{card:O,cardDamage:a,onPlay:()=>p(O.id),onDiscard:()=>m(O.id),onMoveToInventory:()=>g(O.id)},O.id))})]})}function rE({playerId:i,cards:t,cardDamage:r}){const o=i==="player1"?"Player 1":"Player 2",a=c=>{Dm(i,c)};return v.jsxs("div",{className:"inventory",children:[v.jsx("div",{className:"inventory-header",children:v.jsxs("div",{className:"inventory-title",children:[v.jsxs("h2",{children:[o,"'s Inventory"]}),v.jsxs("span",{className:"card-count",children:["(",t.length," cards)"]})]})}),v.jsx("div",{className:"cards-container",children:t.length===0?v.jsx("p",{className:"empty-hand",children:"No cards in inventory"}):t.map(c=>v.jsx(Ut,{card:c,cardDamage:r,onDiscard:()=>a(c.id)},c.id))})]})}function iE({playerId:i,character:t}){const r=()=>{ZC(i)};return t?v.jsxs("div",{className:"character-section",children:[v.jsx("h3",{children:"Character"}),v.jsxs("div",{className:"character-card",children:[v.jsx("div",{className:"character-title",children:t.title}),v.jsx("div",{className:"character-stats",children:t.stats.split(`
`).map((o,a)=>v.jsx("div",{children:o},a))}),v.jsxs("div",{className:"character-ability",children:[v.jsx("span",{className:"ability-label",children:"Ability:"})," ",t.ability]})]}),v.jsx("button",{className:"draw-character-btn",onClick:r,children:"Reroll Character"})]}):v.jsxs("div",{className:"character-section",children:[v.jsx("h3",{children:"Character"}),v.jsxs("div",{className:"no-character",children:[v.jsx("p",{children:"No character selected"}),v.jsx("button",{className:"draw-character-btn",onClick:r,children:"Draw Random Character"})]})]})}function sE({cards:i,onTakeCard:t,onClose:r,cardDamage:o}){const a=c=>{c.target===c.currentTarget&&r()};return v.jsx("div",{className:"modal-backdrop",onClick:a,children:v.jsxs("div",{className:"modal",children:[v.jsxs("div",{className:"modal-header",children:[v.jsxs("h2",{children:["Discard Pile (",i.length," cards)"]}),v.jsx("button",{className:"modal-close",onClick:r,children:""})]}),v.jsx("div",{className:"modal-content",children:i.length===0?v.jsx("p",{className:"empty-modal",children:"No cards in discard pile"}):v.jsx("div",{className:"modal-cards",children:i.map(c=>v.jsx(Ut,{card:c,cardDamage:o,onTake:()=>t(c.id)},c.id))})})]})})}function oE({cards:i,onClose:t,playerId:r,cardDamage:o}){const a=h=>{h.target===h.currentTarget&&t()},c=h=>{KC(r,h)};return v.jsx("div",{className:"modal-backdrop",onClick:a,children:v.jsxs("div",{className:"modal adventure-modal",children:[v.jsxs("div",{className:"modal-header",children:[v.jsxs("h2",{children:["Your Adventures (",i.length," cards)"]}),v.jsx("button",{className:"modal-close",onClick:t,children:""})]}),v.jsx("div",{className:"modal-content",children:i.length===0?v.jsx("p",{className:"empty-modal",children:"No adventures taken yet"}):v.jsx("div",{className:"modal-cards",children:i.map(h=>v.jsx(Ut,{card:h,cardDamage:o,onDiscard:()=>c(h.id)},h.id))})})]})})}function lE({cards:i,opponentId:t,onClose:r,cardDamage:o}){const a=c=>{Rm(t,c)};return v.jsx("div",{className:"modal-backdrop",onClick:r,children:v.jsxs("div",{className:"modal",onClick:c=>c.stopPropagation(),children:[v.jsxs("div",{className:"modal-header",children:[v.jsxs("h2",{children:["Opponent's Hand (",i.length,")"]}),v.jsx("button",{className:"modal-close",onClick:r,children:""})]}),v.jsx("div",{className:"modal-content",children:i.length===0?v.jsx("p",{className:"empty-modal",children:"No cards in opponent's hand"}):v.jsx("div",{className:"modal-cards",children:i.map(c=>v.jsx(Ut,{card:c,cardDamage:o,onDiscard:()=>a(c.id)},c.id))})})]})})}function aE({cards:i,opponentId:t,onClose:r,cardDamage:o}){const a=c=>{Dm(t,c)};return v.jsx("div",{className:"modal-backdrop",onClick:r,children:v.jsxs("div",{className:"modal",onClick:c=>c.stopPropagation(),children:[v.jsxs("div",{className:"modal-header",children:[v.jsxs("h2",{children:["Opponent's Inventory (",i.length,")"]}),v.jsx("button",{className:"modal-close",onClick:r,children:""})]}),v.jsx("div",{className:"modal-content",children:i.length===0?v.jsx("p",{className:"empty-modal",children:"No cards in opponent's inventory"}):v.jsx("div",{className:"modal-cards",children:i.map(c=>v.jsx(Ut,{card:c,cardDamage:o,onDiscard:()=>a(c.id)},c.id))})})]})})}function uE({character:i,onClose:t}){return v.jsx("div",{className:"modal-backdrop",onClick:t,children:v.jsxs("div",{className:"modal character-modal",onClick:r=>r.stopPropagation(),children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{children:"Opponent's Character"}),v.jsx("button",{className:"modal-close",onClick:t,children:""})]}),v.jsx("div",{className:"modal-content",children:i?v.jsxs("div",{className:"character-card modal-character",children:[v.jsx("div",{className:"character-title",children:i.title}),v.jsx("div",{className:"character-stats",children:i.stats.split(`
`).map((r,o)=>v.jsx("div",{children:r},o))}),v.jsxs("div",{className:"character-ability",children:[v.jsx("span",{className:"ability-label",children:"Ability:"})," ",i.ability]})]}):v.jsx("p",{className:"empty-modal",children:"Opponent has no character selected"})})]})})}function cE({gameState:i,playerId:t,opponentId:r}){const[o,a]=Rt.useState(!1),[c,h]=Rt.useState(!1),[p,m]=Rt.useState(!1),[g,S]=Rt.useState(!1),[C,x]=Rt.useState(!1),[L,O]=Rt.useState(!1),V=()=>{UC()},K=Ge=>{HC(t,Ge)},Oe=()=>{$C(t)},We=()=>{GC()},Ve=()=>{QC()},xe=Ge=>{qC(t,Ge)},_t=Ge=>{YC(Ge)},He=()=>{XC()},qe=()=>{tE()},nt=i?.deck?.length??0,Ht=nt===0,Dt=i?.hands?.[t]||[],$t=i?.inventories?.[t]||[],vt=i?.currentCard||null,Te=i?.discardPile||[],lt=i?.adventureDeck?.length??0,yt=lt===0,$e=i?.adventureDeck?.[0]||null,me=i?.adventureRow||[],F=i?.adventurePiles?.[t]||[],G=i?.resources?.[t]||{damage:0,gold:0,mana:0},z=i?.resources?.[r]||{damage:0,gold:0,mana:0},E=i?.hands?.[r]||[],I=i?.inventories?.[r]||[],X=i?.characters?.[t]||null,J=i?.characters?.[r]||null,q=i?.cardDamage||{},se=(i?.currentTurn||"player1")===t,ae=i?.adventurePiles?.[r]||[],ce=(Ge,ar)=>{const Kr=Ge.reduce((ur,bn)=>ur+(bn.victoryPoints||0),0),us=ar.reduce((ur,bn)=>ur+(bn.victoryPoints||0),0);return Kr+us},rt=ce(F,$t),lr=ce(ae,I);return v.jsxs("div",{className:"game-board",children:[v.jsxs("div",{className:"game-controls",children:[v.jsx("button",{className:"new-game-button",onClick:V,children:"New Game"}),v.jsxs("div",{className:"deck-info",children:[v.jsx("span",{className:"deck-label",children:"Deck:"}),v.jsxs("span",{className:"deck-count",children:[nt," cards remaining"]})]}),v.jsxs("div",{className:"deck-info",children:[v.jsx("span",{className:"deck-label",children:"Adventure Deck:"}),v.jsxs("span",{className:"deck-count",children:[lt," cards remaining"]})]})]}),i?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"play-area",children:[v.jsxs("div",{className:"adventure-section",children:[v.jsxs("div",{className:"adventure-header",children:[v.jsx("h3",{children:"Adventure Row"}),v.jsxs("div",{className:"adventure-buttons",children:[v.jsx("button",{className:"peek-adventure-button",onClick:()=>O(!0),disabled:yt,children:"Peek Top Card"}),v.jsx("button",{className:"draw-adventure-button",onClick:Ve,disabled:yt,children:"Draw Adventure Card"})]})]}),v.jsx("div",{className:"adventure-row",children:me.length===0?v.jsx("div",{className:"empty-slot",children:"No adventure cards available"}):me.map(Ge=>v.jsx(Ut,{card:Ge,cardDamage:q,onTake:()=>xe(Ge.id),onDiscard:()=>_t(Ge.id)},Ge.id))})]}),v.jsxs("div",{className:"current-card-area",children:[v.jsx("h3",{children:"Current Card"}),vt?v.jsx(Ut,{card:vt,cardDamage:q,onTake:Oe,onDiscard:We}):v.jsx("div",{className:"empty-slot",children:"No card played"})]}),v.jsxs("div",{className:"discard-pile-area",children:[v.jsxs("div",{className:"clickable",onClick:()=>a(!0),children:[v.jsxs("h3",{children:["Discard Pile (",Te.length,")"]}),Te.length>0?v.jsx(Ut,{card:Te[Te.length-1],cardDamage:q}):v.jsx("div",{className:"empty-slot",children:"Empty"}),v.jsx("p",{className:"click-hint",children:"Click to view all"})]}),v.jsx("button",{className:"shuffle-discard-button",onClick:He,disabled:Te.length===0,children:"Shuffle into Deck"})]})]}),v.jsxs("div",{className:`global-statistics${se?"":" highlighted"}`,children:[v.jsxs("div",{className:"opponent",children:[v.jsx("span",{className:"opponent-label",children:"Opponent:"}),v.jsx("button",{className:"opponent-view-btn character-btn",onClick:()=>x(!0),children:J?J.title:"No Character"}),v.jsxs("button",{className:"opponent-view-btn",onClick:()=>m(!0),children:["Hand: ",E.length]}),v.jsxs("span",{className:"opponent-stat damage-stat",children:["Damage: ",z.damage]}),v.jsxs("span",{className:"opponent-stat gold-stat",children:["Gold: ",z.gold]}),v.jsxs("span",{className:"opponent-stat mana-stat",children:["Mana: ",z.mana]}),v.jsxs("span",{className:"opponent-stat",children:["Adventures: ",i?.adventurePiles?.[r]?.length||0]}),v.jsxs("button",{className:"opponent-view-btn inventory-stat",onClick:()=>S(!0),children:["Inventory: ",I.length]}),v.jsxs("span",{className:"opponent-stat vp-stat",children:["VP: ",lr]})]}),v.jsxs("div",{className:"turn-indicator",children:[v.jsx("span",{className:`turn-status ${se?"my-turn":"opponent-turn"}`,children:se?"Your Turn":"Opponent's Turn"}),se&&v.jsx("button",{className:"end-turn-button",onClick:qe,children:"End Turn"})]})]}),v.jsx("div",{className:`player-section${se?" highlighted":""}`,children:v.jsx(nE,{playerId:t,cards:Dt,deckEmpty:Ht,resources:G,cardDamage:q})}),v.jsxs("div",{className:"inventory-section",children:[v.jsx(iE,{playerId:t,character:X}),v.jsx(rE,{playerId:t,cards:$t,cardDamage:q}),v.jsxs("div",{className:"adventure-pile-area clickable",onClick:()=>h(!0),children:[v.jsxs("h3",{children:["Your Adventures (",F.length,")"]}),v.jsxs("div",{className:"victory-points-display",children:[v.jsx("span",{className:"vp-label",children:"Victory Points:"}),v.jsx("span",{className:"vp-value",children:rt})]}),F.length>0?v.jsx(Ut,{card:F[F.length-1],cardDamage:q}):v.jsx("div",{className:"empty-slot",children:"No adventures taken"}),v.jsx("p",{className:"click-hint",children:"Click to view all"})]})]})]}):v.jsx("div",{className:"no-game",children:v.jsx("p",{children:'No game in progress. Click "New Game" to start!'})}),o&&v.jsx(sE,{cards:Te,onTakeCard:K,onClose:()=>a(!1),cardDamage:q}),c&&v.jsx(oE,{cards:F,onClose:()=>h(!1),playerId:t,cardDamage:q}),p&&v.jsx(lE,{cards:E,opponentId:r,onClose:()=>m(!1),cardDamage:q}),g&&v.jsx(aE,{cards:I,opponentId:r,onClose:()=>S(!1),cardDamage:q}),C&&v.jsx(uE,{character:J,onClose:()=>x(!1)}),L&&v.jsx("div",{className:"modal-backdrop",onClick:()=>O(!1),children:v.jsxs("div",{className:"modal peek-modal",onClick:Ge=>Ge.stopPropagation(),children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{children:"Top of Adventure Deck"}),v.jsx("button",{className:"modal-close",onClick:()=>O(!1),children:""})]}),v.jsx("div",{className:"modal-content",children:$e?v.jsx(Ut,{card:$e,cardDamage:q}):v.jsx("p",{className:"empty-modal",children:"Adventure deck is empty"})})]})})]})}function dE({onSelect:i,onSelectOpponent:t}){return v.jsxs("div",{className:"player-select",children:[v.jsx("h2",{children:"Select Your Player"}),v.jsxs("div",{className:"player-buttons",children:[v.jsx("button",{className:"player-select-btn",onClick:()=>{i("player1"),t("player2")},children:"Player 1"}),v.jsx("button",{className:"player-select-btn",onClick:()=>{i("player2"),t("player1")},children:"Player 2"})]})]})}function hE(){const[i,t]=Rt.useState(null),[r,o]=Rt.useState(!0),[a,c]=Rt.useState(null),[h,p]=Rt.useState(null);return Rt.useEffect(()=>{const m=bC(g=>{t(g),o(!1)});return()=>m()},[]),r?v.jsx("div",{className:"app",children:v.jsx("div",{className:"loading",children:"Connecting to game..."})}):a?v.jsxs("div",{className:"app",children:[v.jsxs("header",{className:"app-header",children:[v.jsx("h1",{children:"Card Game Tester"}),v.jsxs("div",{className:"player-info",children:["Playing as: ",a==="player1"?"Player 1":"Player 2",v.jsx("button",{className:"change-player-btn",onClick:()=>c(null),children:"Change"})]})]}),v.jsx("main",{children:v.jsx(cE,{gameState:i,playerId:a,opponentId:h})})]}):v.jsxs("div",{className:"app",children:[v.jsx("header",{className:"app-header",children:v.jsx("h1",{children:"Card Game Tester"})}),v.jsx("main",{children:v.jsx(dE,{onSelect:c,onSelectOpponent:p})})]})}F_.createRoot(document.getElementById("root")).render(v.jsx(Rt.StrictMode,{children:v.jsx(hE,{})}));
